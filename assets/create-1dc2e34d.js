import{_ as Ic,a as Sy,c as Ac,C as Ny,F as Cy,V as Oy,r as P,b as bn,D as Mc,A as zc,d as Ey,u as Ry,e as Zu,f as Py,g as Dy,h as Qu,N as Ty,L as Iy,P as Ar,s as ju,i as Ay,j as My,k as zy,l as Ly,m as ky,n as Fy,o as Uy,B as Lc,p as Wy,q as te,t as By,I as Mn,v as Hr,w as Hy,x as ec,y as Gy,S as tc,z as kc,E as $y,G as Vy,H as Yy,J as Ky,K as Xy,M as qy,O as Jy,Q as Zy,R as Fc,T as Qy,U as jy,W as eb,X as tb,Y as nb,Z as rb,$ as ib,a0 as ab,a1 as sb,a2 as ob,a3 as D,a4 as Ne,a5 as u,a6 as Be,a7 as Pr,a8 as ge,a9 as ro,aa as or,ab as rn,ac as Ln,ad as bt,ae as nc,af as Se,ag as ra,ah as Ke,ai as kr,aj as rc,ak as lb,al as Fr,am as Uc,an as Ks,ao as Gi,ap as sn,aq as _n,ar as kn,as as ia,at as aa,au as zt,av as sa,aw as Wc,ax as $i,ay as Bc,az as Bt,aA as Ur,aB as ub,aC as Xs,aD as Hc,aE as Gc,aF as $c,aG as Vc,aH as Vi,aI as Yi,aJ as Ki,aK as Yc,aL as xn,aM as cb,aN as fb,aO as Kc,aP as io,aQ as Xc,aR as db,aS as hb,aT as ic,aU as pb,aV as an,aW as gb,aX as qc,aY as oa,aZ as Jc,a_ as Zc,a$ as Qc,b0 as mb,b1 as la,b2 as Wi,b3 as ua,b4 as Mr,b5 as jc,b6 as ef,b7 as Wr,b8 as vb,b9 as tf,ba as nf,bb as lr,bc as rf,bd as yb,be as af,bf as bb,bg as _b,bh as ao,bi as xb,bj as wb,bk as Sb,bl as Nb,bm as ac,bn as Cb,bo as Ob,bp as Bi,bq as so,br as Eb,bs as Rb,bt as Pb,bu as Mi,bv as Db,bw as sf,bx as Tb,by as Ib,bz as Ab,bA as Mb,bB as zb,bC as Lb,bD as kb,bE as Fb,bF as sc,bG as oc,bH as Dr,bI as Ub,bJ as Wb,bK as Bb,bL as Hb,bM as Gb,bN as $b,bO as zi,bP as Vb,bQ as Yb,bR as Kb,bS as Xb}from"./index-b70051f6.js";var qb=function(r){Ic(a,r);function a(){return r!==null&&r.apply(this,arguments)||this}return a.prototype.render=function(){var n,s=this.props,l=s.children,f=s.className,d=s.elementRef,p=s.fill,m=s.vertical,v=Sy(s,["children","className","elementRef","fill","vertical"]),_=Ac(Ny,(n={},n[Cy]=p,n[Oy]=m,n),f);return P.createElement("div",bn({},v,{className:_,ref:d}),l)},a.displayName="".concat(Mc,".ControlGroup"),a}(zc);function of(r){var a=1.9,n=a.toLocaleString(r),s=1 .toLocaleString(r),l=9 .toLocaleString(r),f="".concat(s,"(.+)").concat(l),d=new RegExp(f).exec(n);return d&&d[1]||"."}function Fs(r,a){return a===void 0&&(a="en-US"),zr(r.toLocaleString(a),a)}function Jb(r,a,n){var s=a??-1/0,l=n??1/0;return Ey(r,s,l)}function Zb(r){return r===void 0&&(r=""),r.toString()}function Qb(r,a){var n=[0,1,2,3,4,5,6,7,8,9].map(function(l){return l.toLocaleString(a)}),s=n.indexOf(r);return s!==-1?s:r}function nn(r,a){var n=""+r;if(parseFloat(n).toString()===r.toString())return r.toString();if(a!==void 0){var s=of(a),l=zr(n,a);return l.split("").map(function(f){return Qb(f,a)}).join("").replace(s,".")}return r.toString()}function jb(r,a){var n=nn(r,a);return r!=null&&n-parseFloat(n)+1>=0}function e_(r,a){if(r.key==null||r.ctrlKey||r.altKey||r.metaKey)return!0;var n=r.key.length===1;return n?lf(r.key,a):!0}function lf(r,a){if(a!==void 0){var n=of(a).replace(".","\\."),s=[0,1,2,3,4,5,6,7,8,9].map(function(d){return d.toLocaleString(a)}).join(""),l=new RegExp("^[Ee"+s+"\\+\\-"+n+"]$");return l.test(r)}else{var f=/^[Ee0-9\+\-\.]$/;return f.test(r)}}function t_(r,a){var n=Math.pow(10,a);return Math.round(r*n)/n}function n_(r){return r.replace(/[\uFF10-\uFF19]/g,function(a){return String.fromCharCode(a.charCodeAt(0)-65248)})}function zr(r,a){var n=n_(r).split(""),s=n.filter(function(l){return lf(l,a)});return s.join("")}var ir;(function(r){r[r.DOWN=-1]="DOWN",r[r.UP=1]="UP"})(ir||(ir={}));var r_=["allowNumericCharactersOnly","buttonPosition","clampValueOnBlur","className","defaultValue","majorStepSize","minorStepSize","onButtonClick","onValueChange","selectAllOnFocus","selectAllOnIncrement","stepSize"],i_=function(r){Ic(a,r);function a(){var n=this,s;return n=r.apply(this,arguments)||this,n.numericInputId=Ry("numericInput"),n.state={currentImeInputInvalid:!1,shouldSelectAfterUpdate:!1,stepMaxPrecision:a.getStepMaxPrecision(n.props),value:Zb((s=n.props.value)!==null&&s!==void 0?s:n.props.defaultValue)},n.didPasteEventJustOccur=!1,n.delta=0,n.inputElement=null,n.inputRef=Zu(n,"inputElement",n.props.inputRef),n.incrementButtonHandlers=n.getButtonEventHandlers(ir.UP),n.decrementButtonHandlers=n.getButtonEventHandlers(ir.DOWN),n.getCurrentValueAsNumber=function(){return Number(nn(n.state.value,n.props.locale))},n.handleButtonClick=function(l,f){var d,p,m=n.updateDelta(f,l),v=n.incrementValue(m);(p=(d=n.props).onButtonClick)===null||p===void 0||p.call(d,Number(nn(v,n.props.locale)),v)},n.stopContinuousChange=function(){n.delta=0,n.clearTimeouts(),clearInterval(n.intervalId),document.removeEventListener("mouseup",n.stopContinuousChange)},n.handleContinuousChange=function(){var l,f,d,p;if(n.props.min!==void 0||n.props.max!==void 0){var m=(l=n.props.min)!==null&&l!==void 0?l:-1/0,v=(f=n.props.max)!==null&&f!==void 0?f:1/0,_=n.getCurrentValueAsNumber();if(_<=m||_>=v){n.stopContinuousChange();return}}var b=n.incrementValue(n.delta);(p=(d=n.props).onButtonClick)===null||p===void 0||p.call(d,Number(nn(b,n.props.locale)),b)},n.handleInputFocus=function(l){var f,d;n.setState({shouldSelectAfterUpdate:n.props.selectAllOnFocus}),(d=(f=n.props).onFocus)===null||d===void 0||d.call(f,l)},n.handleInputBlur=function(l){var f,d;if(n.setState({shouldSelectAfterUpdate:!1}),n.props.clampValueOnBlur){var p=l.target.value;n.handleNextValue(n.roundAndClampValue(p))}(d=(f=n.props).onBlur)===null||d===void 0||d.call(f,l)},n.handleInputKeyDown=function(l){var f,d;if(!(n.props.disabled||n.props.readOnly)){var p=l.keyCode,m;if(p===Py?m=ir.UP:p===Dy&&(m=ir.DOWN),m!==void 0){l.preventDefault();var v=n.updateDelta(m,l);n.incrementValue(v)}(d=(f=n.props).onKeyDown)===null||d===void 0||d.call(f,l)}},n.handleCompositionEnd=function(l){n.props.allowNumericCharactersOnly&&(n.handleNextValue(zr(l.data,n.props.locale)),n.setState({currentImeInputInvalid:!1}))},n.handleCompositionUpdate=function(l){if(n.props.allowNumericCharactersOnly){var f=l.data,d=zr(f,n.props.locale);d.length===0&&f.length>0?n.setState({currentImeInputInvalid:!0}):n.setState({currentImeInputInvalid:!1})}},n.handleInputKeyPress=function(l){var f,d;n.props.allowNumericCharactersOnly&&!e_(l,n.props.locale)&&l.preventDefault(),(d=(f=n.props).onKeyPress)===null||d===void 0||d.call(f,l)},n.handleInputPaste=function(l){var f,d;n.didPasteEventJustOccur=!0,(d=(f=n.props).onPaste)===null||d===void 0||d.call(f,l)},n.handleInputChange=function(l){var f=l.target.value,d=f;n.props.allowNumericCharactersOnly&&n.didPasteEventJustOccur&&(n.didPasteEventJustOccur=!1,d=zr(f,n.props.locale)),n.handleNextValue(d),n.setState({shouldSelectAfterUpdate:!1})},n}return a.getDerivedStateFromProps=function(n,s){var l,f,d={prevMaxProp:n.max,prevMinProp:n.min},p=n.min!==s.prevMinProp,m=n.max!==s.prevMaxProp,v=p||m,_=(f=(l=n.value)===null||l===void 0?void 0:l.toString())!==null&&f!==void 0?f:s.value,b=a.getStepMaxPrecision(n),w=_!==a.VALUE_EMPTY?a.roundAndClampValue(_,b,n.min,n.max,0,n.locale):a.VALUE_EMPTY;return v&&w!==s.value?bn(bn({},d),{stepMaxPrecision:b,value:w}):bn(bn({},d),{stepMaxPrecision:b,value:_})},a.getStepMaxPrecision=function(n){return n.minorStepSize!=null?Qu(n.minorStepSize):Qu(n.stepSize)},a.roundAndClampValue=function(n,s,l,f,d,p){if(d===void 0&&(d=0),!jb(n,p))return a.VALUE_EMPTY;var m=nn(n,p),v=t_(Number(m)+d,s),_=Jb(v,l,f);return Fs(_,p)},a.prototype.render=function(){var n,s=this.props,l=s.buttonPosition,f=s.className,d=s.fill,p=s.large,m=Ac(Ty,(n={},n[Iy]=p,n),f),v=this.renderButtons();return P.createElement(qb,{className:m,fill:d},l===Ar.LEFT&&v,this.renderInput(),l===Ar.RIGHT&&v)},a.prototype.componentDidUpdate=function(n,s){var l,f,d;r.prototype.componentDidUpdate.call(this,n,s),n.inputRef!==this.props.inputRef&&(ju(n.inputRef,null),this.inputRef=Zu(this,"inputElement",this.props.inputRef),ju(this.props.inputRef,this.inputElement)),this.state.shouldSelectAfterUpdate&&((l=this.inputElement)===null||l===void 0||l.setSelectionRange(0,this.state.value.length));var p=this.props.min!==n.min,m=this.props.max!==n.max,v=p||m,_=this.props.locale!==n.locale,b=this.state.value!==s.value;if(v&&b||_&&s.value!==a.VALUE_EMPTY){var w=_?s.value:this.state.value,S=nn(w,n.locale),A=Fs(+S,this.props.locale);(d=(f=this.props).onValueChange)===null||d===void 0||d.call(f,+S,A,this.inputElement)}},a.prototype.validateProps=function(n){var s=n.majorStepSize,l=n.max,f=n.min,d=n.minorStepSize,p=n.stepSize,m=n.value;if(f!=null&&l!=null&&f>l&&console.error(Ay),p<=0&&console.error(My),d&&d<=0&&console.error(zy),s&&s<=0&&console.error(Ly),d&&d>p&&console.error(ky),s&&s<p&&console.error(Fy),m!=null){var v=a.getStepMaxPrecision(n),_=a.roundAndClampValue(m.toString(),v,f,l,0,this.props.locale),b=_!==m.toString(),w=Fs(Number(nn(m,this.props.locale)),this.props.locale),S=_!==w;b&&S&&console.warn(Uy)}},a.prototype.renderButtons=function(){var n=this.props,s=n.intent,l=n.max,f=n.min,d=n.locale,p=nn(this.state.value,d),m=this.props.disabled||this.props.readOnly,v=l!==void 0&&p!==""&&+p>=l,_=f!==void 0&&p!==""&&+p<=f;return P.createElement(Lc,{className:Wy,key:"button-group",vertical:!0},P.createElement(te,bn({"aria-label":"increment","aria-controls":this.numericInputId,disabled:m||v,icon:"chevron-up",intent:s},this.incrementButtonHandlers)),P.createElement(te,bn({"aria-label":"decrement","aria-controls":this.numericInputId,disabled:m||_,icon:"chevron-down",intent:s},this.decrementButtonHandlers)))},a.prototype.renderInput=function(){var n=By(this.props,r_,!0),s=this.getCurrentValueAsNumber();return P.createElement(Mn,bn({asyncControl:this.props.asyncControl,autoComplete:"off",id:this.numericInputId,role:this.props.allowNumericCharactersOnly?"spinbutton":void 0},n,{"aria-valuemax":this.props.max,"aria-valuemin":this.props.min,"aria-valuenow":s,intent:this.state.currentImeInputInvalid?Hr.DANGER:this.props.intent,inputClassName:this.props.inputClassName,inputRef:this.inputRef,large:this.props.large,leftElement:this.props.leftElement,leftIcon:this.props.leftIcon,onFocus:this.handleInputFocus,onBlur:this.handleInputBlur,onChange:this.handleInputChange,onCompositionEnd:this.handleCompositionEnd,onCompositionUpdate:this.handleCompositionUpdate,onKeyDown:this.handleInputKeyDown,onKeyPress:this.handleInputKeyPress,onPaste:this.handleInputPaste,rightElement:this.props.rightElement,value:this.state.value}))},a.prototype.getButtonEventHandlers=function(n){var s=this;return{onKeyDown:function(l){!s.props.disabled&&Hy(l.keyCode)&&s.handleButtonClick(l,n)},onMouseDown:function(l){s.props.disabled||(s.handleButtonClick(l,n),s.startContinuousChange())}}},a.prototype.startContinuousChange=function(){var n=this;document.addEventListener("mouseup",this.stopContinuousChange),this.setTimeout(function(){n.intervalId=window.setInterval(n.handleContinuousChange,a.CONTINUOUS_CHANGE_INTERVAL)},a.CONTINUOUS_CHANGE_DELAY)},a.prototype.handleNextValue=function(n){var s,l;this.props.value==null&&this.setState({value:n}),(l=(s=this.props).onValueChange)===null||l===void 0||l.call(s,Number(nn(n,this.props.locale)),n,this.inputElement)},a.prototype.incrementValue=function(n){var s=this.state.value===a.VALUE_EMPTY?a.VALUE_ZERO:this.state.value,l=this.roundAndClampValue(s,n);return l!==this.state.value&&(this.handleNextValue(l),this.setState({shouldSelectAfterUpdate:this.props.selectAllOnIncrement})),l},a.prototype.getIncrementDelta=function(n,s,l){var f=this.props,d=f.majorStepSize,p=f.minorStepSize,m=f.stepSize;return s&&d!=null?n*d:l&&p!=null?n*p:n*m},a.prototype.roundAndClampValue=function(n,s){return s===void 0&&(s=0),a.roundAndClampValue(n,this.state.stepMaxPrecision,this.props.min,this.props.max,s,this.props.locale)},a.prototype.updateDelta=function(n,s){return this.delta=this.getIncrementDelta(n,s.shiftKey,s.altKey),this.delta},a.displayName="".concat(Mc,".NumericInput"),a.VALUE_EMPTY="",a.VALUE_ZERO="0",a.defaultProps={allowNumericCharactersOnly:!0,buttonPosition:Ar.RIGHT,clampValueOnBlur:!1,defaultValue:a.VALUE_EMPTY,large:!1,majorStepSize:10,minorStepSize:.1,selectAllOnFocus:!1,selectAllOnIncrement:!1,stepSize:1},a.CONTINUOUS_CHANGE_DELAY=300,a.CONTINUOUS_CHANGE_INTERVAL=100,a}(zc);function a_(r,a,n){switch(n.length){case 0:return r.call(a);case 1:return r.call(a,n[0]);case 2:return r.call(a,n[0],n[1]);case 3:return r.call(a,n[0],n[1],n[2])}return r.apply(a,n)}var s_=800,o_=16,l_=Date.now;function u_(r){var a=0,n=0;return function(){var s=l_(),l=o_-(s-n);if(n=s,l>0){if(++a>=s_)return arguments[0]}else a=0;return r.apply(void 0,arguments)}}function c_(r){return function(){return r}}var f_=ec?function(r,a){return ec(r,"toString",{configurable:!0,enumerable:!1,value:c_(a),writable:!0})}:Gy;const d_=f_;var h_=u_(d_);const p_=h_;var lc=Math.max;function g_(r,a,n){return a=lc(a===void 0?r.length-1:a,0),function(){for(var s=arguments,l=-1,f=lc(s.length-a,0),d=Array(f);++l<f;)d[l]=s[a+l];l=-1;for(var p=Array(a+1);++l<a;)p[l]=s[l];return p[a]=n(d),a_(r,this,p)}}var uc=tc?tc.isConcatSpreadable:void 0;function m_(r){return kc(r)||$y(r)||!!(uc&&r&&r[uc])}function uf(r,a,n,s,l){var f=-1,d=r.length;for(n||(n=m_),l||(l=[]);++f<d;){var p=r[f];a>0&&n(p)?a>1?uf(p,a-1,n,s,l):Vy(l,p):s||(l[l.length]=p)}return l}function v_(r){var a=r==null?0:r.length;return a?uf(r,1):[]}function y_(r){return p_(g_(r,void 0,v_),r+"")}function b_(r,a,n,s){for(var l=-1,f=r==null?0:r.length;++l<f;){var d=r[l];a(s,d,n(d),r)}return s}function __(r){return function(a,n,s){for(var l=-1,f=Object(a),d=s(a),p=d.length;p--;){var m=d[r?p:++l];if(n(f[m],m,f)===!1)break}return a}}var x_=__();const w_=x_;function S_(r,a){return r&&w_(r,a,Yy)}function N_(r,a){return function(n,s){if(n==null)return n;if(!Ky(n))return r(n,s);for(var l=n.length,f=a?l:-1,d=Object(n);(a?f--:++f<l)&&s(d[f],f,d)!==!1;);return n}}var C_=N_(S_);const O_=C_;function E_(r,a,n,s){return O_(r,function(l,f,d){a(s,l,n(l),d)}),s}function R_(r,a){return function(n,s){var l=kc(n)?b_:E_,f=a?a():{};return l(n,r,Xy(s),f)}}function P_(r){var a=r==null?0:r.length;return a?r[a-1]:void 0}function cf(r){return r&&r.length?r[0]:void 0}var D_=Object.prototype,T_=D_.hasOwnProperty,I_=R_(function(r,a,n){T_.call(r,n)?r[n].push(a):qy(r,n,[a])});const A_=I_;function M_(r,a){return a.length<2?r:Jy(r,Zy(a,0,-1))}function ff(r){return r==null}function df(r,a){return a=Fc(a,r),r=M_(r,a),r==null||delete r[Qy(P_(a))]}function z_(r){return jy(r)?void 0:r}var L_=1,k_=2,F_=4,U_=y_(function(r,a){var n={};if(r==null)return n;var s=!1;a=eb(a,function(f){return f=Fc(f,r),s||(s=f.length>1),f}),tb(r,nb(r),n),s&&(n=rb(n,L_|k_|F_,z_));for(var l=a.length;l--;)df(n,a[l]);return n});const Xi=U_;var W_=0;function zn(r){var a=++W_;return ib(r)+a}function B_(r,a){return r==null?!0:df(r,a)}var H_=function(r){return r===void 0&&(r={laptopL:1440,laptop:1024,tablet:768}),function(){var a=P.useState(ab?window.innerWidth:0),n=a[0],s=a[1];P.useEffect(function(){var d=function(){s(window.innerWidth)};return d(),sb(window,"resize",d),function(){ob(window,"resize",d)}});var l=P.useMemo(function(){return Object.entries(r).sort(function(d,p){return d[1]>=p[1]?1:-1})},[r]),f=l.reduce(function(d,p){var m=p[0],v=p[1];return n>=v?m:d},l[0][0]);return f}};const G_=H_,hf=({children:r,className:a})=>{const n=()=>{if(typeof(r==null?void 0:r[Symbol.iterator])=="function"){const s=r;return Array.from(s).map((l,f)=>D(P.Fragment,{children:[!!f&&u("span",{className:"mx-0.5",children:"·"}),l]},f))}else return r};return D("div",{className:Ne("flex text-gray-600 dark:text-zinc-400 text-xs items-center",a),children:[u(Be,{icon:"info-sign",size:12,className:"mr-1.5"}),u("div",{children:n()})]})},$_=G_();var qi={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */qi.exports;(function(r,a){(function(){var n,s="4.17.21",l=200,f="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",d="Expected a function",p="Invalid `variable` option passed into `_.template`",m="__lodash_hash_undefined__",v=500,_="__lodash_placeholder__",b=1,w=2,S=4,A=1,R=2,I=1,L=2,$=4,U=8,Y=16,Z=32,ne=64,ue=128,he=256,Ce=512,Ee=30,Le="...",me=800,Me=16,tt=1,nt=2,wn=3,ze=1/0,ut=9007199254740991,$t=17976931348623157e292,He=0/0,G=4294967295,O=G-1,k=G>>>1,H=[["ary",ue],["bind",I],["bindKey",L],["curry",U],["curryRight",Y],["flip",Ce],["partial",Z],["partialRight",ne],["rearg",he]],W="[object Arguments]",B="[object Array]",X="[object AsyncFunction]",J="[object Boolean]",ae="[object Date]",pe="[object DOMException]",Lt="[object Error]",Pt="[object Function]",Vt="[object GeneratorFunction]",ke="[object Map]",Yt="[object Number]",Bn="[object Null]",rt="[object Object]",Gr="[object Promise]",$r="[object Proxy]",on="[object RegExp]",it="[object Set]",Sn="[object String]",Vr="[object Symbol]",Hf="[object Undefined]",dr="[object WeakMap]",Gf="[object WeakSet]",hr="[object ArrayBuffer]",Hn="[object DataView]",va="[object Float32Array]",ya="[object Float64Array]",ba="[object Int8Array]",_a="[object Int16Array]",xa="[object Int32Array]",wa="[object Uint8Array]",Sa="[object Uint8ClampedArray]",Na="[object Uint16Array]",Ca="[object Uint32Array]",$f=/\b__p \+= '';/g,Vf=/\b(__p \+=) '' \+/g,Yf=/(__e\(.*?\)|\b__t\)) \+\n'';/g,wo=/&(?:amp|lt|gt|quot|#39);/g,So=/[&<>"']/g,Kf=RegExp(wo.source),Xf=RegExp(So.source),qf=/<%-([\s\S]+?)%>/g,Jf=/<%([\s\S]+?)%>/g,No=/<%=([\s\S]+?)%>/g,Zf=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Qf=/^\w*$/,jf=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Oa=/[\\^$.*+?()[\]{}|]/g,ed=RegExp(Oa.source),Ea=/^\s+/,td=/\s/,nd=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,rd=/\{\n\/\* \[wrapped with (.+)\] \*/,id=/,? & /,ad=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,sd=/[()=,{}\[\]\/\s]/,od=/\\(\\)?/g,ld=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Co=/\w*$/,ud=/^[-+]0x[0-9a-f]+$/i,cd=/^0b[01]+$/i,fd=/^\[object .+?Constructor\]$/,dd=/^0o[0-7]+$/i,hd=/^(?:0|[1-9]\d*)$/,pd=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Yr=/($^)/,gd=/['\n\r\u2028\u2029\\]/g,Kr="\\ud800-\\udfff",md="\\u0300-\\u036f",vd="\\ufe20-\\ufe2f",yd="\\u20d0-\\u20ff",Oo=md+vd+yd,Eo="\\u2700-\\u27bf",Ro="a-z\\xdf-\\xf6\\xf8-\\xff",bd="\\xac\\xb1\\xd7\\xf7",_d="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",xd="\\u2000-\\u206f",wd=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Po="A-Z\\xc0-\\xd6\\xd8-\\xde",Do="\\ufe0e\\ufe0f",To=bd+_d+xd+wd,Ra="['’]",Sd="["+Kr+"]",Io="["+To+"]",Xr="["+Oo+"]",Ao="\\d+",Nd="["+Eo+"]",Mo="["+Ro+"]",zo="[^"+Kr+To+Ao+Eo+Ro+Po+"]",Pa="\\ud83c[\\udffb-\\udfff]",Cd="(?:"+Xr+"|"+Pa+")",Lo="[^"+Kr+"]",Da="(?:\\ud83c[\\udde6-\\uddff]){2}",Ta="[\\ud800-\\udbff][\\udc00-\\udfff]",Gn="["+Po+"]",ko="\\u200d",Fo="(?:"+Mo+"|"+zo+")",Od="(?:"+Gn+"|"+zo+")",Uo="(?:"+Ra+"(?:d|ll|m|re|s|t|ve))?",Wo="(?:"+Ra+"(?:D|LL|M|RE|S|T|VE))?",Bo=Cd+"?",Ho="["+Do+"]?",Ed="(?:"+ko+"(?:"+[Lo,Da,Ta].join("|")+")"+Ho+Bo+")*",Rd="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Pd="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",Go=Ho+Bo+Ed,Dd="(?:"+[Nd,Da,Ta].join("|")+")"+Go,Td="(?:"+[Lo+Xr+"?",Xr,Da,Ta,Sd].join("|")+")",Id=RegExp(Ra,"g"),Ad=RegExp(Xr,"g"),Ia=RegExp(Pa+"(?="+Pa+")|"+Td+Go,"g"),Md=RegExp([Gn+"?"+Mo+"+"+Uo+"(?="+[Io,Gn,"$"].join("|")+")",Od+"+"+Wo+"(?="+[Io,Gn+Fo,"$"].join("|")+")",Gn+"?"+Fo+"+"+Uo,Gn+"+"+Wo,Pd,Rd,Ao,Dd].join("|"),"g"),zd=RegExp("["+ko+Kr+Oo+Do+"]"),Ld=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,kd=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Fd=-1,we={};we[va]=we[ya]=we[ba]=we[_a]=we[xa]=we[wa]=we[Sa]=we[Na]=we[Ca]=!0,we[W]=we[B]=we[hr]=we[J]=we[Hn]=we[ae]=we[Lt]=we[Pt]=we[ke]=we[Yt]=we[rt]=we[on]=we[it]=we[Sn]=we[dr]=!1;var xe={};xe[W]=xe[B]=xe[hr]=xe[Hn]=xe[J]=xe[ae]=xe[va]=xe[ya]=xe[ba]=xe[_a]=xe[xa]=xe[ke]=xe[Yt]=xe[rt]=xe[on]=xe[it]=xe[Sn]=xe[Vr]=xe[wa]=xe[Sa]=xe[Na]=xe[Ca]=!0,xe[Lt]=xe[Pt]=xe[dr]=!1;var Ud={À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"},Wd={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Bd={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},Hd={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Gd=parseFloat,$d=parseInt,$o=typeof Pr=="object"&&Pr&&Pr.Object===Object&&Pr,Vd=typeof self=="object"&&self&&self.Object===Object&&self,Ve=$o||Vd||Function("return this")(),Aa=a&&!a.nodeType&&a,Nn=Aa&&!0&&r&&!r.nodeType&&r,Vo=Nn&&Nn.exports===Aa,Ma=Vo&&$o.process,_t=function(){try{var N=Nn&&Nn.require&&Nn.require("util").types;return N||Ma&&Ma.binding&&Ma.binding("util")}catch{}}(),Yo=_t&&_t.isArrayBuffer,Ko=_t&&_t.isDate,Xo=_t&&_t.isMap,qo=_t&&_t.isRegExp,Jo=_t&&_t.isSet,Zo=_t&&_t.isTypedArray;function ct(N,T,E){switch(E.length){case 0:return N.call(T);case 1:return N.call(T,E[0]);case 2:return N.call(T,E[0],E[1]);case 3:return N.call(T,E[0],E[1],E[2])}return N.apply(T,E)}function Yd(N,T,E,K){for(var re=-1,ve=N==null?0:N.length;++re<ve;){var Fe=N[re];T(K,Fe,E(Fe),N)}return K}function xt(N,T){for(var E=-1,K=N==null?0:N.length;++E<K&&T(N[E],E,N)!==!1;);return N}function Kd(N,T){for(var E=N==null?0:N.length;E--&&T(N[E],E,N)!==!1;);return N}function Qo(N,T){for(var E=-1,K=N==null?0:N.length;++E<K;)if(!T(N[E],E,N))return!1;return!0}function ln(N,T){for(var E=-1,K=N==null?0:N.length,re=0,ve=[];++E<K;){var Fe=N[E];T(Fe,E,N)&&(ve[re++]=Fe)}return ve}function qr(N,T){var E=N==null?0:N.length;return!!E&&$n(N,T,0)>-1}function za(N,T,E){for(var K=-1,re=N==null?0:N.length;++K<re;)if(E(T,N[K]))return!0;return!1}function Oe(N,T){for(var E=-1,K=N==null?0:N.length,re=Array(K);++E<K;)re[E]=T(N[E],E,N);return re}function un(N,T){for(var E=-1,K=T.length,re=N.length;++E<K;)N[re+E]=T[E];return N}function La(N,T,E,K){var re=-1,ve=N==null?0:N.length;for(K&&ve&&(E=N[++re]);++re<ve;)E=T(E,N[re],re,N);return E}function Xd(N,T,E,K){var re=N==null?0:N.length;for(K&&re&&(E=N[--re]);re--;)E=T(E,N[re],re,N);return E}function ka(N,T){for(var E=-1,K=N==null?0:N.length;++E<K;)if(T(N[E],E,N))return!0;return!1}var qd=Fa("length");function Jd(N){return N.split("")}function Zd(N){return N.match(ad)||[]}function jo(N,T,E){var K;return E(N,function(re,ve,Fe){if(T(re,ve,Fe))return K=ve,!1}),K}function Jr(N,T,E,K){for(var re=N.length,ve=E+(K?1:-1);K?ve--:++ve<re;)if(T(N[ve],ve,N))return ve;return-1}function $n(N,T,E){return T===T?uh(N,T,E):Jr(N,el,E)}function Qd(N,T,E,K){for(var re=E-1,ve=N.length;++re<ve;)if(K(N[re],T))return re;return-1}function el(N){return N!==N}function tl(N,T){var E=N==null?0:N.length;return E?Wa(N,T)/E:He}function Fa(N){return function(T){return T==null?n:T[N]}}function Ua(N){return function(T){return N==null?n:N[T]}}function nl(N,T,E,K,re){return re(N,function(ve,Fe,_e){E=K?(K=!1,ve):T(E,ve,Fe,_e)}),E}function jd(N,T){var E=N.length;for(N.sort(T);E--;)N[E]=N[E].value;return N}function Wa(N,T){for(var E,K=-1,re=N.length;++K<re;){var ve=T(N[K]);ve!==n&&(E=E===n?ve:E+ve)}return E}function Ba(N,T){for(var E=-1,K=Array(N);++E<N;)K[E]=T(E);return K}function eh(N,T){return Oe(T,function(E){return[E,N[E]]})}function rl(N){return N&&N.slice(0,ol(N)+1).replace(Ea,"")}function ft(N){return function(T){return N(T)}}function Ha(N,T){return Oe(T,function(E){return N[E]})}function pr(N,T){return N.has(T)}function il(N,T){for(var E=-1,K=N.length;++E<K&&$n(T,N[E],0)>-1;);return E}function al(N,T){for(var E=N.length;E--&&$n(T,N[E],0)>-1;);return E}function th(N,T){for(var E=N.length,K=0;E--;)N[E]===T&&++K;return K}var nh=Ua(Ud),rh=Ua(Wd);function ih(N){return"\\"+Hd[N]}function ah(N,T){return N==null?n:N[T]}function Vn(N){return zd.test(N)}function sh(N){return Ld.test(N)}function oh(N){for(var T,E=[];!(T=N.next()).done;)E.push(T.value);return E}function Ga(N){var T=-1,E=Array(N.size);return N.forEach(function(K,re){E[++T]=[re,K]}),E}function sl(N,T){return function(E){return N(T(E))}}function cn(N,T){for(var E=-1,K=N.length,re=0,ve=[];++E<K;){var Fe=N[E];(Fe===T||Fe===_)&&(N[E]=_,ve[re++]=E)}return ve}function Zr(N){var T=-1,E=Array(N.size);return N.forEach(function(K){E[++T]=K}),E}function lh(N){var T=-1,E=Array(N.size);return N.forEach(function(K){E[++T]=[K,K]}),E}function uh(N,T,E){for(var K=E-1,re=N.length;++K<re;)if(N[K]===T)return K;return-1}function ch(N,T,E){for(var K=E+1;K--;)if(N[K]===T)return K;return K}function Yn(N){return Vn(N)?dh(N):qd(N)}function Dt(N){return Vn(N)?hh(N):Jd(N)}function ol(N){for(var T=N.length;T--&&td.test(N.charAt(T)););return T}var fh=Ua(Bd);function dh(N){for(var T=Ia.lastIndex=0;Ia.test(N);)++T;return T}function hh(N){return N.match(Ia)||[]}function ph(N){return N.match(Md)||[]}var gh=function N(T){T=T==null?Ve:Kn.defaults(Ve.Object(),T,Kn.pick(Ve,kd));var E=T.Array,K=T.Date,re=T.Error,ve=T.Function,Fe=T.Math,_e=T.Object,$a=T.RegExp,mh=T.String,wt=T.TypeError,Qr=E.prototype,vh=ve.prototype,Xn=_e.prototype,jr=T["__core-js_shared__"],ei=vh.toString,be=Xn.hasOwnProperty,yh=0,ll=function(){var e=/[^.]+$/.exec(jr&&jr.keys&&jr.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),ti=Xn.toString,bh=ei.call(_e),_h=Ve._,xh=$a("^"+ei.call(be).replace(Oa,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),ni=Vo?T.Buffer:n,fn=T.Symbol,ri=T.Uint8Array,ul=ni?ni.allocUnsafe:n,ii=sl(_e.getPrototypeOf,_e),cl=_e.create,fl=Xn.propertyIsEnumerable,ai=Qr.splice,dl=fn?fn.isConcatSpreadable:n,gr=fn?fn.iterator:n,Cn=fn?fn.toStringTag:n,si=function(){try{var e=Dn(_e,"defineProperty");return e({},"",{}),e}catch{}}(),wh=T.clearTimeout!==Ve.clearTimeout&&T.clearTimeout,Sh=K&&K.now!==Ve.Date.now&&K.now,Nh=T.setTimeout!==Ve.setTimeout&&T.setTimeout,oi=Fe.ceil,li=Fe.floor,Va=_e.getOwnPropertySymbols,Ch=ni?ni.isBuffer:n,hl=T.isFinite,Oh=Qr.join,Eh=sl(_e.keys,_e),Ue=Fe.max,Xe=Fe.min,Rh=K.now,Ph=T.parseInt,pl=Fe.random,Dh=Qr.reverse,Ya=Dn(T,"DataView"),mr=Dn(T,"Map"),Ka=Dn(T,"Promise"),qn=Dn(T,"Set"),vr=Dn(T,"WeakMap"),yr=Dn(_e,"create"),ui=vr&&new vr,Jn={},Th=Tn(Ya),Ih=Tn(mr),Ah=Tn(Ka),Mh=Tn(qn),zh=Tn(vr),ci=fn?fn.prototype:n,br=ci?ci.valueOf:n,gl=ci?ci.toString:n;function h(e){if(Pe(e)&&!ie(e)&&!(e instanceof fe)){if(e instanceof St)return e;if(be.call(e,"__wrapped__"))return mu(e)}return new St(e)}var Zn=function(){function e(){}return function(t){if(!Re(t))return{};if(cl)return cl(t);e.prototype=t;var i=new e;return e.prototype=n,i}}();function fi(){}function St(e,t){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!t,this.__index__=0,this.__values__=n}h.templateSettings={escape:qf,evaluate:Jf,interpolate:No,variable:"",imports:{_:h}},h.prototype=fi.prototype,h.prototype.constructor=h,St.prototype=Zn(fi.prototype),St.prototype.constructor=St;function fe(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=G,this.__views__=[]}function Lh(){var e=new fe(this.__wrapped__);return e.__actions__=at(this.__actions__),e.__dir__=this.__dir__,e.__filtered__=this.__filtered__,e.__iteratees__=at(this.__iteratees__),e.__takeCount__=this.__takeCount__,e.__views__=at(this.__views__),e}function kh(){if(this.__filtered__){var e=new fe(this);e.__dir__=-1,e.__filtered__=!0}else e=this.clone(),e.__dir__*=-1;return e}function Fh(){var e=this.__wrapped__.value(),t=this.__dir__,i=ie(e),o=t<0,c=i?e.length:0,g=Jp(0,c,this.__views__),y=g.start,x=g.end,C=x-y,M=o?x:y-1,z=this.__iteratees__,F=z.length,V=0,q=Xe(C,this.__takeCount__);if(!i||!o&&c==C&&q==C)return Ul(e,this.__actions__);var j=[];e:for(;C--&&V<q;){M+=t;for(var oe=-1,ee=e[M];++oe<F;){var ce=z[oe],de=ce.iteratee,pt=ce.type,et=de(ee);if(pt==nt)ee=et;else if(!et){if(pt==tt)continue e;break e}}j[V++]=ee}return j}fe.prototype=Zn(fi.prototype),fe.prototype.constructor=fe;function On(e){var t=-1,i=e==null?0:e.length;for(this.clear();++t<i;){var o=e[t];this.set(o[0],o[1])}}function Uh(){this.__data__=yr?yr(null):{},this.size=0}function Wh(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}function Bh(e){var t=this.__data__;if(yr){var i=t[e];return i===m?n:i}return be.call(t,e)?t[e]:n}function Hh(e){var t=this.__data__;return yr?t[e]!==n:be.call(t,e)}function Gh(e,t){var i=this.__data__;return this.size+=this.has(e)?0:1,i[e]=yr&&t===n?m:t,this}On.prototype.clear=Uh,On.prototype.delete=Wh,On.prototype.get=Bh,On.prototype.has=Hh,On.prototype.set=Gh;function Kt(e){var t=-1,i=e==null?0:e.length;for(this.clear();++t<i;){var o=e[t];this.set(o[0],o[1])}}function $h(){this.__data__=[],this.size=0}function Vh(e){var t=this.__data__,i=di(t,e);if(i<0)return!1;var o=t.length-1;return i==o?t.pop():ai.call(t,i,1),--this.size,!0}function Yh(e){var t=this.__data__,i=di(t,e);return i<0?n:t[i][1]}function Kh(e){return di(this.__data__,e)>-1}function Xh(e,t){var i=this.__data__,o=di(i,e);return o<0?(++this.size,i.push([e,t])):i[o][1]=t,this}Kt.prototype.clear=$h,Kt.prototype.delete=Vh,Kt.prototype.get=Yh,Kt.prototype.has=Kh,Kt.prototype.set=Xh;function Xt(e){var t=-1,i=e==null?0:e.length;for(this.clear();++t<i;){var o=e[t];this.set(o[0],o[1])}}function qh(){this.size=0,this.__data__={hash:new On,map:new(mr||Kt),string:new On}}function Jh(e){var t=Ni(this,e).delete(e);return this.size-=t?1:0,t}function Zh(e){return Ni(this,e).get(e)}function Qh(e){return Ni(this,e).has(e)}function jh(e,t){var i=Ni(this,e),o=i.size;return i.set(e,t),this.size+=i.size==o?0:1,this}Xt.prototype.clear=qh,Xt.prototype.delete=Jh,Xt.prototype.get=Zh,Xt.prototype.has=Qh,Xt.prototype.set=jh;function En(e){var t=-1,i=e==null?0:e.length;for(this.__data__=new Xt;++t<i;)this.add(e[t])}function ep(e){return this.__data__.set(e,m),this}function tp(e){return this.__data__.has(e)}En.prototype.add=En.prototype.push=ep,En.prototype.has=tp;function Tt(e){var t=this.__data__=new Kt(e);this.size=t.size}function np(){this.__data__=new Kt,this.size=0}function rp(e){var t=this.__data__,i=t.delete(e);return this.size=t.size,i}function ip(e){return this.__data__.get(e)}function ap(e){return this.__data__.has(e)}function sp(e,t){var i=this.__data__;if(i instanceof Kt){var o=i.__data__;if(!mr||o.length<l-1)return o.push([e,t]),this.size=++i.size,this;i=this.__data__=new Xt(o)}return i.set(e,t),this.size=i.size,this}Tt.prototype.clear=np,Tt.prototype.delete=rp,Tt.prototype.get=ip,Tt.prototype.has=ap,Tt.prototype.set=sp;function ml(e,t){var i=ie(e),o=!i&&In(e),c=!i&&!o&&mn(e),g=!i&&!o&&!c&&tr(e),y=i||o||c||g,x=y?Ba(e.length,mh):[],C=x.length;for(var M in e)(t||be.call(e,M))&&!(y&&(M=="length"||c&&(M=="offset"||M=="parent")||g&&(M=="buffer"||M=="byteLength"||M=="byteOffset")||Qt(M,C)))&&x.push(M);return x}function vl(e){var t=e.length;return t?e[is(0,t-1)]:n}function op(e,t){return Ci(at(e),Rn(t,0,e.length))}function lp(e){return Ci(at(e))}function Xa(e,t,i){(i!==n&&!It(e[t],i)||i===n&&!(t in e))&&qt(e,t,i)}function _r(e,t,i){var o=e[t];(!(be.call(e,t)&&It(o,i))||i===n&&!(t in e))&&qt(e,t,i)}function di(e,t){for(var i=e.length;i--;)if(It(e[i][0],t))return i;return-1}function up(e,t,i,o){return dn(e,function(c,g,y){t(o,c,i(c),y)}),o}function yl(e,t){return e&&Ft(t,Ge(t),e)}function cp(e,t){return e&&Ft(t,ot(t),e)}function qt(e,t,i){t=="__proto__"&&si?si(e,t,{configurable:!0,enumerable:!0,value:i,writable:!0}):e[t]=i}function qa(e,t){for(var i=-1,o=t.length,c=E(o),g=e==null;++i<o;)c[i]=g?n:Ps(e,t[i]);return c}function Rn(e,t,i){return e===e&&(i!==n&&(e=e<=i?e:i),t!==n&&(e=e>=t?e:t)),e}function Nt(e,t,i,o,c,g){var y,x=t&b,C=t&w,M=t&S;if(i&&(y=c?i(e,o,c,g):i(e)),y!==n)return y;if(!Re(e))return e;var z=ie(e);if(z){if(y=Qp(e),!x)return at(e,y)}else{var F=qe(e),V=F==Pt||F==Vt;if(mn(e))return Hl(e,x);if(F==rt||F==W||V&&!c){if(y=C||V?{}:ou(e),!x)return C?Bp(e,cp(y,e)):Wp(e,yl(y,e))}else{if(!xe[F])return c?e:{};y=jp(e,F,x)}}g||(g=new Tt);var q=g.get(e);if(q)return q;g.set(e,y),Lu(e)?e.forEach(function(ee){y.add(Nt(ee,t,i,ee,e,g))}):Mu(e)&&e.forEach(function(ee,ce){y.set(ce,Nt(ee,t,i,ce,e,g))});var j=M?C?gs:ps:C?ot:Ge,oe=z?n:j(e);return xt(oe||e,function(ee,ce){oe&&(ce=ee,ee=e[ce]),_r(y,ce,Nt(ee,t,i,ce,e,g))}),y}function fp(e){var t=Ge(e);return function(i){return bl(i,e,t)}}function bl(e,t,i){var o=i.length;if(e==null)return!o;for(e=_e(e);o--;){var c=i[o],g=t[c],y=e[c];if(y===n&&!(c in e)||!g(y))return!1}return!0}function _l(e,t,i){if(typeof e!="function")throw new wt(d);return Er(function(){e.apply(n,i)},t)}function xr(e,t,i,o){var c=-1,g=qr,y=!0,x=e.length,C=[],M=t.length;if(!x)return C;i&&(t=Oe(t,ft(i))),o?(g=za,y=!1):t.length>=l&&(g=pr,y=!1,t=new En(t));e:for(;++c<x;){var z=e[c],F=i==null?z:i(z);if(z=o||z!==0?z:0,y&&F===F){for(var V=M;V--;)if(t[V]===F)continue e;C.push(z)}else g(t,F,o)||C.push(z)}return C}var dn=Kl(kt),xl=Kl(Za,!0);function dp(e,t){var i=!0;return dn(e,function(o,c,g){return i=!!t(o,c,g),i}),i}function hi(e,t,i){for(var o=-1,c=e.length;++o<c;){var g=e[o],y=t(g);if(y!=null&&(x===n?y===y&&!ht(y):i(y,x)))var x=y,C=g}return C}function hp(e,t,i,o){var c=e.length;for(i=se(i),i<0&&(i=-i>c?0:c+i),o=o===n||o>c?c:se(o),o<0&&(o+=c),o=i>o?0:Fu(o);i<o;)e[i++]=t;return e}function wl(e,t){var i=[];return dn(e,function(o,c,g){t(o,c,g)&&i.push(o)}),i}function Ye(e,t,i,o,c){var g=-1,y=e.length;for(i||(i=tg),c||(c=[]);++g<y;){var x=e[g];t>0&&i(x)?t>1?Ye(x,t-1,i,o,c):un(c,x):o||(c[c.length]=x)}return c}var Ja=Xl(),Sl=Xl(!0);function kt(e,t){return e&&Ja(e,t,Ge)}function Za(e,t){return e&&Sl(e,t,Ge)}function pi(e,t){return ln(t,function(i){return jt(e[i])})}function Pn(e,t){t=pn(t,e);for(var i=0,o=t.length;e!=null&&i<o;)e=e[Ut(t[i++])];return i&&i==o?e:n}function Nl(e,t,i){var o=t(e);return ie(e)?o:un(o,i(e))}function Qe(e){return e==null?e===n?Hf:Bn:Cn&&Cn in _e(e)?qp(e):lg(e)}function Qa(e,t){return e>t}function pp(e,t){return e!=null&&be.call(e,t)}function gp(e,t){return e!=null&&t in _e(e)}function mp(e,t,i){return e>=Xe(t,i)&&e<Ue(t,i)}function ja(e,t,i){for(var o=i?za:qr,c=e[0].length,g=e.length,y=g,x=E(g),C=1/0,M=[];y--;){var z=e[y];y&&t&&(z=Oe(z,ft(t))),C=Xe(z.length,C),x[y]=!i&&(t||c>=120&&z.length>=120)?new En(y&&z):n}z=e[0];var F=-1,V=x[0];e:for(;++F<c&&M.length<C;){var q=z[F],j=t?t(q):q;if(q=i||q!==0?q:0,!(V?pr(V,j):o(M,j,i))){for(y=g;--y;){var oe=x[y];if(!(oe?pr(oe,j):o(e[y],j,i)))continue e}V&&V.push(j),M.push(q)}}return M}function vp(e,t,i,o){return kt(e,function(c,g,y){t(o,i(c),g,y)}),o}function wr(e,t,i){t=pn(t,e),e=fu(e,t);var o=e==null?e:e[Ut(Ot(t))];return o==null?n:ct(o,e,i)}function Cl(e){return Pe(e)&&Qe(e)==W}function yp(e){return Pe(e)&&Qe(e)==hr}function bp(e){return Pe(e)&&Qe(e)==ae}function Sr(e,t,i,o,c){return e===t?!0:e==null||t==null||!Pe(e)&&!Pe(t)?e!==e&&t!==t:_p(e,t,i,o,Sr,c)}function _p(e,t,i,o,c,g){var y=ie(e),x=ie(t),C=y?B:qe(e),M=x?B:qe(t);C=C==W?rt:C,M=M==W?rt:M;var z=C==rt,F=M==rt,V=C==M;if(V&&mn(e)){if(!mn(t))return!1;y=!0,z=!1}if(V&&!z)return g||(g=new Tt),y||tr(e)?iu(e,t,i,o,c,g):Kp(e,t,C,i,o,c,g);if(!(i&A)){var q=z&&be.call(e,"__wrapped__"),j=F&&be.call(t,"__wrapped__");if(q||j){var oe=q?e.value():e,ee=j?t.value():t;return g||(g=new Tt),c(oe,ee,i,o,g)}}return V?(g||(g=new Tt),Xp(e,t,i,o,c,g)):!1}function xp(e){return Pe(e)&&qe(e)==ke}function es(e,t,i,o){var c=i.length,g=c,y=!o;if(e==null)return!g;for(e=_e(e);c--;){var x=i[c];if(y&&x[2]?x[1]!==e[x[0]]:!(x[0]in e))return!1}for(;++c<g;){x=i[c];var C=x[0],M=e[C],z=x[1];if(y&&x[2]){if(M===n&&!(C in e))return!1}else{var F=new Tt;if(o)var V=o(M,z,C,e,t,F);if(!(V===n?Sr(z,M,A|R,o,F):V))return!1}}return!0}function Ol(e){if(!Re(e)||rg(e))return!1;var t=jt(e)?xh:fd;return t.test(Tn(e))}function wp(e){return Pe(e)&&Qe(e)==on}function Sp(e){return Pe(e)&&qe(e)==it}function Np(e){return Pe(e)&&Ti(e.length)&&!!we[Qe(e)]}function El(e){return typeof e=="function"?e:e==null?lt:typeof e=="object"?ie(e)?Dl(e[0],e[1]):Pl(e):qu(e)}function ts(e){if(!Or(e))return Eh(e);var t=[];for(var i in _e(e))be.call(e,i)&&i!="constructor"&&t.push(i);return t}function Cp(e){if(!Re(e))return og(e);var t=Or(e),i=[];for(var o in e)o=="constructor"&&(t||!be.call(e,o))||i.push(o);return i}function ns(e,t){return e<t}function Rl(e,t){var i=-1,o=st(e)?E(e.length):[];return dn(e,function(c,g,y){o[++i]=t(c,g,y)}),o}function Pl(e){var t=vs(e);return t.length==1&&t[0][2]?uu(t[0][0],t[0][1]):function(i){return i===e||es(i,e,t)}}function Dl(e,t){return bs(e)&&lu(t)?uu(Ut(e),t):function(i){var o=Ps(i,e);return o===n&&o===t?Ds(i,e):Sr(t,o,A|R)}}function gi(e,t,i,o,c){e!==t&&Ja(t,function(g,y){if(c||(c=new Tt),Re(g))Op(e,t,y,i,gi,o,c);else{var x=o?o(xs(e,y),g,y+"",e,t,c):n;x===n&&(x=g),Xa(e,y,x)}},ot)}function Op(e,t,i,o,c,g,y){var x=xs(e,i),C=xs(t,i),M=y.get(C);if(M){Xa(e,i,M);return}var z=g?g(x,C,i+"",e,t,y):n,F=z===n;if(F){var V=ie(C),q=!V&&mn(C),j=!V&&!q&&tr(C);z=C,V||q||j?ie(x)?z=x:Te(x)?z=at(x):q?(F=!1,z=Hl(C,!0)):j?(F=!1,z=Gl(C,!0)):z=[]:Rr(C)||In(C)?(z=x,In(x)?z=Uu(x):(!Re(x)||jt(x))&&(z=ou(C))):F=!1}F&&(y.set(C,z),c(z,C,o,g,y),y.delete(C)),Xa(e,i,z)}function Tl(e,t){var i=e.length;if(i)return t+=t<0?i:0,Qt(t,i)?e[t]:n}function Il(e,t,i){t.length?t=Oe(t,function(g){return ie(g)?function(y){return Pn(y,g.length===1?g[0]:g)}:g}):t=[lt];var o=-1;t=Oe(t,ft(Q()));var c=Rl(e,function(g,y,x){var C=Oe(t,function(M){return M(g)});return{criteria:C,index:++o,value:g}});return jd(c,function(g,y){return Up(g,y,i)})}function Ep(e,t){return Al(e,t,function(i,o){return Ds(e,o)})}function Al(e,t,i){for(var o=-1,c=t.length,g={};++o<c;){var y=t[o],x=Pn(e,y);i(x,y)&&Nr(g,pn(y,e),x)}return g}function Rp(e){return function(t){return Pn(t,e)}}function rs(e,t,i,o){var c=o?Qd:$n,g=-1,y=t.length,x=e;for(e===t&&(t=at(t)),i&&(x=Oe(e,ft(i)));++g<y;)for(var C=0,M=t[g],z=i?i(M):M;(C=c(x,z,C,o))>-1;)x!==e&&ai.call(x,C,1),ai.call(e,C,1);return e}function Ml(e,t){for(var i=e?t.length:0,o=i-1;i--;){var c=t[i];if(i==o||c!==g){var g=c;Qt(c)?ai.call(e,c,1):os(e,c)}}return e}function is(e,t){return e+li(pl()*(t-e+1))}function Pp(e,t,i,o){for(var c=-1,g=Ue(oi((t-e)/(i||1)),0),y=E(g);g--;)y[o?g:++c]=e,e+=i;return y}function as(e,t){var i="";if(!e||t<1||t>ut)return i;do t%2&&(i+=e),t=li(t/2),t&&(e+=e);while(t);return i}function le(e,t){return ws(cu(e,t,lt),e+"")}function Dp(e){return vl(nr(e))}function Tp(e,t){var i=nr(e);return Ci(i,Rn(t,0,i.length))}function Nr(e,t,i,o){if(!Re(e))return e;t=pn(t,e);for(var c=-1,g=t.length,y=g-1,x=e;x!=null&&++c<g;){var C=Ut(t[c]),M=i;if(C==="__proto__"||C==="constructor"||C==="prototype")return e;if(c!=y){var z=x[C];M=o?o(z,C,x):n,M===n&&(M=Re(z)?z:Qt(t[c+1])?[]:{})}_r(x,C,M),x=x[C]}return e}var zl=ui?function(e,t){return ui.set(e,t),e}:lt,Ip=si?function(e,t){return si(e,"toString",{configurable:!0,enumerable:!1,value:Is(t),writable:!0})}:lt;function Ap(e){return Ci(nr(e))}function Ct(e,t,i){var o=-1,c=e.length;t<0&&(t=-t>c?0:c+t),i=i>c?c:i,i<0&&(i+=c),c=t>i?0:i-t>>>0,t>>>=0;for(var g=E(c);++o<c;)g[o]=e[o+t];return g}function Mp(e,t){var i;return dn(e,function(o,c,g){return i=t(o,c,g),!i}),!!i}function mi(e,t,i){var o=0,c=e==null?o:e.length;if(typeof t=="number"&&t===t&&c<=k){for(;o<c;){var g=o+c>>>1,y=e[g];y!==null&&!ht(y)&&(i?y<=t:y<t)?o=g+1:c=g}return c}return ss(e,t,lt,i)}function ss(e,t,i,o){var c=0,g=e==null?0:e.length;if(g===0)return 0;t=i(t);for(var y=t!==t,x=t===null,C=ht(t),M=t===n;c<g;){var z=li((c+g)/2),F=i(e[z]),V=F!==n,q=F===null,j=F===F,oe=ht(F);if(y)var ee=o||j;else M?ee=j&&(o||V):x?ee=j&&V&&(o||!q):C?ee=j&&V&&!q&&(o||!oe):q||oe?ee=!1:ee=o?F<=t:F<t;ee?c=z+1:g=z}return Xe(g,O)}function Ll(e,t){for(var i=-1,o=e.length,c=0,g=[];++i<o;){var y=e[i],x=t?t(y):y;if(!i||!It(x,C)){var C=x;g[c++]=y===0?0:y}}return g}function kl(e){return typeof e=="number"?e:ht(e)?He:+e}function dt(e){if(typeof e=="string")return e;if(ie(e))return Oe(e,dt)+"";if(ht(e))return gl?gl.call(e):"";var t=e+"";return t=="0"&&1/e==-ze?"-0":t}function hn(e,t,i){var o=-1,c=qr,g=e.length,y=!0,x=[],C=x;if(i)y=!1,c=za;else if(g>=l){var M=t?null:Vp(e);if(M)return Zr(M);y=!1,c=pr,C=new En}else C=t?[]:x;e:for(;++o<g;){var z=e[o],F=t?t(z):z;if(z=i||z!==0?z:0,y&&F===F){for(var V=C.length;V--;)if(C[V]===F)continue e;t&&C.push(F),x.push(z)}else c(C,F,i)||(C!==x&&C.push(F),x.push(z))}return x}function os(e,t){return t=pn(t,e),e=fu(e,t),e==null||delete e[Ut(Ot(t))]}function Fl(e,t,i,o){return Nr(e,t,i(Pn(e,t)),o)}function vi(e,t,i,o){for(var c=e.length,g=o?c:-1;(o?g--:++g<c)&&t(e[g],g,e););return i?Ct(e,o?0:g,o?g+1:c):Ct(e,o?g+1:0,o?c:g)}function Ul(e,t){var i=e;return i instanceof fe&&(i=i.value()),La(t,function(o,c){return c.func.apply(c.thisArg,un([o],c.args))},i)}function ls(e,t,i){var o=e.length;if(o<2)return o?hn(e[0]):[];for(var c=-1,g=E(o);++c<o;)for(var y=e[c],x=-1;++x<o;)x!=c&&(g[c]=xr(g[c]||y,e[x],t,i));return hn(Ye(g,1),t,i)}function Wl(e,t,i){for(var o=-1,c=e.length,g=t.length,y={};++o<c;){var x=o<g?t[o]:n;i(y,e[o],x)}return y}function us(e){return Te(e)?e:[]}function cs(e){return typeof e=="function"?e:lt}function pn(e,t){return ie(e)?e:bs(e,t)?[e]:gu(ye(e))}var zp=le;function gn(e,t,i){var o=e.length;return i=i===n?o:i,!t&&i>=o?e:Ct(e,t,i)}var Bl=wh||function(e){return Ve.clearTimeout(e)};function Hl(e,t){if(t)return e.slice();var i=e.length,o=ul?ul(i):new e.constructor(i);return e.copy(o),o}function fs(e){var t=new e.constructor(e.byteLength);return new ri(t).set(new ri(e)),t}function Lp(e,t){var i=t?fs(e.buffer):e.buffer;return new e.constructor(i,e.byteOffset,e.byteLength)}function kp(e){var t=new e.constructor(e.source,Co.exec(e));return t.lastIndex=e.lastIndex,t}function Fp(e){return br?_e(br.call(e)):{}}function Gl(e,t){var i=t?fs(e.buffer):e.buffer;return new e.constructor(i,e.byteOffset,e.length)}function $l(e,t){if(e!==t){var i=e!==n,o=e===null,c=e===e,g=ht(e),y=t!==n,x=t===null,C=t===t,M=ht(t);if(!x&&!M&&!g&&e>t||g&&y&&C&&!x&&!M||o&&y&&C||!i&&C||!c)return 1;if(!o&&!g&&!M&&e<t||M&&i&&c&&!o&&!g||x&&i&&c||!y&&c||!C)return-1}return 0}function Up(e,t,i){for(var o=-1,c=e.criteria,g=t.criteria,y=c.length,x=i.length;++o<y;){var C=$l(c[o],g[o]);if(C){if(o>=x)return C;var M=i[o];return C*(M=="desc"?-1:1)}}return e.index-t.index}function Vl(e,t,i,o){for(var c=-1,g=e.length,y=i.length,x=-1,C=t.length,M=Ue(g-y,0),z=E(C+M),F=!o;++x<C;)z[x]=t[x];for(;++c<y;)(F||c<g)&&(z[i[c]]=e[c]);for(;M--;)z[x++]=e[c++];return z}function Yl(e,t,i,o){for(var c=-1,g=e.length,y=-1,x=i.length,C=-1,M=t.length,z=Ue(g-x,0),F=E(z+M),V=!o;++c<z;)F[c]=e[c];for(var q=c;++C<M;)F[q+C]=t[C];for(;++y<x;)(V||c<g)&&(F[q+i[y]]=e[c++]);return F}function at(e,t){var i=-1,o=e.length;for(t||(t=E(o));++i<o;)t[i]=e[i];return t}function Ft(e,t,i,o){var c=!i;i||(i={});for(var g=-1,y=t.length;++g<y;){var x=t[g],C=o?o(i[x],e[x],x,i,e):n;C===n&&(C=e[x]),c?qt(i,x,C):_r(i,x,C)}return i}function Wp(e,t){return Ft(e,ys(e),t)}function Bp(e,t){return Ft(e,au(e),t)}function yi(e,t){return function(i,o){var c=ie(i)?Yd:up,g=t?t():{};return c(i,e,Q(o,2),g)}}function Qn(e){return le(function(t,i){var o=-1,c=i.length,g=c>1?i[c-1]:n,y=c>2?i[2]:n;for(g=e.length>3&&typeof g=="function"?(c--,g):n,y&&je(i[0],i[1],y)&&(g=c<3?n:g,c=1),t=_e(t);++o<c;){var x=i[o];x&&e(t,x,o,g)}return t})}function Kl(e,t){return function(i,o){if(i==null)return i;if(!st(i))return e(i,o);for(var c=i.length,g=t?c:-1,y=_e(i);(t?g--:++g<c)&&o(y[g],g,y)!==!1;);return i}}function Xl(e){return function(t,i,o){for(var c=-1,g=_e(t),y=o(t),x=y.length;x--;){var C=y[e?x:++c];if(i(g[C],C,g)===!1)break}return t}}function Hp(e,t,i){var o=t&I,c=Cr(e);function g(){var y=this&&this!==Ve&&this instanceof g?c:e;return y.apply(o?i:this,arguments)}return g}function ql(e){return function(t){t=ye(t);var i=Vn(t)?Dt(t):n,o=i?i[0]:t.charAt(0),c=i?gn(i,1).join(""):t.slice(1);return o[e]()+c}}function jn(e){return function(t){return La(Ku(Yu(t).replace(Id,"")),e,"")}}function Cr(e){return function(){var t=arguments;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var i=Zn(e.prototype),o=e.apply(i,t);return Re(o)?o:i}}function Gp(e,t,i){var o=Cr(e);function c(){for(var g=arguments.length,y=E(g),x=g,C=er(c);x--;)y[x]=arguments[x];var M=g<3&&y[0]!==C&&y[g-1]!==C?[]:cn(y,C);if(g-=M.length,g<i)return eu(e,t,bi,c.placeholder,n,y,M,n,n,i-g);var z=this&&this!==Ve&&this instanceof c?o:e;return ct(z,this,y)}return c}function Jl(e){return function(t,i,o){var c=_e(t);if(!st(t)){var g=Q(i,3);t=Ge(t),i=function(x){return g(c[x],x,c)}}var y=e(t,i,o);return y>-1?c[g?t[y]:y]:n}}function Zl(e){return Zt(function(t){var i=t.length,o=i,c=St.prototype.thru;for(e&&t.reverse();o--;){var g=t[o];if(typeof g!="function")throw new wt(d);if(c&&!y&&Si(g)=="wrapper")var y=new St([],!0)}for(o=y?o:i;++o<i;){g=t[o];var x=Si(g),C=x=="wrapper"?ms(g):n;C&&_s(C[0])&&C[1]==(ue|U|Z|he)&&!C[4].length&&C[9]==1?y=y[Si(C[0])].apply(y,C[3]):y=g.length==1&&_s(g)?y[x]():y.thru(g)}return function(){var M=arguments,z=M[0];if(y&&M.length==1&&ie(z))return y.plant(z).value();for(var F=0,V=i?t[F].apply(this,M):z;++F<i;)V=t[F].call(this,V);return V}})}function bi(e,t,i,o,c,g,y,x,C,M){var z=t&ue,F=t&I,V=t&L,q=t&(U|Y),j=t&Ce,oe=V?n:Cr(e);function ee(){for(var ce=arguments.length,de=E(ce),pt=ce;pt--;)de[pt]=arguments[pt];if(q)var et=er(ee),gt=th(de,et);if(o&&(de=Vl(de,o,c,q)),g&&(de=Yl(de,g,y,q)),ce-=gt,q&&ce<M){var Ie=cn(de,et);return eu(e,t,bi,ee.placeholder,i,de,Ie,x,C,M-ce)}var At=F?i:this,tn=V?At[e]:e;return ce=de.length,x?de=ug(de,x):j&&ce>1&&de.reverse(),z&&C<ce&&(de.length=C),this&&this!==Ve&&this instanceof ee&&(tn=oe||Cr(tn)),tn.apply(At,de)}return ee}function Ql(e,t){return function(i,o){return vp(i,e,t(o),{})}}function _i(e,t){return function(i,o){var c;if(i===n&&o===n)return t;if(i!==n&&(c=i),o!==n){if(c===n)return o;typeof i=="string"||typeof o=="string"?(i=dt(i),o=dt(o)):(i=kl(i),o=kl(o)),c=e(i,o)}return c}}function ds(e){return Zt(function(t){return t=Oe(t,ft(Q())),le(function(i){var o=this;return e(t,function(c){return ct(c,o,i)})})})}function xi(e,t){t=t===n?" ":dt(t);var i=t.length;if(i<2)return i?as(t,e):t;var o=as(t,oi(e/Yn(t)));return Vn(t)?gn(Dt(o),0,e).join(""):o.slice(0,e)}function $p(e,t,i,o){var c=t&I,g=Cr(e);function y(){for(var x=-1,C=arguments.length,M=-1,z=o.length,F=E(z+C),V=this&&this!==Ve&&this instanceof y?g:e;++M<z;)F[M]=o[M];for(;C--;)F[M++]=arguments[++x];return ct(V,c?i:this,F)}return y}function jl(e){return function(t,i,o){return o&&typeof o!="number"&&je(t,i,o)&&(i=o=n),t=en(t),i===n?(i=t,t=0):i=en(i),o=o===n?t<i?1:-1:en(o),Pp(t,i,o,e)}}function wi(e){return function(t,i){return typeof t=="string"&&typeof i=="string"||(t=Et(t),i=Et(i)),e(t,i)}}function eu(e,t,i,o,c,g,y,x,C,M){var z=t&U,F=z?y:n,V=z?n:y,q=z?g:n,j=z?n:g;t|=z?Z:ne,t&=~(z?ne:Z),t&$||(t&=~(I|L));var oe=[e,t,c,q,F,j,V,x,C,M],ee=i.apply(n,oe);return _s(e)&&du(ee,oe),ee.placeholder=o,hu(ee,e,t)}function hs(e){var t=Fe[e];return function(i,o){if(i=Et(i),o=o==null?0:Xe(se(o),292),o&&hl(i)){var c=(ye(i)+"e").split("e"),g=t(c[0]+"e"+(+c[1]+o));return c=(ye(g)+"e").split("e"),+(c[0]+"e"+(+c[1]-o))}return t(i)}}var Vp=qn&&1/Zr(new qn([,-0]))[1]==ze?function(e){return new qn(e)}:zs;function tu(e){return function(t){var i=qe(t);return i==ke?Ga(t):i==it?lh(t):eh(t,e(t))}}function Jt(e,t,i,o,c,g,y,x){var C=t&L;if(!C&&typeof e!="function")throw new wt(d);var M=o?o.length:0;if(M||(t&=~(Z|ne),o=c=n),y=y===n?y:Ue(se(y),0),x=x===n?x:se(x),M-=c?c.length:0,t&ne){var z=o,F=c;o=c=n}var V=C?n:ms(e),q=[e,t,i,o,c,z,F,g,y,x];if(V&&sg(q,V),e=q[0],t=q[1],i=q[2],o=q[3],c=q[4],x=q[9]=q[9]===n?C?0:e.length:Ue(q[9]-M,0),!x&&t&(U|Y)&&(t&=~(U|Y)),!t||t==I)var j=Hp(e,t,i);else t==U||t==Y?j=Gp(e,t,x):(t==Z||t==(I|Z))&&!c.length?j=$p(e,t,i,o):j=bi.apply(n,q);var oe=V?zl:du;return hu(oe(j,q),e,t)}function nu(e,t,i,o){return e===n||It(e,Xn[i])&&!be.call(o,i)?t:e}function ru(e,t,i,o,c,g){return Re(e)&&Re(t)&&(g.set(t,e),gi(e,t,n,ru,g),g.delete(t)),e}function Yp(e){return Rr(e)?n:e}function iu(e,t,i,o,c,g){var y=i&A,x=e.length,C=t.length;if(x!=C&&!(y&&C>x))return!1;var M=g.get(e),z=g.get(t);if(M&&z)return M==t&&z==e;var F=-1,V=!0,q=i&R?new En:n;for(g.set(e,t),g.set(t,e);++F<x;){var j=e[F],oe=t[F];if(o)var ee=y?o(oe,j,F,t,e,g):o(j,oe,F,e,t,g);if(ee!==n){if(ee)continue;V=!1;break}if(q){if(!ka(t,function(ce,de){if(!pr(q,de)&&(j===ce||c(j,ce,i,o,g)))return q.push(de)})){V=!1;break}}else if(!(j===oe||c(j,oe,i,o,g))){V=!1;break}}return g.delete(e),g.delete(t),V}function Kp(e,t,i,o,c,g,y){switch(i){case Hn:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case hr:return!(e.byteLength!=t.byteLength||!g(new ri(e),new ri(t)));case J:case ae:case Yt:return It(+e,+t);case Lt:return e.name==t.name&&e.message==t.message;case on:case Sn:return e==t+"";case ke:var x=Ga;case it:var C=o&A;if(x||(x=Zr),e.size!=t.size&&!C)return!1;var M=y.get(e);if(M)return M==t;o|=R,y.set(e,t);var z=iu(x(e),x(t),o,c,g,y);return y.delete(e),z;case Vr:if(br)return br.call(e)==br.call(t)}return!1}function Xp(e,t,i,o,c,g){var y=i&A,x=ps(e),C=x.length,M=ps(t),z=M.length;if(C!=z&&!y)return!1;for(var F=C;F--;){var V=x[F];if(!(y?V in t:be.call(t,V)))return!1}var q=g.get(e),j=g.get(t);if(q&&j)return q==t&&j==e;var oe=!0;g.set(e,t),g.set(t,e);for(var ee=y;++F<C;){V=x[F];var ce=e[V],de=t[V];if(o)var pt=y?o(de,ce,V,t,e,g):o(ce,de,V,e,t,g);if(!(pt===n?ce===de||c(ce,de,i,o,g):pt)){oe=!1;break}ee||(ee=V=="constructor")}if(oe&&!ee){var et=e.constructor,gt=t.constructor;et!=gt&&"constructor"in e&&"constructor"in t&&!(typeof et=="function"&&et instanceof et&&typeof gt=="function"&&gt instanceof gt)&&(oe=!1)}return g.delete(e),g.delete(t),oe}function Zt(e){return ws(cu(e,n,bu),e+"")}function ps(e){return Nl(e,Ge,ys)}function gs(e){return Nl(e,ot,au)}var ms=ui?function(e){return ui.get(e)}:zs;function Si(e){for(var t=e.name+"",i=Jn[t],o=be.call(Jn,t)?i.length:0;o--;){var c=i[o],g=c.func;if(g==null||g==e)return c.name}return t}function er(e){var t=be.call(h,"placeholder")?h:e;return t.placeholder}function Q(){var e=h.iteratee||As;return e=e===As?El:e,arguments.length?e(arguments[0],arguments[1]):e}function Ni(e,t){var i=e.__data__;return ng(t)?i[typeof t=="string"?"string":"hash"]:i.map}function vs(e){for(var t=Ge(e),i=t.length;i--;){var o=t[i],c=e[o];t[i]=[o,c,lu(c)]}return t}function Dn(e,t){var i=ah(e,t);return Ol(i)?i:n}function qp(e){var t=be.call(e,Cn),i=e[Cn];try{e[Cn]=n;var o=!0}catch{}var c=ti.call(e);return o&&(t?e[Cn]=i:delete e[Cn]),c}var ys=Va?function(e){return e==null?[]:(e=_e(e),ln(Va(e),function(t){return fl.call(e,t)}))}:Ls,au=Va?function(e){for(var t=[];e;)un(t,ys(e)),e=ii(e);return t}:Ls,qe=Qe;(Ya&&qe(new Ya(new ArrayBuffer(1)))!=Hn||mr&&qe(new mr)!=ke||Ka&&qe(Ka.resolve())!=Gr||qn&&qe(new qn)!=it||vr&&qe(new vr)!=dr)&&(qe=function(e){var t=Qe(e),i=t==rt?e.constructor:n,o=i?Tn(i):"";if(o)switch(o){case Th:return Hn;case Ih:return ke;case Ah:return Gr;case Mh:return it;case zh:return dr}return t});function Jp(e,t,i){for(var o=-1,c=i.length;++o<c;){var g=i[o],y=g.size;switch(g.type){case"drop":e+=y;break;case"dropRight":t-=y;break;case"take":t=Xe(t,e+y);break;case"takeRight":e=Ue(e,t-y);break}}return{start:e,end:t}}function Zp(e){var t=e.match(rd);return t?t[1].split(id):[]}function su(e,t,i){t=pn(t,e);for(var o=-1,c=t.length,g=!1;++o<c;){var y=Ut(t[o]);if(!(g=e!=null&&i(e,y)))break;e=e[y]}return g||++o!=c?g:(c=e==null?0:e.length,!!c&&Ti(c)&&Qt(y,c)&&(ie(e)||In(e)))}function Qp(e){var t=e.length,i=new e.constructor(t);return t&&typeof e[0]=="string"&&be.call(e,"index")&&(i.index=e.index,i.input=e.input),i}function ou(e){return typeof e.constructor=="function"&&!Or(e)?Zn(ii(e)):{}}function jp(e,t,i){var o=e.constructor;switch(t){case hr:return fs(e);case J:case ae:return new o(+e);case Hn:return Lp(e,i);case va:case ya:case ba:case _a:case xa:case wa:case Sa:case Na:case Ca:return Gl(e,i);case ke:return new o;case Yt:case Sn:return new o(e);case on:return kp(e);case it:return new o;case Vr:return Fp(e)}}function eg(e,t){var i=t.length;if(!i)return e;var o=i-1;return t[o]=(i>1?"& ":"")+t[o],t=t.join(i>2?", ":" "),e.replace(nd,`{
/* [wrapped with `+t+`] */
`)}function tg(e){return ie(e)||In(e)||!!(dl&&e&&e[dl])}function Qt(e,t){var i=typeof e;return t=t??ut,!!t&&(i=="number"||i!="symbol"&&hd.test(e))&&e>-1&&e%1==0&&e<t}function je(e,t,i){if(!Re(i))return!1;var o=typeof t;return(o=="number"?st(i)&&Qt(t,i.length):o=="string"&&t in i)?It(i[t],e):!1}function bs(e,t){if(ie(e))return!1;var i=typeof e;return i=="number"||i=="symbol"||i=="boolean"||e==null||ht(e)?!0:Qf.test(e)||!Zf.test(e)||t!=null&&e in _e(t)}function ng(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}function _s(e){var t=Si(e),i=h[t];if(typeof i!="function"||!(t in fe.prototype))return!1;if(e===i)return!0;var o=ms(i);return!!o&&e===o[0]}function rg(e){return!!ll&&ll in e}var ig=jr?jt:ks;function Or(e){var t=e&&e.constructor,i=typeof t=="function"&&t.prototype||Xn;return e===i}function lu(e){return e===e&&!Re(e)}function uu(e,t){return function(i){return i==null?!1:i[e]===t&&(t!==n||e in _e(i))}}function ag(e){var t=Pi(e,function(o){return i.size===v&&i.clear(),o}),i=t.cache;return t}function sg(e,t){var i=e[1],o=t[1],c=i|o,g=c<(I|L|ue),y=o==ue&&i==U||o==ue&&i==he&&e[7].length<=t[8]||o==(ue|he)&&t[7].length<=t[8]&&i==U;if(!(g||y))return e;o&I&&(e[2]=t[2],c|=i&I?0:$);var x=t[3];if(x){var C=e[3];e[3]=C?Vl(C,x,t[4]):x,e[4]=C?cn(e[3],_):t[4]}return x=t[5],x&&(C=e[5],e[5]=C?Yl(C,x,t[6]):x,e[6]=C?cn(e[5],_):t[6]),x=t[7],x&&(e[7]=x),o&ue&&(e[8]=e[8]==null?t[8]:Xe(e[8],t[8])),e[9]==null&&(e[9]=t[9]),e[0]=t[0],e[1]=c,e}function og(e){var t=[];if(e!=null)for(var i in _e(e))t.push(i);return t}function lg(e){return ti.call(e)}function cu(e,t,i){return t=Ue(t===n?e.length-1:t,0),function(){for(var o=arguments,c=-1,g=Ue(o.length-t,0),y=E(g);++c<g;)y[c]=o[t+c];c=-1;for(var x=E(t+1);++c<t;)x[c]=o[c];return x[t]=i(y),ct(e,this,x)}}function fu(e,t){return t.length<2?e:Pn(e,Ct(t,0,-1))}function ug(e,t){for(var i=e.length,o=Xe(t.length,i),c=at(e);o--;){var g=t[o];e[o]=Qt(g,i)?c[g]:n}return e}function xs(e,t){if(!(t==="constructor"&&typeof e[t]=="function")&&t!="__proto__")return e[t]}var du=pu(zl),Er=Nh||function(e,t){return Ve.setTimeout(e,t)},ws=pu(Ip);function hu(e,t,i){var o=t+"";return ws(e,eg(o,cg(Zp(o),i)))}function pu(e){var t=0,i=0;return function(){var o=Rh(),c=Me-(o-i);if(i=o,c>0){if(++t>=me)return arguments[0]}else t=0;return e.apply(n,arguments)}}function Ci(e,t){var i=-1,o=e.length,c=o-1;for(t=t===n?o:t;++i<t;){var g=is(i,c),y=e[g];e[g]=e[i],e[i]=y}return e.length=t,e}var gu=ag(function(e){var t=[];return e.charCodeAt(0)===46&&t.push(""),e.replace(jf,function(i,o,c,g){t.push(c?g.replace(od,"$1"):o||i)}),t});function Ut(e){if(typeof e=="string"||ht(e))return e;var t=e+"";return t=="0"&&1/e==-ze?"-0":t}function Tn(e){if(e!=null){try{return ei.call(e)}catch{}try{return e+""}catch{}}return""}function cg(e,t){return xt(H,function(i){var o="_."+i[0];t&i[1]&&!qr(e,o)&&e.push(o)}),e.sort()}function mu(e){if(e instanceof fe)return e.clone();var t=new St(e.__wrapped__,e.__chain__);return t.__actions__=at(e.__actions__),t.__index__=e.__index__,t.__values__=e.__values__,t}function fg(e,t,i){(i?je(e,t,i):t===n)?t=1:t=Ue(se(t),0);var o=e==null?0:e.length;if(!o||t<1)return[];for(var c=0,g=0,y=E(oi(o/t));c<o;)y[g++]=Ct(e,c,c+=t);return y}function dg(e){for(var t=-1,i=e==null?0:e.length,o=0,c=[];++t<i;){var g=e[t];g&&(c[o++]=g)}return c}function hg(){var e=arguments.length;if(!e)return[];for(var t=E(e-1),i=arguments[0],o=e;o--;)t[o-1]=arguments[o];return un(ie(i)?at(i):[i],Ye(t,1))}var pg=le(function(e,t){return Te(e)?xr(e,Ye(t,1,Te,!0)):[]}),gg=le(function(e,t){var i=Ot(t);return Te(i)&&(i=n),Te(e)?xr(e,Ye(t,1,Te,!0),Q(i,2)):[]}),mg=le(function(e,t){var i=Ot(t);return Te(i)&&(i=n),Te(e)?xr(e,Ye(t,1,Te,!0),n,i):[]});function vg(e,t,i){var o=e==null?0:e.length;return o?(t=i||t===n?1:se(t),Ct(e,t<0?0:t,o)):[]}function yg(e,t,i){var o=e==null?0:e.length;return o?(t=i||t===n?1:se(t),t=o-t,Ct(e,0,t<0?0:t)):[]}function bg(e,t){return e&&e.length?vi(e,Q(t,3),!0,!0):[]}function _g(e,t){return e&&e.length?vi(e,Q(t,3),!0):[]}function xg(e,t,i,o){var c=e==null?0:e.length;return c?(i&&typeof i!="number"&&je(e,t,i)&&(i=0,o=c),hp(e,t,i,o)):[]}function vu(e,t,i){var o=e==null?0:e.length;if(!o)return-1;var c=i==null?0:se(i);return c<0&&(c=Ue(o+c,0)),Jr(e,Q(t,3),c)}function yu(e,t,i){var o=e==null?0:e.length;if(!o)return-1;var c=o-1;return i!==n&&(c=se(i),c=i<0?Ue(o+c,0):Xe(c,o-1)),Jr(e,Q(t,3),c,!0)}function bu(e){var t=e==null?0:e.length;return t?Ye(e,1):[]}function wg(e){var t=e==null?0:e.length;return t?Ye(e,ze):[]}function Sg(e,t){var i=e==null?0:e.length;return i?(t=t===n?1:se(t),Ye(e,t)):[]}function Ng(e){for(var t=-1,i=e==null?0:e.length,o={};++t<i;){var c=e[t];o[c[0]]=c[1]}return o}function _u(e){return e&&e.length?e[0]:n}function Cg(e,t,i){var o=e==null?0:e.length;if(!o)return-1;var c=i==null?0:se(i);return c<0&&(c=Ue(o+c,0)),$n(e,t,c)}function Og(e){var t=e==null?0:e.length;return t?Ct(e,0,-1):[]}var Eg=le(function(e){var t=Oe(e,us);return t.length&&t[0]===e[0]?ja(t):[]}),Rg=le(function(e){var t=Ot(e),i=Oe(e,us);return t===Ot(i)?t=n:i.pop(),i.length&&i[0]===e[0]?ja(i,Q(t,2)):[]}),Pg=le(function(e){var t=Ot(e),i=Oe(e,us);return t=typeof t=="function"?t:n,t&&i.pop(),i.length&&i[0]===e[0]?ja(i,n,t):[]});function Dg(e,t){return e==null?"":Oh.call(e,t)}function Ot(e){var t=e==null?0:e.length;return t?e[t-1]:n}function Tg(e,t,i){var o=e==null?0:e.length;if(!o)return-1;var c=o;return i!==n&&(c=se(i),c=c<0?Ue(o+c,0):Xe(c,o-1)),t===t?ch(e,t,c):Jr(e,el,c,!0)}function Ig(e,t){return e&&e.length?Tl(e,se(t)):n}var Ag=le(xu);function xu(e,t){return e&&e.length&&t&&t.length?rs(e,t):e}function Mg(e,t,i){return e&&e.length&&t&&t.length?rs(e,t,Q(i,2)):e}function zg(e,t,i){return e&&e.length&&t&&t.length?rs(e,t,n,i):e}var Lg=Zt(function(e,t){var i=e==null?0:e.length,o=qa(e,t);return Ml(e,Oe(t,function(c){return Qt(c,i)?+c:c}).sort($l)),o});function kg(e,t){var i=[];if(!(e&&e.length))return i;var o=-1,c=[],g=e.length;for(t=Q(t,3);++o<g;){var y=e[o];t(y,o,e)&&(i.push(y),c.push(o))}return Ml(e,c),i}function Ss(e){return e==null?e:Dh.call(e)}function Fg(e,t,i){var o=e==null?0:e.length;return o?(i&&typeof i!="number"&&je(e,t,i)?(t=0,i=o):(t=t==null?0:se(t),i=i===n?o:se(i)),Ct(e,t,i)):[]}function Ug(e,t){return mi(e,t)}function Wg(e,t,i){return ss(e,t,Q(i,2))}function Bg(e,t){var i=e==null?0:e.length;if(i){var o=mi(e,t);if(o<i&&It(e[o],t))return o}return-1}function Hg(e,t){return mi(e,t,!0)}function Gg(e,t,i){return ss(e,t,Q(i,2),!0)}function $g(e,t){var i=e==null?0:e.length;if(i){var o=mi(e,t,!0)-1;if(It(e[o],t))return o}return-1}function Vg(e){return e&&e.length?Ll(e):[]}function Yg(e,t){return e&&e.length?Ll(e,Q(t,2)):[]}function Kg(e){var t=e==null?0:e.length;return t?Ct(e,1,t):[]}function Xg(e,t,i){return e&&e.length?(t=i||t===n?1:se(t),Ct(e,0,t<0?0:t)):[]}function qg(e,t,i){var o=e==null?0:e.length;return o?(t=i||t===n?1:se(t),t=o-t,Ct(e,t<0?0:t,o)):[]}function Jg(e,t){return e&&e.length?vi(e,Q(t,3),!1,!0):[]}function Zg(e,t){return e&&e.length?vi(e,Q(t,3)):[]}var Qg=le(function(e){return hn(Ye(e,1,Te,!0))}),jg=le(function(e){var t=Ot(e);return Te(t)&&(t=n),hn(Ye(e,1,Te,!0),Q(t,2))}),em=le(function(e){var t=Ot(e);return t=typeof t=="function"?t:n,hn(Ye(e,1,Te,!0),n,t)});function tm(e){return e&&e.length?hn(e):[]}function nm(e,t){return e&&e.length?hn(e,Q(t,2)):[]}function rm(e,t){return t=typeof t=="function"?t:n,e&&e.length?hn(e,n,t):[]}function Ns(e){if(!(e&&e.length))return[];var t=0;return e=ln(e,function(i){if(Te(i))return t=Ue(i.length,t),!0}),Ba(t,function(i){return Oe(e,Fa(i))})}function wu(e,t){if(!(e&&e.length))return[];var i=Ns(e);return t==null?i:Oe(i,function(o){return ct(t,n,o)})}var im=le(function(e,t){return Te(e)?xr(e,t):[]}),am=le(function(e){return ls(ln(e,Te))}),sm=le(function(e){var t=Ot(e);return Te(t)&&(t=n),ls(ln(e,Te),Q(t,2))}),om=le(function(e){var t=Ot(e);return t=typeof t=="function"?t:n,ls(ln(e,Te),n,t)}),lm=le(Ns);function um(e,t){return Wl(e||[],t||[],_r)}function cm(e,t){return Wl(e||[],t||[],Nr)}var fm=le(function(e){var t=e.length,i=t>1?e[t-1]:n;return i=typeof i=="function"?(e.pop(),i):n,wu(e,i)});function Su(e){var t=h(e);return t.__chain__=!0,t}function dm(e,t){return t(e),e}function Oi(e,t){return t(e)}var hm=Zt(function(e){var t=e.length,i=t?e[0]:0,o=this.__wrapped__,c=function(g){return qa(g,e)};return t>1||this.__actions__.length||!(o instanceof fe)||!Qt(i)?this.thru(c):(o=o.slice(i,+i+(t?1:0)),o.__actions__.push({func:Oi,args:[c],thisArg:n}),new St(o,this.__chain__).thru(function(g){return t&&!g.length&&g.push(n),g}))});function pm(){return Su(this)}function gm(){return new St(this.value(),this.__chain__)}function mm(){this.__values__===n&&(this.__values__=ku(this.value()));var e=this.__index__>=this.__values__.length,t=e?n:this.__values__[this.__index__++];return{done:e,value:t}}function vm(){return this}function ym(e){for(var t,i=this;i instanceof fi;){var o=mu(i);o.__index__=0,o.__values__=n,t?c.__wrapped__=o:t=o;var c=o;i=i.__wrapped__}return c.__wrapped__=e,t}function bm(){var e=this.__wrapped__;if(e instanceof fe){var t=e;return this.__actions__.length&&(t=new fe(this)),t=t.reverse(),t.__actions__.push({func:Oi,args:[Ss],thisArg:n}),new St(t,this.__chain__)}return this.thru(Ss)}function _m(){return Ul(this.__wrapped__,this.__actions__)}var xm=yi(function(e,t,i){be.call(e,i)?++e[i]:qt(e,i,1)});function wm(e,t,i){var o=ie(e)?Qo:dp;return i&&je(e,t,i)&&(t=n),o(e,Q(t,3))}function Sm(e,t){var i=ie(e)?ln:wl;return i(e,Q(t,3))}var Nm=Jl(vu),Cm=Jl(yu);function Om(e,t){return Ye(Ei(e,t),1)}function Em(e,t){return Ye(Ei(e,t),ze)}function Rm(e,t,i){return i=i===n?1:se(i),Ye(Ei(e,t),i)}function Nu(e,t){var i=ie(e)?xt:dn;return i(e,Q(t,3))}function Cu(e,t){var i=ie(e)?Kd:xl;return i(e,Q(t,3))}var Pm=yi(function(e,t,i){be.call(e,i)?e[i].push(t):qt(e,i,[t])});function Dm(e,t,i,o){e=st(e)?e:nr(e),i=i&&!o?se(i):0;var c=e.length;return i<0&&(i=Ue(c+i,0)),Ii(e)?i<=c&&e.indexOf(t,i)>-1:!!c&&$n(e,t,i)>-1}var Tm=le(function(e,t,i){var o=-1,c=typeof t=="function",g=st(e)?E(e.length):[];return dn(e,function(y){g[++o]=c?ct(t,y,i):wr(y,t,i)}),g}),Im=yi(function(e,t,i){qt(e,i,t)});function Ei(e,t){var i=ie(e)?Oe:Rl;return i(e,Q(t,3))}function Am(e,t,i,o){return e==null?[]:(ie(t)||(t=t==null?[]:[t]),i=o?n:i,ie(i)||(i=i==null?[]:[i]),Il(e,t,i))}var Mm=yi(function(e,t,i){e[i?0:1].push(t)},function(){return[[],[]]});function zm(e,t,i){var o=ie(e)?La:nl,c=arguments.length<3;return o(e,Q(t,4),i,c,dn)}function Lm(e,t,i){var o=ie(e)?Xd:nl,c=arguments.length<3;return o(e,Q(t,4),i,c,xl)}function km(e,t){var i=ie(e)?ln:wl;return i(e,Di(Q(t,3)))}function Fm(e){var t=ie(e)?vl:Dp;return t(e)}function Um(e,t,i){(i?je(e,t,i):t===n)?t=1:t=se(t);var o=ie(e)?op:Tp;return o(e,t)}function Wm(e){var t=ie(e)?lp:Ap;return t(e)}function Bm(e){if(e==null)return 0;if(st(e))return Ii(e)?Yn(e):e.length;var t=qe(e);return t==ke||t==it?e.size:ts(e).length}function Hm(e,t,i){var o=ie(e)?ka:Mp;return i&&je(e,t,i)&&(t=n),o(e,Q(t,3))}var Gm=le(function(e,t){if(e==null)return[];var i=t.length;return i>1&&je(e,t[0],t[1])?t=[]:i>2&&je(t[0],t[1],t[2])&&(t=[t[0]]),Il(e,Ye(t,1),[])}),Ri=Sh||function(){return Ve.Date.now()};function $m(e,t){if(typeof t!="function")throw new wt(d);return e=se(e),function(){if(--e<1)return t.apply(this,arguments)}}function Ou(e,t,i){return t=i?n:t,t=e&&t==null?e.length:t,Jt(e,ue,n,n,n,n,t)}function Eu(e,t){var i;if(typeof t!="function")throw new wt(d);return e=se(e),function(){return--e>0&&(i=t.apply(this,arguments)),e<=1&&(t=n),i}}var Cs=le(function(e,t,i){var o=I;if(i.length){var c=cn(i,er(Cs));o|=Z}return Jt(e,o,t,i,c)}),Ru=le(function(e,t,i){var o=I|L;if(i.length){var c=cn(i,er(Ru));o|=Z}return Jt(t,o,e,i,c)});function Pu(e,t,i){t=i?n:t;var o=Jt(e,U,n,n,n,n,n,t);return o.placeholder=Pu.placeholder,o}function Du(e,t,i){t=i?n:t;var o=Jt(e,Y,n,n,n,n,n,t);return o.placeholder=Du.placeholder,o}function Tu(e,t,i){var o,c,g,y,x,C,M=0,z=!1,F=!1,V=!0;if(typeof e!="function")throw new wt(d);t=Et(t)||0,Re(i)&&(z=!!i.leading,F="maxWait"in i,g=F?Ue(Et(i.maxWait)||0,t):g,V="trailing"in i?!!i.trailing:V);function q(Ie){var At=o,tn=c;return o=c=n,M=Ie,y=e.apply(tn,At),y}function j(Ie){return M=Ie,x=Er(ce,t),z?q(Ie):y}function oe(Ie){var At=Ie-C,tn=Ie-M,Ju=t-At;return F?Xe(Ju,g-tn):Ju}function ee(Ie){var At=Ie-C,tn=Ie-M;return C===n||At>=t||At<0||F&&tn>=g}function ce(){var Ie=Ri();if(ee(Ie))return de(Ie);x=Er(ce,oe(Ie))}function de(Ie){return x=n,V&&o?q(Ie):(o=c=n,y)}function pt(){x!==n&&Bl(x),M=0,o=C=c=x=n}function et(){return x===n?y:de(Ri())}function gt(){var Ie=Ri(),At=ee(Ie);if(o=arguments,c=this,C=Ie,At){if(x===n)return j(C);if(F)return Bl(x),x=Er(ce,t),q(C)}return x===n&&(x=Er(ce,t)),y}return gt.cancel=pt,gt.flush=et,gt}var Vm=le(function(e,t){return _l(e,1,t)}),Ym=le(function(e,t,i){return _l(e,Et(t)||0,i)});function Km(e){return Jt(e,Ce)}function Pi(e,t){if(typeof e!="function"||t!=null&&typeof t!="function")throw new wt(d);var i=function(){var o=arguments,c=t?t.apply(this,o):o[0],g=i.cache;if(g.has(c))return g.get(c);var y=e.apply(this,o);return i.cache=g.set(c,y)||g,y};return i.cache=new(Pi.Cache||Xt),i}Pi.Cache=Xt;function Di(e){if(typeof e!="function")throw new wt(d);return function(){var t=arguments;switch(t.length){case 0:return!e.call(this);case 1:return!e.call(this,t[0]);case 2:return!e.call(this,t[0],t[1]);case 3:return!e.call(this,t[0],t[1],t[2])}return!e.apply(this,t)}}function Xm(e){return Eu(2,e)}var qm=zp(function(e,t){t=t.length==1&&ie(t[0])?Oe(t[0],ft(Q())):Oe(Ye(t,1),ft(Q()));var i=t.length;return le(function(o){for(var c=-1,g=Xe(o.length,i);++c<g;)o[c]=t[c].call(this,o[c]);return ct(e,this,o)})}),Os=le(function(e,t){var i=cn(t,er(Os));return Jt(e,Z,n,t,i)}),Iu=le(function(e,t){var i=cn(t,er(Iu));return Jt(e,ne,n,t,i)}),Jm=Zt(function(e,t){return Jt(e,he,n,n,n,t)});function Zm(e,t){if(typeof e!="function")throw new wt(d);return t=t===n?t:se(t),le(e,t)}function Qm(e,t){if(typeof e!="function")throw new wt(d);return t=t==null?0:Ue(se(t),0),le(function(i){var o=i[t],c=gn(i,0,t);return o&&un(c,o),ct(e,this,c)})}function jm(e,t,i){var o=!0,c=!0;if(typeof e!="function")throw new wt(d);return Re(i)&&(o="leading"in i?!!i.leading:o,c="trailing"in i?!!i.trailing:c),Tu(e,t,{leading:o,maxWait:t,trailing:c})}function ev(e){return Ou(e,1)}function tv(e,t){return Os(cs(t),e)}function nv(){if(!arguments.length)return[];var e=arguments[0];return ie(e)?e:[e]}function rv(e){return Nt(e,S)}function iv(e,t){return t=typeof t=="function"?t:n,Nt(e,S,t)}function av(e){return Nt(e,b|S)}function sv(e,t){return t=typeof t=="function"?t:n,Nt(e,b|S,t)}function ov(e,t){return t==null||bl(e,t,Ge(t))}function It(e,t){return e===t||e!==e&&t!==t}var lv=wi(Qa),uv=wi(function(e,t){return e>=t}),In=Cl(function(){return arguments}())?Cl:function(e){return Pe(e)&&be.call(e,"callee")&&!fl.call(e,"callee")},ie=E.isArray,cv=Yo?ft(Yo):yp;function st(e){return e!=null&&Ti(e.length)&&!jt(e)}function Te(e){return Pe(e)&&st(e)}function fv(e){return e===!0||e===!1||Pe(e)&&Qe(e)==J}var mn=Ch||ks,dv=Ko?ft(Ko):bp;function hv(e){return Pe(e)&&e.nodeType===1&&!Rr(e)}function pv(e){if(e==null)return!0;if(st(e)&&(ie(e)||typeof e=="string"||typeof e.splice=="function"||mn(e)||tr(e)||In(e)))return!e.length;var t=qe(e);if(t==ke||t==it)return!e.size;if(Or(e))return!ts(e).length;for(var i in e)if(be.call(e,i))return!1;return!0}function gv(e,t){return Sr(e,t)}function mv(e,t,i){i=typeof i=="function"?i:n;var o=i?i(e,t):n;return o===n?Sr(e,t,n,i):!!o}function Es(e){if(!Pe(e))return!1;var t=Qe(e);return t==Lt||t==pe||typeof e.message=="string"&&typeof e.name=="string"&&!Rr(e)}function vv(e){return typeof e=="number"&&hl(e)}function jt(e){if(!Re(e))return!1;var t=Qe(e);return t==Pt||t==Vt||t==X||t==$r}function Au(e){return typeof e=="number"&&e==se(e)}function Ti(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=ut}function Re(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}function Pe(e){return e!=null&&typeof e=="object"}var Mu=Xo?ft(Xo):xp;function yv(e,t){return e===t||es(e,t,vs(t))}function bv(e,t,i){return i=typeof i=="function"?i:n,es(e,t,vs(t),i)}function _v(e){return zu(e)&&e!=+e}function xv(e){if(ig(e))throw new re(f);return Ol(e)}function wv(e){return e===null}function Sv(e){return e==null}function zu(e){return typeof e=="number"||Pe(e)&&Qe(e)==Yt}function Rr(e){if(!Pe(e)||Qe(e)!=rt)return!1;var t=ii(e);if(t===null)return!0;var i=be.call(t,"constructor")&&t.constructor;return typeof i=="function"&&i instanceof i&&ei.call(i)==bh}var Rs=qo?ft(qo):wp;function Nv(e){return Au(e)&&e>=-ut&&e<=ut}var Lu=Jo?ft(Jo):Sp;function Ii(e){return typeof e=="string"||!ie(e)&&Pe(e)&&Qe(e)==Sn}function ht(e){return typeof e=="symbol"||Pe(e)&&Qe(e)==Vr}var tr=Zo?ft(Zo):Np;function Cv(e){return e===n}function Ov(e){return Pe(e)&&qe(e)==dr}function Ev(e){return Pe(e)&&Qe(e)==Gf}var Rv=wi(ns),Pv=wi(function(e,t){return e<=t});function ku(e){if(!e)return[];if(st(e))return Ii(e)?Dt(e):at(e);if(gr&&e[gr])return oh(e[gr]());var t=qe(e),i=t==ke?Ga:t==it?Zr:nr;return i(e)}function en(e){if(!e)return e===0?e:0;if(e=Et(e),e===ze||e===-ze){var t=e<0?-1:1;return t*$t}return e===e?e:0}function se(e){var t=en(e),i=t%1;return t===t?i?t-i:t:0}function Fu(e){return e?Rn(se(e),0,G):0}function Et(e){if(typeof e=="number")return e;if(ht(e))return He;if(Re(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=Re(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=rl(e);var i=cd.test(e);return i||dd.test(e)?$d(e.slice(2),i?2:8):ud.test(e)?He:+e}function Uu(e){return Ft(e,ot(e))}function Dv(e){return e?Rn(se(e),-ut,ut):e===0?e:0}function ye(e){return e==null?"":dt(e)}var Tv=Qn(function(e,t){if(Or(t)||st(t)){Ft(t,Ge(t),e);return}for(var i in t)be.call(t,i)&&_r(e,i,t[i])}),Wu=Qn(function(e,t){Ft(t,ot(t),e)}),Ai=Qn(function(e,t,i,o){Ft(t,ot(t),e,o)}),Iv=Qn(function(e,t,i,o){Ft(t,Ge(t),e,o)}),Av=Zt(qa);function Mv(e,t){var i=Zn(e);return t==null?i:yl(i,t)}var zv=le(function(e,t){e=_e(e);var i=-1,o=t.length,c=o>2?t[2]:n;for(c&&je(t[0],t[1],c)&&(o=1);++i<o;)for(var g=t[i],y=ot(g),x=-1,C=y.length;++x<C;){var M=y[x],z=e[M];(z===n||It(z,Xn[M])&&!be.call(e,M))&&(e[M]=g[M])}return e}),Lv=le(function(e){return e.push(n,ru),ct(Bu,n,e)});function kv(e,t){return jo(e,Q(t,3),kt)}function Fv(e,t){return jo(e,Q(t,3),Za)}function Uv(e,t){return e==null?e:Ja(e,Q(t,3),ot)}function Wv(e,t){return e==null?e:Sl(e,Q(t,3),ot)}function Bv(e,t){return e&&kt(e,Q(t,3))}function Hv(e,t){return e&&Za(e,Q(t,3))}function Gv(e){return e==null?[]:pi(e,Ge(e))}function $v(e){return e==null?[]:pi(e,ot(e))}function Ps(e,t,i){var o=e==null?n:Pn(e,t);return o===n?i:o}function Vv(e,t){return e!=null&&su(e,t,pp)}function Ds(e,t){return e!=null&&su(e,t,gp)}var Yv=Ql(function(e,t,i){t!=null&&typeof t.toString!="function"&&(t=ti.call(t)),e[t]=i},Is(lt)),Kv=Ql(function(e,t,i){t!=null&&typeof t.toString!="function"&&(t=ti.call(t)),be.call(e,t)?e[t].push(i):e[t]=[i]},Q),Xv=le(wr);function Ge(e){return st(e)?ml(e):ts(e)}function ot(e){return st(e)?ml(e,!0):Cp(e)}function qv(e,t){var i={};return t=Q(t,3),kt(e,function(o,c,g){qt(i,t(o,c,g),o)}),i}function Jv(e,t){var i={};return t=Q(t,3),kt(e,function(o,c,g){qt(i,c,t(o,c,g))}),i}var Zv=Qn(function(e,t,i){gi(e,t,i)}),Bu=Qn(function(e,t,i,o){gi(e,t,i,o)}),Qv=Zt(function(e,t){var i={};if(e==null)return i;var o=!1;t=Oe(t,function(g){return g=pn(g,e),o||(o=g.length>1),g}),Ft(e,gs(e),i),o&&(i=Nt(i,b|w|S,Yp));for(var c=t.length;c--;)os(i,t[c]);return i});function jv(e,t){return Hu(e,Di(Q(t)))}var e0=Zt(function(e,t){return e==null?{}:Ep(e,t)});function Hu(e,t){if(e==null)return{};var i=Oe(gs(e),function(o){return[o]});return t=Q(t),Al(e,i,function(o,c){return t(o,c[0])})}function t0(e,t,i){t=pn(t,e);var o=-1,c=t.length;for(c||(c=1,e=n);++o<c;){var g=e==null?n:e[Ut(t[o])];g===n&&(o=c,g=i),e=jt(g)?g.call(e):g}return e}function n0(e,t,i){return e==null?e:Nr(e,t,i)}function r0(e,t,i,o){return o=typeof o=="function"?o:n,e==null?e:Nr(e,t,i,o)}var Gu=tu(Ge),$u=tu(ot);function i0(e,t,i){var o=ie(e),c=o||mn(e)||tr(e);if(t=Q(t,4),i==null){var g=e&&e.constructor;c?i=o?new g:[]:Re(e)?i=jt(g)?Zn(ii(e)):{}:i={}}return(c?xt:kt)(e,function(y,x,C){return t(i,y,x,C)}),i}function a0(e,t){return e==null?!0:os(e,t)}function s0(e,t,i){return e==null?e:Fl(e,t,cs(i))}function o0(e,t,i,o){return o=typeof o=="function"?o:n,e==null?e:Fl(e,t,cs(i),o)}function nr(e){return e==null?[]:Ha(e,Ge(e))}function l0(e){return e==null?[]:Ha(e,ot(e))}function u0(e,t,i){return i===n&&(i=t,t=n),i!==n&&(i=Et(i),i=i===i?i:0),t!==n&&(t=Et(t),t=t===t?t:0),Rn(Et(e),t,i)}function c0(e,t,i){return t=en(t),i===n?(i=t,t=0):i=en(i),e=Et(e),mp(e,t,i)}function f0(e,t,i){if(i&&typeof i!="boolean"&&je(e,t,i)&&(t=i=n),i===n&&(typeof t=="boolean"?(i=t,t=n):typeof e=="boolean"&&(i=e,e=n)),e===n&&t===n?(e=0,t=1):(e=en(e),t===n?(t=e,e=0):t=en(t)),e>t){var o=e;e=t,t=o}if(i||e%1||t%1){var c=pl();return Xe(e+c*(t-e+Gd("1e-"+((c+"").length-1))),t)}return is(e,t)}var d0=jn(function(e,t,i){return t=t.toLowerCase(),e+(i?Vu(t):t)});function Vu(e){return Ts(ye(e).toLowerCase())}function Yu(e){return e=ye(e),e&&e.replace(pd,nh).replace(Ad,"")}function h0(e,t,i){e=ye(e),t=dt(t);var o=e.length;i=i===n?o:Rn(se(i),0,o);var c=i;return i-=t.length,i>=0&&e.slice(i,c)==t}function p0(e){return e=ye(e),e&&Xf.test(e)?e.replace(So,rh):e}function g0(e){return e=ye(e),e&&ed.test(e)?e.replace(Oa,"\\$&"):e}var m0=jn(function(e,t,i){return e+(i?"-":"")+t.toLowerCase()}),v0=jn(function(e,t,i){return e+(i?" ":"")+t.toLowerCase()}),y0=ql("toLowerCase");function b0(e,t,i){e=ye(e),t=se(t);var o=t?Yn(e):0;if(!t||o>=t)return e;var c=(t-o)/2;return xi(li(c),i)+e+xi(oi(c),i)}function _0(e,t,i){e=ye(e),t=se(t);var o=t?Yn(e):0;return t&&o<t?e+xi(t-o,i):e}function x0(e,t,i){e=ye(e),t=se(t);var o=t?Yn(e):0;return t&&o<t?xi(t-o,i)+e:e}function w0(e,t,i){return i||t==null?t=0:t&&(t=+t),Ph(ye(e).replace(Ea,""),t||0)}function S0(e,t,i){return(i?je(e,t,i):t===n)?t=1:t=se(t),as(ye(e),t)}function N0(){var e=arguments,t=ye(e[0]);return e.length<3?t:t.replace(e[1],e[2])}var C0=jn(function(e,t,i){return e+(i?"_":"")+t.toLowerCase()});function O0(e,t,i){return i&&typeof i!="number"&&je(e,t,i)&&(t=i=n),i=i===n?G:i>>>0,i?(e=ye(e),e&&(typeof t=="string"||t!=null&&!Rs(t))&&(t=dt(t),!t&&Vn(e))?gn(Dt(e),0,i):e.split(t,i)):[]}var E0=jn(function(e,t,i){return e+(i?" ":"")+Ts(t)});function R0(e,t,i){return e=ye(e),i=i==null?0:Rn(se(i),0,e.length),t=dt(t),e.slice(i,i+t.length)==t}function P0(e,t,i){var o=h.templateSettings;i&&je(e,t,i)&&(t=n),e=ye(e),t=Ai({},t,o,nu);var c=Ai({},t.imports,o.imports,nu),g=Ge(c),y=Ha(c,g),x,C,M=0,z=t.interpolate||Yr,F="__p += '",V=$a((t.escape||Yr).source+"|"+z.source+"|"+(z===No?ld:Yr).source+"|"+(t.evaluate||Yr).source+"|$","g"),q="//# sourceURL="+(be.call(t,"sourceURL")?(t.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++Fd+"]")+`
`;e.replace(V,function(ee,ce,de,pt,et,gt){return de||(de=pt),F+=e.slice(M,gt).replace(gd,ih),ce&&(x=!0,F+=`' +
__e(`+ce+`) +
'`),et&&(C=!0,F+=`';
`+et+`;
__p += '`),de&&(F+=`' +
((__t = (`+de+`)) == null ? '' : __t) +
'`),M=gt+ee.length,ee}),F+=`';
`;var j=be.call(t,"variable")&&t.variable;if(!j)F=`with (obj) {
`+F+`
}
`;else if(sd.test(j))throw new re(p);F=(C?F.replace($f,""):F).replace(Vf,"$1").replace(Yf,"$1;"),F="function("+(j||"obj")+`) {
`+(j?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(x?", __e = _.escape":"")+(C?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+F+`return __p
}`;var oe=Xu(function(){return ve(g,q+"return "+F).apply(n,y)});if(oe.source=F,Es(oe))throw oe;return oe}function D0(e){return ye(e).toLowerCase()}function T0(e){return ye(e).toUpperCase()}function I0(e,t,i){if(e=ye(e),e&&(i||t===n))return rl(e);if(!e||!(t=dt(t)))return e;var o=Dt(e),c=Dt(t),g=il(o,c),y=al(o,c)+1;return gn(o,g,y).join("")}function A0(e,t,i){if(e=ye(e),e&&(i||t===n))return e.slice(0,ol(e)+1);if(!e||!(t=dt(t)))return e;var o=Dt(e),c=al(o,Dt(t))+1;return gn(o,0,c).join("")}function M0(e,t,i){if(e=ye(e),e&&(i||t===n))return e.replace(Ea,"");if(!e||!(t=dt(t)))return e;var o=Dt(e),c=il(o,Dt(t));return gn(o,c).join("")}function z0(e,t){var i=Ee,o=Le;if(Re(t)){var c="separator"in t?t.separator:c;i="length"in t?se(t.length):i,o="omission"in t?dt(t.omission):o}e=ye(e);var g=e.length;if(Vn(e)){var y=Dt(e);g=y.length}if(i>=g)return e;var x=i-Yn(o);if(x<1)return o;var C=y?gn(y,0,x).join(""):e.slice(0,x);if(c===n)return C+o;if(y&&(x+=C.length-x),Rs(c)){if(e.slice(x).search(c)){var M,z=C;for(c.global||(c=$a(c.source,ye(Co.exec(c))+"g")),c.lastIndex=0;M=c.exec(z);)var F=M.index;C=C.slice(0,F===n?x:F)}}else if(e.indexOf(dt(c),x)!=x){var V=C.lastIndexOf(c);V>-1&&(C=C.slice(0,V))}return C+o}function L0(e){return e=ye(e),e&&Kf.test(e)?e.replace(wo,fh):e}var k0=jn(function(e,t,i){return e+(i?" ":"")+t.toUpperCase()}),Ts=ql("toUpperCase");function Ku(e,t,i){return e=ye(e),t=i?n:t,t===n?sh(e)?ph(e):Zd(e):e.match(t)||[]}var Xu=le(function(e,t){try{return ct(e,n,t)}catch(i){return Es(i)?i:new re(i)}}),F0=Zt(function(e,t){return xt(t,function(i){i=Ut(i),qt(e,i,Cs(e[i],e))}),e});function U0(e){var t=e==null?0:e.length,i=Q();return e=t?Oe(e,function(o){if(typeof o[1]!="function")throw new wt(d);return[i(o[0]),o[1]]}):[],le(function(o){for(var c=-1;++c<t;){var g=e[c];if(ct(g[0],this,o))return ct(g[1],this,o)}})}function W0(e){return fp(Nt(e,b))}function Is(e){return function(){return e}}function B0(e,t){return e==null||e!==e?t:e}var H0=Zl(),G0=Zl(!0);function lt(e){return e}function As(e){return El(typeof e=="function"?e:Nt(e,b))}function $0(e){return Pl(Nt(e,b))}function V0(e,t){return Dl(e,Nt(t,b))}var Y0=le(function(e,t){return function(i){return wr(i,e,t)}}),K0=le(function(e,t){return function(i){return wr(e,i,t)}});function Ms(e,t,i){var o=Ge(t),c=pi(t,o);i==null&&!(Re(t)&&(c.length||!o.length))&&(i=t,t=e,e=this,c=pi(t,Ge(t)));var g=!(Re(i)&&"chain"in i)||!!i.chain,y=jt(e);return xt(c,function(x){var C=t[x];e[x]=C,y&&(e.prototype[x]=function(){var M=this.__chain__;if(g||M){var z=e(this.__wrapped__),F=z.__actions__=at(this.__actions__);return F.push({func:C,args:arguments,thisArg:e}),z.__chain__=M,z}return C.apply(e,un([this.value()],arguments))})}),e}function X0(){return Ve._===this&&(Ve._=_h),this}function zs(){}function q0(e){return e=se(e),le(function(t){return Tl(t,e)})}var J0=ds(Oe),Z0=ds(Qo),Q0=ds(ka);function qu(e){return bs(e)?Fa(Ut(e)):Rp(e)}function j0(e){return function(t){return e==null?n:Pn(e,t)}}var ey=jl(),ty=jl(!0);function Ls(){return[]}function ks(){return!1}function ny(){return{}}function ry(){return""}function iy(){return!0}function ay(e,t){if(e=se(e),e<1||e>ut)return[];var i=G,o=Xe(e,G);t=Q(t),e-=G;for(var c=Ba(o,t);++i<e;)t(i);return c}function sy(e){return ie(e)?Oe(e,Ut):ht(e)?[e]:at(gu(ye(e)))}function oy(e){var t=++yh;return ye(e)+t}var ly=_i(function(e,t){return e+t},0),uy=hs("ceil"),cy=_i(function(e,t){return e/t},1),fy=hs("floor");function dy(e){return e&&e.length?hi(e,lt,Qa):n}function hy(e,t){return e&&e.length?hi(e,Q(t,2),Qa):n}function py(e){return tl(e,lt)}function gy(e,t){return tl(e,Q(t,2))}function my(e){return e&&e.length?hi(e,lt,ns):n}function vy(e,t){return e&&e.length?hi(e,Q(t,2),ns):n}var yy=_i(function(e,t){return e*t},1),by=hs("round"),_y=_i(function(e,t){return e-t},0);function xy(e){return e&&e.length?Wa(e,lt):0}function wy(e,t){return e&&e.length?Wa(e,Q(t,2)):0}return h.after=$m,h.ary=Ou,h.assign=Tv,h.assignIn=Wu,h.assignInWith=Ai,h.assignWith=Iv,h.at=Av,h.before=Eu,h.bind=Cs,h.bindAll=F0,h.bindKey=Ru,h.castArray=nv,h.chain=Su,h.chunk=fg,h.compact=dg,h.concat=hg,h.cond=U0,h.conforms=W0,h.constant=Is,h.countBy=xm,h.create=Mv,h.curry=Pu,h.curryRight=Du,h.debounce=Tu,h.defaults=zv,h.defaultsDeep=Lv,h.defer=Vm,h.delay=Ym,h.difference=pg,h.differenceBy=gg,h.differenceWith=mg,h.drop=vg,h.dropRight=yg,h.dropRightWhile=bg,h.dropWhile=_g,h.fill=xg,h.filter=Sm,h.flatMap=Om,h.flatMapDeep=Em,h.flatMapDepth=Rm,h.flatten=bu,h.flattenDeep=wg,h.flattenDepth=Sg,h.flip=Km,h.flow=H0,h.flowRight=G0,h.fromPairs=Ng,h.functions=Gv,h.functionsIn=$v,h.groupBy=Pm,h.initial=Og,h.intersection=Eg,h.intersectionBy=Rg,h.intersectionWith=Pg,h.invert=Yv,h.invertBy=Kv,h.invokeMap=Tm,h.iteratee=As,h.keyBy=Im,h.keys=Ge,h.keysIn=ot,h.map=Ei,h.mapKeys=qv,h.mapValues=Jv,h.matches=$0,h.matchesProperty=V0,h.memoize=Pi,h.merge=Zv,h.mergeWith=Bu,h.method=Y0,h.methodOf=K0,h.mixin=Ms,h.negate=Di,h.nthArg=q0,h.omit=Qv,h.omitBy=jv,h.once=Xm,h.orderBy=Am,h.over=J0,h.overArgs=qm,h.overEvery=Z0,h.overSome=Q0,h.partial=Os,h.partialRight=Iu,h.partition=Mm,h.pick=e0,h.pickBy=Hu,h.property=qu,h.propertyOf=j0,h.pull=Ag,h.pullAll=xu,h.pullAllBy=Mg,h.pullAllWith=zg,h.pullAt=Lg,h.range=ey,h.rangeRight=ty,h.rearg=Jm,h.reject=km,h.remove=kg,h.rest=Zm,h.reverse=Ss,h.sampleSize=Um,h.set=n0,h.setWith=r0,h.shuffle=Wm,h.slice=Fg,h.sortBy=Gm,h.sortedUniq=Vg,h.sortedUniqBy=Yg,h.split=O0,h.spread=Qm,h.tail=Kg,h.take=Xg,h.takeRight=qg,h.takeRightWhile=Jg,h.takeWhile=Zg,h.tap=dm,h.throttle=jm,h.thru=Oi,h.toArray=ku,h.toPairs=Gu,h.toPairsIn=$u,h.toPath=sy,h.toPlainObject=Uu,h.transform=i0,h.unary=ev,h.union=Qg,h.unionBy=jg,h.unionWith=em,h.uniq=tm,h.uniqBy=nm,h.uniqWith=rm,h.unset=a0,h.unzip=Ns,h.unzipWith=wu,h.update=s0,h.updateWith=o0,h.values=nr,h.valuesIn=l0,h.without=im,h.words=Ku,h.wrap=tv,h.xor=am,h.xorBy=sm,h.xorWith=om,h.zip=lm,h.zipObject=um,h.zipObjectDeep=cm,h.zipWith=fm,h.entries=Gu,h.entriesIn=$u,h.extend=Wu,h.extendWith=Ai,Ms(h,h),h.add=ly,h.attempt=Xu,h.camelCase=d0,h.capitalize=Vu,h.ceil=uy,h.clamp=u0,h.clone=rv,h.cloneDeep=av,h.cloneDeepWith=sv,h.cloneWith=iv,h.conformsTo=ov,h.deburr=Yu,h.defaultTo=B0,h.divide=cy,h.endsWith=h0,h.eq=It,h.escape=p0,h.escapeRegExp=g0,h.every=wm,h.find=Nm,h.findIndex=vu,h.findKey=kv,h.findLast=Cm,h.findLastIndex=yu,h.findLastKey=Fv,h.floor=fy,h.forEach=Nu,h.forEachRight=Cu,h.forIn=Uv,h.forInRight=Wv,h.forOwn=Bv,h.forOwnRight=Hv,h.get=Ps,h.gt=lv,h.gte=uv,h.has=Vv,h.hasIn=Ds,h.head=_u,h.identity=lt,h.includes=Dm,h.indexOf=Cg,h.inRange=c0,h.invoke=Xv,h.isArguments=In,h.isArray=ie,h.isArrayBuffer=cv,h.isArrayLike=st,h.isArrayLikeObject=Te,h.isBoolean=fv,h.isBuffer=mn,h.isDate=dv,h.isElement=hv,h.isEmpty=pv,h.isEqual=gv,h.isEqualWith=mv,h.isError=Es,h.isFinite=vv,h.isFunction=jt,h.isInteger=Au,h.isLength=Ti,h.isMap=Mu,h.isMatch=yv,h.isMatchWith=bv,h.isNaN=_v,h.isNative=xv,h.isNil=Sv,h.isNull=wv,h.isNumber=zu,h.isObject=Re,h.isObjectLike=Pe,h.isPlainObject=Rr,h.isRegExp=Rs,h.isSafeInteger=Nv,h.isSet=Lu,h.isString=Ii,h.isSymbol=ht,h.isTypedArray=tr,h.isUndefined=Cv,h.isWeakMap=Ov,h.isWeakSet=Ev,h.join=Dg,h.kebabCase=m0,h.last=Ot,h.lastIndexOf=Tg,h.lowerCase=v0,h.lowerFirst=y0,h.lt=Rv,h.lte=Pv,h.max=dy,h.maxBy=hy,h.mean=py,h.meanBy=gy,h.min=my,h.minBy=vy,h.stubArray=Ls,h.stubFalse=ks,h.stubObject=ny,h.stubString=ry,h.stubTrue=iy,h.multiply=yy,h.nth=Ig,h.noConflict=X0,h.noop=zs,h.now=Ri,h.pad=b0,h.padEnd=_0,h.padStart=x0,h.parseInt=w0,h.random=f0,h.reduce=zm,h.reduceRight=Lm,h.repeat=S0,h.replace=N0,h.result=t0,h.round=by,h.runInContext=N,h.sample=Fm,h.size=Bm,h.snakeCase=C0,h.some=Hm,h.sortedIndex=Ug,h.sortedIndexBy=Wg,h.sortedIndexOf=Bg,h.sortedLastIndex=Hg,h.sortedLastIndexBy=Gg,h.sortedLastIndexOf=$g,h.startCase=E0,h.startsWith=R0,h.subtract=_y,h.sum=xy,h.sumBy=wy,h.template=P0,h.times=ay,h.toFinite=en,h.toInteger=se,h.toLength=Fu,h.toLower=D0,h.toNumber=Et,h.toSafeInteger=Dv,h.toString=ye,h.toUpper=T0,h.trim=I0,h.trimEnd=A0,h.trimStart=M0,h.truncate=z0,h.unescape=L0,h.uniqueId=oy,h.upperCase=k0,h.upperFirst=Ts,h.each=Nu,h.eachRight=Cu,h.first=_u,Ms(h,function(){var e={};return kt(h,function(t,i){be.call(h.prototype,i)||(e[i]=t)}),e}(),{chain:!1}),h.VERSION=s,xt(["bind","bindKey","curry","curryRight","partial","partialRight"],function(e){h[e].placeholder=h}),xt(["drop","take"],function(e,t){fe.prototype[e]=function(i){i=i===n?1:Ue(se(i),0);var o=this.__filtered__&&!t?new fe(this):this.clone();return o.__filtered__?o.__takeCount__=Xe(i,o.__takeCount__):o.__views__.push({size:Xe(i,G),type:e+(o.__dir__<0?"Right":"")}),o},fe.prototype[e+"Right"]=function(i){return this.reverse()[e](i).reverse()}}),xt(["filter","map","takeWhile"],function(e,t){var i=t+1,o=i==tt||i==wn;fe.prototype[e]=function(c){var g=this.clone();return g.__iteratees__.push({iteratee:Q(c,3),type:i}),g.__filtered__=g.__filtered__||o,g}}),xt(["head","last"],function(e,t){var i="take"+(t?"Right":"");fe.prototype[e]=function(){return this[i](1).value()[0]}}),xt(["initial","tail"],function(e,t){var i="drop"+(t?"":"Right");fe.prototype[e]=function(){return this.__filtered__?new fe(this):this[i](1)}}),fe.prototype.compact=function(){return this.filter(lt)},fe.prototype.find=function(e){return this.filter(e).head()},fe.prototype.findLast=function(e){return this.reverse().find(e)},fe.prototype.invokeMap=le(function(e,t){return typeof e=="function"?new fe(this):this.map(function(i){return wr(i,e,t)})}),fe.prototype.reject=function(e){return this.filter(Di(Q(e)))},fe.prototype.slice=function(e,t){e=se(e);var i=this;return i.__filtered__&&(e>0||t<0)?new fe(i):(e<0?i=i.takeRight(-e):e&&(i=i.drop(e)),t!==n&&(t=se(t),i=t<0?i.dropRight(-t):i.take(t-e)),i)},fe.prototype.takeRightWhile=function(e){return this.reverse().takeWhile(e).reverse()},fe.prototype.toArray=function(){return this.take(G)},kt(fe.prototype,function(e,t){var i=/^(?:filter|find|map|reject)|While$/.test(t),o=/^(?:head|last)$/.test(t),c=h[o?"take"+(t=="last"?"Right":""):t],g=o||/^find/.test(t);c&&(h.prototype[t]=function(){var y=this.__wrapped__,x=o?[1]:arguments,C=y instanceof fe,M=x[0],z=C||ie(y),F=function(ce){var de=c.apply(h,un([ce],x));return o&&V?de[0]:de};z&&i&&typeof M=="function"&&M.length!=1&&(C=z=!1);var V=this.__chain__,q=!!this.__actions__.length,j=g&&!V,oe=C&&!q;if(!g&&z){y=oe?y:new fe(this);var ee=e.apply(y,x);return ee.__actions__.push({func:Oi,args:[F],thisArg:n}),new St(ee,V)}return j&&oe?e.apply(this,x):(ee=this.thru(F),j?o?ee.value()[0]:ee.value():ee)})}),xt(["pop","push","shift","sort","splice","unshift"],function(e){var t=Qr[e],i=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",o=/^(?:pop|shift)$/.test(e);h.prototype[e]=function(){var c=arguments;if(o&&!this.__chain__){var g=this.value();return t.apply(ie(g)?g:[],c)}return this[i](function(y){return t.apply(ie(y)?y:[],c)})}}),kt(fe.prototype,function(e,t){var i=h[t];if(i){var o=i.name+"";be.call(Jn,o)||(Jn[o]=[]),Jn[o].push({name:t,func:i})}}),Jn[bi(n,L).name]=[{name:"wrapper",func:n}],fe.prototype.clone=Lh,fe.prototype.reverse=kh,fe.prototype.value=Fh,h.prototype.at=hm,h.prototype.chain=pm,h.prototype.commit=gm,h.prototype.next=mm,h.prototype.plant=ym,h.prototype.reverse=bm,h.prototype.toJSON=h.prototype.valueOf=h.prototype.value=_m,h.prototype.first=h.prototype.head,gr&&(h.prototype[gr]=vm),h},Kn=gh();Nn?((Nn.exports=Kn)._=Kn,Aa._=Kn):Ve._=Kn}).call(Pr)})(qi,qi.exports);var V_=qi.exports;const oo=({reset:r,entityName:a})=>{const[n,s]=P.useState(!1);return D(ge,{children:[D(ro,{isOpen:n,confirmButtonText:"重置",cancelButtonText:"取消",icon:"reset",intent:"danger",canOutsideClickCancel:!0,onCancel:()=>s(!1),onConfirm:()=>{r(),s(!1)},children:[D(or,{children:["重置",a]}),D("p",{children:["确定要重置",a,"吗？"]})]}),u(te,{className:"ml-4",icon:"reset",minimal:!0,intent:"danger",onClick:()=>s(!0),children:"重置..."})]})},lo=({errors:r})=>{const a=Object.values(r);return a.length===0?null:u(rn,{intent:"danger",className:"mt-2",title:"发生错误…",children:u("ol",{className:"list-decimal list-inside",children:a.map((n,s)=>u("li",{children:(n==null?void 0:n.message)||"未知错误"},s))})})},Ji=({className:r,control:a,icon:n,children:s})=>{const{isSubmitSuccessful:l}=Ln({control:a}),[f,d]=P.useState(!1),p=P.useRef(-1);return P.useEffect(()=>(l?(d(!0),p.current=window.setTimeout(()=>{d(!1)},1e3)):d(!1),()=>{clearTimeout(p.current)}),[l]),u(te,{className:r,intent:f?"success":"primary",type:"submit",icon:f?"tick":n,children:s})},Y_=({name:r="docColor",control:a,...n})=>{const{field:{onChange:s,onBlur:l,value:f,ref:d},formState:{errors:p}}=bt({name:r,control:a,defaultValue:"Gray",...n}),m=nc.find(v=>v.value===f);return u(Se,{label:"描述颜色",field:r,error:p[r],description:"在 MAA 中打印描述时的颜色",children:u(ra,{filterable:!1,items:nc,itemRenderer:(v,{handleClick:_,handleFocus:b,modifiers:w})=>u(Ke,{selected:w.active,onClick:_,onFocus:b,text:D("span",{children:[u(Be,{icon:"full-circle",color:v==null?void 0:v.value,className:"mr-2"}),u("span",{style:{color:v==null?void 0:v.value},children:v==null?void 0:v.title})]})},v.value),onItemSelect:v=>{s(v.value)},resetOnSelect:!0,children:D(te,{rightIcon:"double-caret-vertical",onBlur:l,ref:d,children:[u(Be,{icon:"full-circle",color:m==null?void 0:m.value}),u("span",{style:{color:m==null?void 0:m.value},children:m==null?void 0:m.title})]})})})},Zi=({intOnly:r,min:a,minorStepSize:n,value:s,onValueChange:l,...f})=>{const d=a===void 0||a<0,p=P.useRef(null),[m,v]=P.useState(!1);return n&&n<.001&&(n=.001),u(i_,{allowNumericCharactersOnly:!0,min:a,minorStepSize:n,inputRef:p,value:m?s+".":s,onBlur:()=>v(!1),onButtonClick:(_,b)=>l==null?void 0:l(_,b,p.current),onValueChange:(_,b,w)=>{let S=0;b=b.replace(/-/g,()=>(S++,""));const A=b.split(".").length-1;A>1||A===1&&r||(v(b.endsWith(".")),_=parseFloat(b),!(Number.isNaN(_)||!Number.isFinite(_))&&(d&&S%2===1&&(_=-_),r&&(_=~~_),l==null||l(_,b,w)))},...f})},ur=({name:r,control:a,rules:n,NumericInputProps:s,...l})=>{const{min:f}=s,{field:{onChange:d,onBlur:p,value:m,ref:v},fieldState:{isDirty:_}}=bt({name:r,control:a,...l,rules:{min:ff(f)?void 0:{value:f,message:"最小为 ${min}"},...n}});return u(Zi,{intOnly:!0,selectAllOnFocus:!0,minorStepSize:null,name:r,inputRef:v,onValueChange:b=>d(b),onBlur:p,value:m??"",rightElement:u(kr,{disabled:!_,onReset:()=>d(void 0)}),...s})},K_=({name:r="kills",control:a,...n})=>{const{errors:s}=Ln({control:a,name:r});return u(Se,{label:"击杀数条件",className:"mr-2 lg:mr-4",field:r,error:s[r],description:"如果没达到就一直等待。可选，默认为 0，直接执行",children:u(ur,{NumericInputProps:{placeholder:"击杀数",min:0},control:a,name:r,...n})})},X_=({name:r="costs",control:a,...n})=>{const{errors:s}=Ln({control:a,name:r});return u(Se,{label:"费用条件",className:"mr-2 lg:mr-4",field:r,error:s[r],description:"如果没达到就一直等待。可选，默认为 0，直接执行。费用受潜能等影响，可能并不完全正确，仅适合对时间轴要求不严格的战斗，否则请使用下面的费用变化量条件。另外仅在费用是两位数的时候识别的比较准，三位数的费用可能会识别错，不推荐使用。",children:u(ur,{NumericInputProps:{placeholder:"费用",min:0},control:a,name:r,...n})})},q_=({name:r="costChanges",control:a,...n})=>{const{errors:s}=Ln({control:a,name:r});return u(Se,{label:"费用变化量条件",className:"mr-2 lg:mr-4",field:r,error:s[r],description:"如果没达到就一直等待。可选，默认为 0，直接执行。注意：费用变化量是从开始执行本动作时开始计算的（即：使用前一个动作结束时的费用作为基准）。支持负数，即费用变少了（例如“孑”等吸费干员使得费用变少了）。另外仅在费用是两位数的时候识别的比较准，三位数的费用可能会识别错，不推荐使用。",children:u(ur,{NumericInputProps:{placeholder:"费用变化量"},control:a,name:r,...n})})},J_=({name:r="cooling",control:a,...n})=>{const{errors:s}=Ln({control:a,name:r});return u(Se,{label:"CD 中干员数量条件",field:r,error:s[r],description:"如果没达到就一直等待。可选，默认 -1，不识别",children:u(ur,{NumericInputProps:{placeholder:"CD 中干员数量",min:0},control:a,name:r,...n})})},Z_=({name:r="direction",control:a,...n})=>{const{field:{onChange:s,onBlur:l,value:f,ref:d},formState:{errors:p}}=bt({name:r,control:a,rules:{required:"必须选择朝向"},defaultValue:"None",...n}),m=rc.find(v=>v.value===f);return u(Se,{label:"干员朝向",field:r,error:p[r],description:"部署干员的干员朝向",children:u(ra,{filterable:!1,resetOnSelect:!0,items:rc,itemRenderer:(v,{handleClick:_,handleFocus:b,modifiers:w})=>u(Ke,{selected:w.active,onClick:_,onFocus:b,icon:v.icon,text:v.title},v.value),onItemSelect:v=>{s(v.value)},children:u(te,{icon:m==null?void 0:m.icon,text:m==null?void 0:m.title,rightIcon:"double-caret-vertical",onBlur:l,ref:d})})})};let Q_="Copilot";class j_ extends EventTarget{}class ex extends Event{constructor(a){super(a.type),this.source=a.source,this.origin=a.origin,this.message=a.message,this.reply=this.reply.bind(this)}reply(a){return this.source?Js(this.source,this.origin,a):Promise.resolve(!1)}}const sr=new j_;window.addEventListener("message",r=>{const{data:a,origin:n,source:s}=r;a&&typeof a.type=="string"&&(uo(a.type)||Qi("received",a),sr.dispatchEvent(new ex({type:a.type,message:a,origin:n,source:s})))});function qs(r,a,n){P.useEffect(()=>{const s=l=>{if(!uo(l.type)&&(r==="*"||l.origin===r)){const f=l.message.id;l.reply({type:pf(f)}).catch(d=>Qi("Error:",d));try{n(l)}catch(d){Qi("Error:",d)}}};return sr.addEventListener(a,s),()=>{sr.removeEventListener(a,s)}},[a,r,n])}function Js(r,a,n,s=500){const l={id:n.id??tx(),...n};uo(l.type)||Qi("sending",l);const f=pf(l.id);return new Promise(d=>{r.postMessage(l,a);const p=()=>{sr.removeEventListener(f,p),d(!0)};s>0&&window.setTimeout(()=>{sr.removeEventListener(f,p),d(!1)},s),sr.addEventListener(f,p)})}function pf(r){return`ack:${r}`}function uo(r){return r.startsWith("ack:")}function tx(){return Math.random().toString(36).slice(2,6)}function Qi(...r){console.log(`[Msg:${Q_}]`,...r)}const gf=P.createContext({});function co(){return P.useContext(gf)}function nx({children:r}){const[a,n]=P.useState(),[s,l]=P.useState([]),f=P.useMemo(()=>({level:a,setLevel:n,activeTiles:s,setActiveTiles:l}),[a,s]);return u(gf.Provider,{value:f,children:r})}const mf="https://theresa.wiki",Ir=mf,rx=r=>`${mf}/widget/map/${r.stageId}/scene`,ix=({name:r,control:a,actionType:n,level:s,rules:l,...f})=>{var S,A;const d=n==="Deploy",{field:{onChange:p,value:m},formState:{errors:v}}=bt({name:r,control:a,rules:{required:d&&"必须填写位置",validate:R=>{if(R){if(!(Array.isArray(R)&&R.length===2&&R.every(I=>I>=0&&Number.isFinite(I))))return"位置不是有效的数字";if(s){if(R[0]>=s.width)return`X 坐标超出地图范围 (0-${s.width-1})`;if(R[1]>=s.height)return`Y 坐标超出地图范围 (0-${s.height-1})`}}},...l},...f}),_={fromX:R=>[R,m==null?void 0:m[1]],fromY:R=>[m==null?void 0:m[0],R]},{setActiveTiles:b}=co();P.useEffect(()=>{(m==null?void 0:m[0])!==void 0&&(m==null?void 0:m[1])!==void 0?b([{x:m[0],y:m[1]}]):b([])},[m,b]),P.useEffect(()=>()=>b([]),[b]),qs(Ir,"tileClick",R=>{const[I,L]=R.message.data.maaLocation;p([I,L])});const w=R=>{R[0]===void 0&&R[1]===void 0?p(void 0):p(R)};return u(Se,{label:"干员位置",field:"location",asterisk:d,error:v[r],description:"填完关卡名后开一局，会在目录下 map 文件夹中生成地图坐标图片",className:"mr-4",FormGroupProps:{helperText:"可在地图上点击以选择位置"},children:D("div",{className:"flex",children:[u(Mn,{onChange:R=>p(_.fromX(cc(R.target.value))),value:((S=m==null?void 0:m[0])==null?void 0:S.toString())??"",placeholder:"X 坐标",className:"mr-2",rightElement:u(kr,{disabled:(m==null?void 0:m[0])===void 0,onReset:()=>w(_.fromX(void 0))}),onFocus:R=>R.target.select()}),u(Mn,{onChange:R=>p(_.fromY(cc(R.target.value))),value:((A=m==null?void 0:m[1])==null?void 0:A.toString())??"",placeholder:"Y 坐标",rightElement:u(kr,{disabled:(m==null?void 0:m[1])===void 0,onReset:()=>w(_.fromY(void 0))}),onFocus:R=>R.target.select()})]})})};function cc(r){const a=typeof r=="number"?r:parseInt(r);return a<0||!Number.isFinite(a)?0:a}const ax=r=>{const{field:{onChange:a,onBlur:n,value:s,ref:l}}=bt({rules:{required:"请选择动作类型"},...r}),f=P.useMemo(()=>Object.entries(A_(lb,"group")).flatMap(([p,m])=>[{type:"header",header:p},...m]),[]),d=Fr(s);return u(Uc,{items:f,onItemSelect:p=>{a(p.value)},activeItem:d,children:u(te,{large:!0,icon:(d==null?void 0:d.icon)||"slash",text:d?d.title:"选择动作",rightIcon:"double-caret-vertical",onBlur:n,ref:l})})},fo=({name:r,control:a,...n})=>{const{field:{onChange:s,onBlur:l,value:f}}=bt({name:r,control:a,...n});return u(Zi,{intOnly:!0,defaultValue:0,onValueChange:d=>s(Math.min(d,100)),onBlur:l,placeholder:"技能使用次数",value:f??"",large:!0,min:1,max:100})},ho=({name:r,control:a,...n})=>{const{field:{onChange:s,onBlur:l,value:f,ref:d}}=bt({name:r,control:a,...n}),p=Ks.find(m=>m.type==="choice"&&m.value===(f??0));return u(Uc,{items:Ks,onItemSelect:m=>{s(m.value)},activeItem:p,children:u(te,{icon:(p==null?void 0:p.icon)||"slash",text:p?p.title:"选择技能用法",rightIcon:"double-caret-vertical",onBlur:l,ref:d})})},sx=({name:r="preDelay",control:a,...n})=>{const{errors:s}=Ln({control:a,name:r});return u(Se,{label:"前置延时",className:"mr-2 lg:mr-4",field:r,error:s[r],description:"可选，默认为 0，单位毫秒",children:u(ur,{NumericInputProps:{placeholder:"前置延时",min:0,stepSize:100,minorStepSize:10,majorStepSize:1e3},control:a,name:r,...n})})},ox=({name:r="rearDelay",control:a,...n})=>{const{errors:s}=Ln({control:a,name:r});return u(Se,{label:"后置延时",field:r,error:s[r],description:"可选，默认为 0，单位毫秒",children:u(ur,{NumericInputProps:{placeholder:"后置延时",min:0,stepSize:100,minorStepSize:10,majorStepSize:1e3},control:a,name:r,...n})})},lx=({name:r,control:a,rules:n,...s})=>{var _,b;const{field:{onChange:l,onBlur:f,value:d},formState:{errors:p}}=bt({name:r,control:a,rules:{required:"必须填写移动距离",validate:w=>{if(w&&!(Array.isArray(w)&&w.length===2&&w.every(S=>Number.isFinite(S))))return"不是有效的数字"},...n},...s}),m={fromX:w=>[w,d==null?void 0:d[1]],fromY:w=>[d==null?void 0:d[0],w]},v=w=>{w[0]===void 0&&w[1]===void 0?l(void 0):l(w)};return u(Se,{asterisk:!0,label:"移动距离",field:r,error:p[r],className:"mr-4",children:D("div",{className:"flex",children:[u(Zi,{selectAllOnFocus:!0,className:"mr-2",placeholder:"X 距离",stepSize:.5,onValueChange:w=>l(m.fromX(w)),onBlur:f,value:((_=d==null?void 0:d[0])==null?void 0:_.toString())??"",rightElement:u(kr,{disabled:(d==null?void 0:d[0])===void 0,onReset:()=>v(m.fromX(void 0))})}),u(Zi,{selectAllOnFocus:!0,placeholder:"Y 距离",stepSize:.5,onValueChange:w=>l(m.fromY(w)),onBlur:f,value:((b=d==null?void 0:d[1])==null?void 0:b.toString())??"",rightElement:u(kr,{disabled:(d==null?void 0:d[1])===void 0,onReset:()=>v(m.fromY(void 0))})})]})})},fc=({children:r,...a})=>{const[n,s]=P.useState(!1);return D(ge,{children:[u(Gi,{...a,children:u(Be,{icon:"chevron-up",className:Ne("mr-2 text-zinc-500 ml-auto transition-transform cursor-pointer",n&&"rotate-180"),onClick:()=>s(!n)})}),u("div",{className:Ne("overflow-hidden transition-[max-height] duration-[300ms]",n?"max-h-0":"max-h-[499px]"),children:r})]})},dc={type:sn.Type.Deploy},ux={type:sn.Type.MoveCamera,distance:[4.5,0]},cx=({control:r,editingAction:a,onSubmit:n,onCancel:s})=>{const l=!a,f=_n({control:r,name:"groups"}),d=_n({control:r,name:"opers"}),{control:p,reset:m,setError:v,handleSubmit:_,setValue:b,formState:{errors:w}}=kn({defaultValues:dc}),S=_n({control:p,name:"type"}),A=_n({control:r,name:"stageName"}),R=_n({control:p,name:"skillUsage"}),{data:I}=ia(),L=P.useMemo(()=>aa(I,A),[I,A]),$=P.useMemo(()=>({...dc,type:S,...S==="MoveCamera"?ux:null}),[S]);P.useEffect(()=>{a!=null&&a.type&&b("type",a.type)},[a==null?void 0:a._id,b]),P.useEffect(()=>{a?setTimeout(()=>{"doc"in a&&b("doc",a.doc),"docColor"in a&&b("docColor",a.docColor),"costs"in a&&b("costs",a.costs),"costChanges"in a&&b("costChanges",a.costChanges),"kills"in a&&b("kills",a.kills),"cooling"in a&&b("cooling",a.cooling),"preDelay"in a&&b("preDelay",a.preDelay),"rearDelay"in a&&b("rearDelay",a.rearDelay),"name"in a&&b("name",a.name),"direction"in a&&b("direction",a.direction),"location"in a&&b("location",a.location),"skillUsage"in a&&b("skillUsage",a.skillUsage),"distance"in a&&b("distance",a.distance)},0):m($)},[a,m,$,b]),P.useEffect(()=>{S==="MoveCamera"&&m($)},[S,m,$]),P.useEffect(()=>{b("skillTimes",R===sn.SkillUsageType.ReadyToUseTimes?(a==null?void 0:a.skillTimes)??1:void 0)},[R,a,b]);const U=_(Y=>{var Z;"name"in Y&&(Y.name=(Z=Y.name)==null?void 0:Z.trim()),Y.doc||delete Y.docColor,n(Y,v)&&m($)});return u("form",{onSubmit:U,children:D(zt,{className:"mb-2 pb-8 pt-4 overflow-auto",children:[D("div",{className:"flex items-center mb-4",children:[u(sa,{className:"mb-0",icon:l?"add":"edit",children:D("span",{children:[l?"添加":"编辑","动作"]})}),u("div",{className:"flex-1"}),u(Ji,{control:p,icon:l?"add":"edit",children:l?"添加":"保存"}),u(oo,{reset:()=>m($),entityName:"正在编辑的动作"})]}),!1,u("div",{className:"flex flex-col lg:flex-row",children:u("div",{className:"flex flex-1",children:u(Se,{label:"动作类型",field:"type",error:w.type,asterisk:!0,children:u(ax,{control:p,name:"type"})})})}),(S==="Deploy"||S==="Skill"||S==="Retreat"||S==="SkillUsage"||S==="BulletTime")&&u("div",{className:"flex",children:u(Se,{label:"干员或干员组名",description:"选择干员、使用干员名、或使用干员组名引用",field:"name",error:w.name,asterisk:S==="Deploy",FormGroupProps:{helperText:D(ge,{children:[u("p",{children:"键入干员名、拼音或拼音首字母以搜索干员列表"}),u("p",{children:"键入干员组名以引用干员组配置"})]})},children:u(Wc,{shouldUnregister:!0,groups:f,operators:d,control:p,name:"name",rules:{required:(S==="Deploy"||S==="SkillUsage")&&"必须填写干员或干员组名"}})})}),(S==="Deploy"||S==="Skill"||S==="Retreat"||S==="BulletTime")&&u("div",{className:"flex",children:u(ix,{shouldUnregister:!0,actionType:S,level:L,control:p,name:"location"})}),S==="Deploy"&&u("div",{className:"flex",children:u(Z_,{shouldUnregister:!0,control:p,name:"direction"})}),S==="SkillUsage"&&D("div",{className:"flex gap-2",children:[u(Se,{label:"技能用法",field:"skillUsage",error:w.skillUsage,children:u(ho,{shouldUnregister:!0,control:p,name:"skillUsage",defaultValue:0})}),R===sn.SkillUsageType.ReadyToUseTimes&&u(Se,{label:"技能使用次数",field:"skillTimes",error:w.skillTimes,children:u(fo,{control:p,name:"skillTimes"})})]}),S==="MoveCamera"&&D(ge,{children:[u(rn,{children:"移动距离一般不需要修改，只填写前置延迟（15000）和击杀数条件即可"}),u("div",{className:"flex mt-2",children:u(lx,{shouldUnregister:!0,control:p,name:"distance"})})]}),u("div",{className:"h-px w-full bg-gray-200 mt-4 mb-6"}),D(fc,{title:"执行条件",icon:"stopwatch",className:"font-bold",children:[D("div",{className:"flex flex-wrap",children:[u(K_,{control:p}),u(J_,{control:p})]}),D("div",{className:"flex flex-wrap",children:[u(X_,{control:p}),u(q_,{control:p})]}),D("div",{className:"flex flex-wrap",children:[u(sx,{control:p}),u(ox,{control:p})]})]}),u("div",{className:"h-px w-full bg-gray-200 mt-4 mb-6"}),u(fc,{title:"日志",icon:"annotation",className:"font-bold",children:D("div",{className:"flex flex-col w-full",children:[u(Y_,{shouldUnregister:!0,control:p,name:"docColor"}),u($i,{label:"描述",field:"doc",control:p,ControllerProps:{render:({field:Y})=>u(Bc,{fill:!0,rows:2,growVertically:!0,large:!0,id:"doc",placeholder:"描述，可选。会显示在界面上，没有实际作用",...Y,value:Y.value||""})}})]})}),D("div",{className:"mt-4 flex",children:[u(Ji,{control:p,icon:l?"add":"edit",children:l?"添加":"保存"}),!l&&u(te,{icon:"cross",className:"ml-2",onClick:s,children:"取消编辑"})]}),u(lo,{errors:w})]})})},fx=({className:r,...a})=>u(te,{minimal:!0,icon:"duplicate",title:"复制",className:Ne("-my-2",r),...a}),po=({className:r,...a})=>u(te,{minimal:!0,icon:"edit",title:"编辑",className:Ne("-my-2",r),...a}),ca=({className:r,onClick:a,...n})=>u(Bt,{position:"right",content:u(Ur,{className:"p-0",children:u(Ke,{intent:"danger",text:"删除",icon:"trash",onClick:a})}),children:u(te,{minimal:!0,icon:"trash",title:"删除",className:Ne("-my-2",r),...n})}),hc=({editing:r,action:a,onEdit:n,onDuplicate:s,onRemove:l,isDragging:f,attributes:d,listeners:p})=>{const m=Fr(a.type);return u(ub,{className:Ne(r&&"bg-gray-100",f&&"invisible"),action:a,title:D("div",{className:"flex items-center",children:[u(Be,{className:"cursor-grab active:cursor-grabbing p-1 -my-1 -ml-2 mr-2 rounded-[1px]",icon:"drag-handle-vertical",...d,...p}),D(sa,{className:"mb-0 flex-grow",icon:m.icon,children:[u("span",{className:"mr-2",children:m.title}),u(po,{active:r,onClick:n}),u(fx,{onClick:s}),u(ca,{onClick:l})]})]})})};function dx(r,a){if((r.type==="Skill"||r.type==="Retreat"||r.type==="BulletTime")&&!r.name&&!r.location){const n={type:"required",message:"类型为技能、撤退或子弹时间时，必须填写名称或位置其中一个"};return a("name",n),a("location",n),!1}return!0}const An=r=>r._id??(r._id=zn()),hx=({control:r})=>{const[a,n]=P.useState(),{fields:s,append:l,insert:f,update:d,move:p,remove:m}=Xs({name:"actions",control:r}),v=s,[_,b]=P.useState(),w=U=>(_==null?void 0:_._id)===U._id,S=Hc(Gc($c)),A=({active:U})=>{n(v.find(Y=>An(Y)===U.id))},R=({active:U,over:Y})=>{if(Y&&U.id!==Y.id){const Z=v.findIndex(ue=>An(ue)===U.id),ne=v.findIndex(ue=>An(ue)===Y.id);Z!==-1&&ne!==-1&&p(Z,ne)}},I=()=>{n(void 0)},L=U=>{const Y=JSON.parse(JSON.stringify(v[U]));Y._id=zn(),B_(Y,"id"),f(U+1,Y)};return D("div",{className:"flex flex-wrap md:flex-nowrap min-h-[calc(100vh-6rem)]",children:[u("div",{className:"md:w-1/2 md:mr-8 w-full",children:u(cx,{control:r,editingAction:_,onSubmit:(U,Y)=>{if(!dx(U,Y))return!1;if(_){const Z=v.findIndex(ne=>w(ne));if(Z!==-1)U._id=An(_),d(Z,U),b(void 0);else return Y("global",{message:"未能找到要更新的动作"}),!1}else U._id=zn(),l(U);return!0},onCancel:()=>b(void 0)})}),u("div",{className:"  md:w-1/2 w-full",children:D("div",{className:"overflow-auto h-[calc(100vh-6rem)] p-2 pt-0 pb-8 -mx-2",children:[D(Vc,{sensors:S,onDragStart:A,onDragOver:R,onDragEnd:I,onDragCancel:I,children:[u(Vi,{items:v.map(An),strategy:Yi,children:u("ul",{children:v.map((U,Y)=>u("li",{className:"mt-2",children:u(Ki,{id:An(U),children:Z=>u(hc,{action:U,editing:w(U),onEdit:()=>b(w(U)?void 0:U),onDuplicate:()=>L(Y),onRemove:()=>m(Y),...Z})})},An(U)))})}),u(Yc,{children:a&&u(hc,{editing:w(a),action:a})})]}),v.length===0&&u(xn,{title:"暂无动作",className:"",icon:"inbox"})]})})]})};var fa={exports:{}},vf={};const px=cb(fb);var De={},Ht={};Object.defineProperty(Ht,"__esModule",{value:!0});Ht.dontSetMe=bx;Ht.findInArray=gx;Ht.int=yx;Ht.isFunction=mx;Ht.isNum=vx;function gx(r,a){for(var n=0,s=r.length;n<s;n++)if(a.apply(a,[r[n],n,r]))return r[n]}function mx(r){return typeof r=="function"||Object.prototype.toString.call(r)==="[object Function]"}function vx(r){return typeof r=="number"&&!isNaN(r)}function yx(r){return parseInt(r,10)}function bx(r,a,n){if(r[a])return new Error("Invalid prop ".concat(a," passed to ").concat(n," - do not set this, set it on the child."))}var Fn={};Object.defineProperty(Fn,"__esModule",{value:!0});Fn.browserPrefixToKey=bf;Fn.browserPrefixToStyle=_x;Fn.default=void 0;Fn.getPrefix=yf;var Us=["Moz","Webkit","O","ms"];function yf(){var r,a,n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"transform";if(typeof window>"u")return"";var s=(r=window.document)===null||r===void 0||(a=r.documentElement)===null||a===void 0?void 0:a.style;if(!s||n in s)return"";for(var l=0;l<Us.length;l++)if(bf(n,Us[l])in s)return Us[l];return""}function bf(r,a){return a?"".concat(a).concat(xx(r)):r}function _x(r,a){return a?"-".concat(a.toLowerCase(),"-").concat(r):r}function xx(r){for(var a="",n=!0,s=0;s<r.length;s++)n?(a+=r[s].toUpperCase(),n=!1):r[s]==="-"?n=!0:a+=r[s];return a}var wx=yf();Fn.default=wx;function Zs(r){"@babel/helpers - typeof";return Zs=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(a){return typeof a}:function(a){return a&&typeof Symbol=="function"&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},Zs(r)}Object.defineProperty(De,"__esModule",{value:!0});De.addClassName=Nf;De.addEvent=Cx;De.addUserSelectStyles=Lx;De.createCSSTransform=Ix;De.createSVGTransform=Ax;De.getTouch=Mx;De.getTouchIdentifier=zx;De.getTranslation=go;De.innerHeight=Px;De.innerWidth=Dx;De.matchesSelector=Sf;De.matchesSelectorAndParentsTo=Nx;De.offsetXYFromParent=Tx;De.outerHeight=Ex;De.outerWidth=Rx;De.removeClassName=Cf;De.removeEvent=Ox;De.removeUserSelectStyles=kx;var yt=Ht,pc=Sx(Fn);function _f(r){if(typeof WeakMap!="function")return null;var a=new WeakMap,n=new WeakMap;return(_f=function(l){return l?n:a})(r)}function Sx(r,a){if(!a&&r&&r.__esModule)return r;if(r===null||Zs(r)!=="object"&&typeof r!="function")return{default:r};var n=_f(a);if(n&&n.has(r))return n.get(r);var s={},l=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var f in r)if(f!=="default"&&Object.prototype.hasOwnProperty.call(r,f)){var d=l?Object.getOwnPropertyDescriptor(r,f):null;d&&(d.get||d.set)?Object.defineProperty(s,f,d):s[f]=r[f]}return s.default=r,n&&n.set(r,s),s}function gc(r,a){var n=Object.keys(r);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(r);a&&(s=s.filter(function(l){return Object.getOwnPropertyDescriptor(r,l).enumerable})),n.push.apply(n,s)}return n}function xf(r){for(var a=1;a<arguments.length;a++){var n=arguments[a]!=null?arguments[a]:{};a%2?gc(Object(n),!0).forEach(function(s){wf(r,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(n)):gc(Object(n)).forEach(function(s){Object.defineProperty(r,s,Object.getOwnPropertyDescriptor(n,s))})}return r}function wf(r,a,n){return a in r?Object.defineProperty(r,a,{value:n,enumerable:!0,configurable:!0,writable:!0}):r[a]=n,r}var Li="";function Sf(r,a){return Li||(Li=(0,yt.findInArray)(["matches","webkitMatchesSelector","mozMatchesSelector","msMatchesSelector","oMatchesSelector"],function(n){return(0,yt.isFunction)(r[n])})),(0,yt.isFunction)(r[Li])?r[Li](a):!1}function Nx(r,a,n){var s=r;do{if(Sf(s,a))return!0;if(s===n)return!1;s=s.parentNode}while(s);return!1}function Cx(r,a,n,s){if(r){var l=xf({capture:!0},s);r.addEventListener?r.addEventListener(a,n,l):r.attachEvent?r.attachEvent("on"+a,n):r["on"+a]=n}}function Ox(r,a,n,s){if(r){var l=xf({capture:!0},s);r.removeEventListener?r.removeEventListener(a,n,l):r.detachEvent?r.detachEvent("on"+a,n):r["on"+a]=null}}function Ex(r){var a=r.clientHeight,n=r.ownerDocument.defaultView.getComputedStyle(r);return a+=(0,yt.int)(n.borderTopWidth),a+=(0,yt.int)(n.borderBottomWidth),a}function Rx(r){var a=r.clientWidth,n=r.ownerDocument.defaultView.getComputedStyle(r);return a+=(0,yt.int)(n.borderLeftWidth),a+=(0,yt.int)(n.borderRightWidth),a}function Px(r){var a=r.clientHeight,n=r.ownerDocument.defaultView.getComputedStyle(r);return a-=(0,yt.int)(n.paddingTop),a-=(0,yt.int)(n.paddingBottom),a}function Dx(r){var a=r.clientWidth,n=r.ownerDocument.defaultView.getComputedStyle(r);return a-=(0,yt.int)(n.paddingLeft),a-=(0,yt.int)(n.paddingRight),a}function Tx(r,a,n){var s=a===a.ownerDocument.body,l=s?{left:0,top:0}:a.getBoundingClientRect(),f=(r.clientX+a.scrollLeft-l.left)/n,d=(r.clientY+a.scrollTop-l.top)/n;return{x:f,y:d}}function Ix(r,a){var n=go(r,a,"px");return wf({},(0,pc.browserPrefixToKey)("transform",pc.default),n)}function Ax(r,a){var n=go(r,a,"");return n}function go(r,a,n){var s=r.x,l=r.y,f="translate(".concat(s).concat(n,",").concat(l).concat(n,")");if(a){var d="".concat(typeof a.x=="string"?a.x:a.x+n),p="".concat(typeof a.y=="string"?a.y:a.y+n);f="translate(".concat(d,", ").concat(p,")")+f}return f}function Mx(r,a){return r.targetTouches&&(0,yt.findInArray)(r.targetTouches,function(n){return a===n.identifier})||r.changedTouches&&(0,yt.findInArray)(r.changedTouches,function(n){return a===n.identifier})}function zx(r){if(r.targetTouches&&r.targetTouches[0])return r.targetTouches[0].identifier;if(r.changedTouches&&r.changedTouches[0])return r.changedTouches[0].identifier}function Lx(r){if(r){var a=r.getElementById("react-draggable-style-el");a||(a=r.createElement("style"),a.type="text/css",a.id="react-draggable-style-el",a.innerHTML=`.react-draggable-transparent-selection *::-moz-selection {all: inherit;}
`,a.innerHTML+=`.react-draggable-transparent-selection *::selection {all: inherit;}
`,r.getElementsByTagName("head")[0].appendChild(a)),r.body&&Nf(r.body,"react-draggable-transparent-selection")}}function kx(r){if(r)try{if(r.body&&Cf(r.body,"react-draggable-transparent-selection"),r.selection)r.selection.empty();else{var a=(r.defaultView||window).getSelection();a&&a.type!=="Caret"&&a.removeAllRanges()}}catch{}}function Nf(r,a){r.classList?r.classList.add(a):r.className.match(new RegExp("(?:^|\\s)".concat(a,"(?!\\S)")))||(r.className+=" ".concat(a))}function Cf(r,a){r.classList?r.classList.remove(a):r.className=r.className.replace(new RegExp("(?:^|\\s)".concat(a,"(?!\\S)"),"g"),"")}var Gt={};Object.defineProperty(Gt,"__esModule",{value:!0});Gt.canDragX=Wx;Gt.canDragY=Bx;Gt.createCoreData=Gx;Gt.createDraggableData=$x;Gt.getBoundPosition=Fx;Gt.getControlPosition=Hx;Gt.snapToGrid=Ux;var vt=Ht,ar=De;function Fx(r,a,n){if(!r.props.bounds)return[a,n];var s=r.props.bounds;s=typeof s=="string"?s:Vx(s);var l=mo(r);if(typeof s=="string"){var f=l.ownerDocument,d=f.defaultView,p;if(s==="parent"?p=l.parentNode:p=f.querySelector(s),!(p instanceof d.HTMLElement))throw new Error('Bounds selector "'+s+'" could not find an element.');var m=p,v=d.getComputedStyle(l),_=d.getComputedStyle(m);s={left:-l.offsetLeft+(0,vt.int)(_.paddingLeft)+(0,vt.int)(v.marginLeft),top:-l.offsetTop+(0,vt.int)(_.paddingTop)+(0,vt.int)(v.marginTop),right:(0,ar.innerWidth)(m)-(0,ar.outerWidth)(l)-l.offsetLeft+(0,vt.int)(_.paddingRight)-(0,vt.int)(v.marginRight),bottom:(0,ar.innerHeight)(m)-(0,ar.outerHeight)(l)-l.offsetTop+(0,vt.int)(_.paddingBottom)-(0,vt.int)(v.marginBottom)}}return(0,vt.isNum)(s.right)&&(a=Math.min(a,s.right)),(0,vt.isNum)(s.bottom)&&(n=Math.min(n,s.bottom)),(0,vt.isNum)(s.left)&&(a=Math.max(a,s.left)),(0,vt.isNum)(s.top)&&(n=Math.max(n,s.top)),[a,n]}function Ux(r,a,n){var s=Math.round(a/r[0])*r[0],l=Math.round(n/r[1])*r[1];return[s,l]}function Wx(r){return r.props.axis==="both"||r.props.axis==="x"}function Bx(r){return r.props.axis==="both"||r.props.axis==="y"}function Hx(r,a,n){var s=typeof a=="number"?(0,ar.getTouch)(r,a):null;if(typeof a=="number"&&!s)return null;var l=mo(n),f=n.props.offsetParent||l.offsetParent||l.ownerDocument.body;return(0,ar.offsetXYFromParent)(s||r,f,n.props.scale)}function Gx(r,a,n){var s=r.state,l=!(0,vt.isNum)(s.lastX),f=mo(r);return l?{node:f,deltaX:0,deltaY:0,lastX:a,lastY:n,x:a,y:n}:{node:f,deltaX:a-s.lastX,deltaY:n-s.lastY,lastX:s.lastX,lastY:s.lastY,x:a,y:n}}function $x(r,a){var n=r.props.scale;return{node:a.node,x:r.state.x+a.deltaX/n,y:r.state.y+a.deltaY/n,deltaX:a.deltaX/n,deltaY:a.deltaY/n,lastX:r.state.x,lastY:r.state.y}}function Vx(r){return{left:r.left,top:r.top,right:r.right,bottom:r.bottom}}function mo(r){var a=r.findDOMNode();if(!a)throw new Error("<DraggableCore>: Unmounted during event!");return a}var da={},ha={};Object.defineProperty(ha,"__esModule",{value:!0});ha.default=Yx;function Yx(){}function ji(r){"@babel/helpers - typeof";return ji=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(a){return typeof a}:function(a){return a&&typeof Symbol=="function"&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},ji(r)}Object.defineProperty(da,"__esModule",{value:!0});da.default=void 0;var Ws=Xx(P),mt=vo(Kc),Kx=vo(io),Je=De,vn=Gt,Bs=Ht,Tr=vo(ha);function vo(r){return r&&r.__esModule?r:{default:r}}function Of(r){if(typeof WeakMap!="function")return null;var a=new WeakMap,n=new WeakMap;return(Of=function(l){return l?n:a})(r)}function Xx(r,a){if(!a&&r&&r.__esModule)return r;if(r===null||ji(r)!=="object"&&typeof r!="function")return{default:r};var n=Of(a);if(n&&n.has(r))return n.get(r);var s={},l=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var f in r)if(f!=="default"&&Object.prototype.hasOwnProperty.call(r,f)){var d=l?Object.getOwnPropertyDescriptor(r,f):null;d&&(d.get||d.set)?Object.defineProperty(s,f,d):s[f]=r[f]}return s.default=r,n&&n.set(r,s),s}function mc(r,a){return Qx(r)||Zx(r,a)||Jx(r,a)||qx()}function qx(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Jx(r,a){if(r){if(typeof r=="string")return vc(r,a);var n=Object.prototype.toString.call(r).slice(8,-1);if(n==="Object"&&r.constructor&&(n=r.constructor.name),n==="Map"||n==="Set")return Array.from(r);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return vc(r,a)}}function vc(r,a){(a==null||a>r.length)&&(a=r.length);for(var n=0,s=new Array(a);n<a;n++)s[n]=r[n];return s}function Zx(r,a){var n=r==null?null:typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n!=null){var s=[],l=!0,f=!1,d,p;try{for(n=n.call(r);!(l=(d=n.next()).done)&&(s.push(d.value),!(a&&s.length===a));l=!0);}catch(m){f=!0,p=m}finally{try{!l&&n.return!=null&&n.return()}finally{if(f)throw p}}return s}}function Qx(r){if(Array.isArray(r))return r}function jx(r,a){if(!(r instanceof a))throw new TypeError("Cannot call a class as a function")}function yc(r,a){for(var n=0;n<a.length;n++){var s=a[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(r,s.key,s)}}function ew(r,a,n){return a&&yc(r.prototype,a),n&&yc(r,n),Object.defineProperty(r,"prototype",{writable:!1}),r}function tw(r,a){if(typeof a!="function"&&a!==null)throw new TypeError("Super expression must either be null or a function");r.prototype=Object.create(a&&a.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),Object.defineProperty(r,"prototype",{writable:!1}),a&&Qs(r,a)}function Qs(r,a){return Qs=Object.setPrototypeOf||function(s,l){return s.__proto__=l,s},Qs(r,a)}function nw(r){var a=iw();return function(){var s=ea(r),l;if(a){var f=ea(this).constructor;l=Reflect.construct(s,arguments,f)}else l=s.apply(this,arguments);return rw(this,l)}}function rw(r,a){if(a&&(ji(a)==="object"||typeof a=="function"))return a;if(a!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Ze(r)}function Ze(r){if(r===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}function iw(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function ea(r){return ea=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},ea(r)}function Rt(r,a,n){return a in r?Object.defineProperty(r,a,{value:n,enumerable:!0,configurable:!0,writable:!0}):r[a]=n,r}var Mt={touch:{start:"touchstart",move:"touchmove",stop:"touchend"},mouse:{start:"mousedown",move:"mousemove",stop:"mouseup"}},yn=Mt.mouse,pa=function(r){tw(n,r);var a=nw(n);function n(){var s;jx(this,n);for(var l=arguments.length,f=new Array(l),d=0;d<l;d++)f[d]=arguments[d];return s=a.call.apply(a,[this].concat(f)),Rt(Ze(s),"state",{dragging:!1,lastX:NaN,lastY:NaN,touchIdentifier:null}),Rt(Ze(s),"mounted",!1),Rt(Ze(s),"handleDragStart",function(p){if(s.props.onMouseDown(p),!s.props.allowAnyClick&&typeof p.button=="number"&&p.button!==0)return!1;var m=s.findDOMNode();if(!m||!m.ownerDocument||!m.ownerDocument.body)throw new Error("<DraggableCore> not mounted on DragStart!");var v=m.ownerDocument;if(!(s.props.disabled||!(p.target instanceof v.defaultView.Node)||s.props.handle&&!(0,Je.matchesSelectorAndParentsTo)(p.target,s.props.handle,m)||s.props.cancel&&(0,Je.matchesSelectorAndParentsTo)(p.target,s.props.cancel,m))){p.type==="touchstart"&&p.preventDefault();var _=(0,Je.getTouchIdentifier)(p);s.setState({touchIdentifier:_});var b=(0,vn.getControlPosition)(p,_,Ze(s));if(b!=null){var w=b.x,S=b.y,A=(0,vn.createCoreData)(Ze(s),w,S);(0,Tr.default)("DraggableCore: handleDragStart: %j",A),(0,Tr.default)("calling",s.props.onStart);var R=s.props.onStart(p,A);R===!1||s.mounted===!1||(s.props.enableUserSelectHack&&(0,Je.addUserSelectStyles)(v),s.setState({dragging:!0,lastX:w,lastY:S}),(0,Je.addEvent)(v,yn.move,s.handleDrag),(0,Je.addEvent)(v,yn.stop,s.handleDragStop))}}}),Rt(Ze(s),"handleDrag",function(p){var m=(0,vn.getControlPosition)(p,s.state.touchIdentifier,Ze(s));if(m!=null){var v=m.x,_=m.y;if(Array.isArray(s.props.grid)){var b=v-s.state.lastX,w=_-s.state.lastY,S=(0,vn.snapToGrid)(s.props.grid,b,w),A=mc(S,2);if(b=A[0],w=A[1],!b&&!w)return;v=s.state.lastX+b,_=s.state.lastY+w}var R=(0,vn.createCoreData)(Ze(s),v,_);(0,Tr.default)("DraggableCore: handleDrag: %j",R);var I=s.props.onDrag(p,R);if(I===!1||s.mounted===!1){try{s.handleDragStop(new MouseEvent("mouseup"))}catch{var L=document.createEvent("MouseEvents");L.initMouseEvent("mouseup",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),s.handleDragStop(L)}return}s.setState({lastX:v,lastY:_})}}),Rt(Ze(s),"handleDragStop",function(p){if(s.state.dragging){var m=(0,vn.getControlPosition)(p,s.state.touchIdentifier,Ze(s));if(m!=null){var v=m.x,_=m.y;if(Array.isArray(s.props.grid)){var b=v-s.state.lastX||0,w=_-s.state.lastY||0,S=(0,vn.snapToGrid)(s.props.grid,b,w),A=mc(S,2);b=A[0],w=A[1],v=s.state.lastX+b,_=s.state.lastY+w}var R=(0,vn.createCoreData)(Ze(s),v,_),I=s.props.onStop(p,R);if(I===!1||s.mounted===!1)return!1;var L=s.findDOMNode();L&&s.props.enableUserSelectHack&&(0,Je.removeUserSelectStyles)(L.ownerDocument),(0,Tr.default)("DraggableCore: handleDragStop: %j",R),s.setState({dragging:!1,lastX:NaN,lastY:NaN}),L&&((0,Tr.default)("DraggableCore: Removing handlers"),(0,Je.removeEvent)(L.ownerDocument,yn.move,s.handleDrag),(0,Je.removeEvent)(L.ownerDocument,yn.stop,s.handleDragStop))}}}),Rt(Ze(s),"onMouseDown",function(p){return yn=Mt.mouse,s.handleDragStart(p)}),Rt(Ze(s),"onMouseUp",function(p){return yn=Mt.mouse,s.handleDragStop(p)}),Rt(Ze(s),"onTouchStart",function(p){return yn=Mt.touch,s.handleDragStart(p)}),Rt(Ze(s),"onTouchEnd",function(p){return yn=Mt.touch,s.handleDragStop(p)}),s}return ew(n,[{key:"componentDidMount",value:function(){this.mounted=!0;var l=this.findDOMNode();l&&(0,Je.addEvent)(l,Mt.touch.start,this.onTouchStart,{passive:!1})}},{key:"componentWillUnmount",value:function(){this.mounted=!1;var l=this.findDOMNode();if(l){var f=l.ownerDocument;(0,Je.removeEvent)(f,Mt.mouse.move,this.handleDrag),(0,Je.removeEvent)(f,Mt.touch.move,this.handleDrag),(0,Je.removeEvent)(f,Mt.mouse.stop,this.handleDragStop),(0,Je.removeEvent)(f,Mt.touch.stop,this.handleDragStop),(0,Je.removeEvent)(l,Mt.touch.start,this.onTouchStart,{passive:!1}),this.props.enableUserSelectHack&&(0,Je.removeUserSelectStyles)(f)}}},{key:"findDOMNode",value:function(){var l,f,d;return(l=this.props)!==null&&l!==void 0&&l.nodeRef?(f=this.props)===null||f===void 0||(d=f.nodeRef)===null||d===void 0?void 0:d.current:Kx.default.findDOMNode(this)}},{key:"render",value:function(){return Ws.cloneElement(Ws.Children.only(this.props.children),{onMouseDown:this.onMouseDown,onMouseUp:this.onMouseUp,onTouchEnd:this.onTouchEnd})}}]),n}(Ws.Component);da.default=pa;Rt(pa,"displayName","DraggableCore");Rt(pa,"propTypes",{allowAnyClick:mt.default.bool,disabled:mt.default.bool,enableUserSelectHack:mt.default.bool,offsetParent:function(a,n){if(a[n]&&a[n].nodeType!==1)throw new Error("Draggable's offsetParent must be a DOM Node.")},grid:mt.default.arrayOf(mt.default.number),handle:mt.default.string,cancel:mt.default.string,nodeRef:mt.default.object,onStart:mt.default.func,onDrag:mt.default.func,onStop:mt.default.func,onMouseDown:mt.default.func,scale:mt.default.number,className:Bs.dontSetMe,style:Bs.dontSetMe,transform:Bs.dontSetMe});Rt(pa,"defaultProps",{allowAnyClick:!1,disabled:!1,enableUserSelectHack:!0,onStart:function(){},onDrag:function(){},onStop:function(){},onMouseDown:function(){},scale:1});(function(r){function a(O){"@babel/helpers - typeof";return a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(k){return typeof k}:function(k){return k&&typeof Symbol=="function"&&k.constructor===Symbol&&k!==Symbol.prototype?"symbol":typeof k},a(O)}Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"DraggableCore",{enumerable:!0,get:function(){return v.default}}),r.default=void 0;var n=A(P),s=w(Kc),l=w(io),f=w(px),d=De,p=Gt,m=Ht,v=w(da),_=w(ha),b=["axis","bounds","children","defaultPosition","defaultClassName","defaultClassNameDragging","defaultClassNameDragged","position","positionOffset","scale"];function w(O){return O&&O.__esModule?O:{default:O}}function S(O){if(typeof WeakMap!="function")return null;var k=new WeakMap,H=new WeakMap;return(S=function(B){return B?H:k})(O)}function A(O,k){if(!k&&O&&O.__esModule)return O;if(O===null||a(O)!=="object"&&typeof O!="function")return{default:O};var H=S(k);if(H&&H.has(O))return H.get(O);var W={},B=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var X in O)if(X!=="default"&&Object.prototype.hasOwnProperty.call(O,X)){var J=B?Object.getOwnPropertyDescriptor(O,X):null;J&&(J.get||J.set)?Object.defineProperty(W,X,J):W[X]=O[X]}return W.default=O,H&&H.set(O,W),W}function R(){return R=Object.assign||function(O){for(var k=1;k<arguments.length;k++){var H=arguments[k];for(var W in H)Object.prototype.hasOwnProperty.call(H,W)&&(O[W]=H[W])}return O},R.apply(this,arguments)}function I(O,k){if(O==null)return{};var H=L(O,k),W,B;if(Object.getOwnPropertySymbols){var X=Object.getOwnPropertySymbols(O);for(B=0;B<X.length;B++)W=X[B],!(k.indexOf(W)>=0)&&Object.prototype.propertyIsEnumerable.call(O,W)&&(H[W]=O[W])}return H}function L(O,k){if(O==null)return{};var H={},W=Object.keys(O),B,X;for(X=0;X<W.length;X++)B=W[X],!(k.indexOf(B)>=0)&&(H[B]=O[B]);return H}function $(O,k){var H=Object.keys(O);if(Object.getOwnPropertySymbols){var W=Object.getOwnPropertySymbols(O);k&&(W=W.filter(function(B){return Object.getOwnPropertyDescriptor(O,B).enumerable})),H.push.apply(H,W)}return H}function U(O){for(var k=1;k<arguments.length;k++){var H=arguments[k]!=null?arguments[k]:{};k%2?$(Object(H),!0).forEach(function(W){He(O,W,H[W])}):Object.getOwnPropertyDescriptors?Object.defineProperties(O,Object.getOwnPropertyDescriptors(H)):$(Object(H)).forEach(function(W){Object.defineProperty(O,W,Object.getOwnPropertyDescriptor(H,W))})}return O}function Y(O,k){return Ce(O)||he(O,k)||ne(O,k)||Z()}function Z(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ne(O,k){if(O){if(typeof O=="string")return ue(O,k);var H=Object.prototype.toString.call(O).slice(8,-1);if(H==="Object"&&O.constructor&&(H=O.constructor.name),H==="Map"||H==="Set")return Array.from(O);if(H==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(H))return ue(O,k)}}function ue(O,k){(k==null||k>O.length)&&(k=O.length);for(var H=0,W=new Array(k);H<k;H++)W[H]=O[H];return W}function he(O,k){var H=O==null?null:typeof Symbol<"u"&&O[Symbol.iterator]||O["@@iterator"];if(H!=null){var W=[],B=!0,X=!1,J,ae;try{for(H=H.call(O);!(B=(J=H.next()).done)&&(W.push(J.value),!(k&&W.length===k));B=!0);}catch(pe){X=!0,ae=pe}finally{try{!B&&H.return!=null&&H.return()}finally{if(X)throw ae}}return W}}function Ce(O){if(Array.isArray(O))return O}function Ee(O,k){if(!(O instanceof k))throw new TypeError("Cannot call a class as a function")}function Le(O,k){for(var H=0;H<k.length;H++){var W=k[H];W.enumerable=W.enumerable||!1,W.configurable=!0,"value"in W&&(W.writable=!0),Object.defineProperty(O,W.key,W)}}function me(O,k,H){return k&&Le(O.prototype,k),H&&Le(O,H),Object.defineProperty(O,"prototype",{writable:!1}),O}function Me(O,k){if(typeof k!="function"&&k!==null)throw new TypeError("Super expression must either be null or a function");O.prototype=Object.create(k&&k.prototype,{constructor:{value:O,writable:!0,configurable:!0}}),Object.defineProperty(O,"prototype",{writable:!1}),k&&tt(O,k)}function tt(O,k){return tt=Object.setPrototypeOf||function(W,B){return W.__proto__=B,W},tt(O,k)}function nt(O){var k=ut();return function(){var W=$t(O),B;if(k){var X=$t(this).constructor;B=Reflect.construct(W,arguments,X)}else B=W.apply(this,arguments);return wn(this,B)}}function wn(O,k){if(k&&(a(k)==="object"||typeof k=="function"))return k;if(k!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ze(O)}function ze(O){if(O===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return O}function ut(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function $t(O){return $t=Object.setPrototypeOf?Object.getPrototypeOf:function(H){return H.__proto__||Object.getPrototypeOf(H)},$t(O)}function He(O,k,H){return k in O?Object.defineProperty(O,k,{value:H,enumerable:!0,configurable:!0,writable:!0}):O[k]=H,O}var G=function(O){Me(H,O);var k=nt(H);function H(W){var B;return Ee(this,H),B=k.call(this,W),He(ze(B),"onDragStart",function(X,J){(0,_.default)("Draggable: onDragStart: %j",J);var ae=B.props.onStart(X,(0,p.createDraggableData)(ze(B),J));if(ae===!1)return!1;B.setState({dragging:!0,dragged:!0})}),He(ze(B),"onDrag",function(X,J){if(!B.state.dragging)return!1;(0,_.default)("Draggable: onDrag: %j",J);var ae=(0,p.createDraggableData)(ze(B),J),pe={x:ae.x,y:ae.y};if(B.props.bounds){var Lt=pe.x,Pt=pe.y;pe.x+=B.state.slackX,pe.y+=B.state.slackY;var Vt=(0,p.getBoundPosition)(ze(B),pe.x,pe.y),ke=Y(Vt,2),Yt=ke[0],Bn=ke[1];pe.x=Yt,pe.y=Bn,pe.slackX=B.state.slackX+(Lt-pe.x),pe.slackY=B.state.slackY+(Pt-pe.y),ae.x=pe.x,ae.y=pe.y,ae.deltaX=pe.x-B.state.x,ae.deltaY=pe.y-B.state.y}var rt=B.props.onDrag(X,ae);if(rt===!1)return!1;B.setState(pe)}),He(ze(B),"onDragStop",function(X,J){if(!B.state.dragging)return!1;var ae=B.props.onStop(X,(0,p.createDraggableData)(ze(B),J));if(ae===!1)return!1;(0,_.default)("Draggable: onDragStop: %j",J);var pe={dragging:!1,slackX:0,slackY:0},Lt=!!B.props.position;if(Lt){var Pt=B.props.position,Vt=Pt.x,ke=Pt.y;pe.x=Vt,pe.y=ke}B.setState(pe)}),B.state={dragging:!1,dragged:!1,x:W.position?W.position.x:W.defaultPosition.x,y:W.position?W.position.y:W.defaultPosition.y,prevPropsPosition:U({},W.position),slackX:0,slackY:0,isElementSVG:!1},W.position&&!(W.onDrag||W.onStop)&&console.warn("A `position` was applied to this <Draggable>, without drag handlers. This will make this component effectively undraggable. Please attach `onDrag` or `onStop` handlers so you can adjust the `position` of this element."),B}return me(H,[{key:"componentDidMount",value:function(){typeof window.SVGElement<"u"&&this.findDOMNode()instanceof window.SVGElement&&this.setState({isElementSVG:!0})}},{key:"componentWillUnmount",value:function(){this.setState({dragging:!1})}},{key:"findDOMNode",value:function(){var B,X,J;return(B=(X=this.props)===null||X===void 0||(J=X.nodeRef)===null||J===void 0?void 0:J.current)!==null&&B!==void 0?B:l.default.findDOMNode(this)}},{key:"render",value:function(){var B,X=this.props;X.axis,X.bounds;var J=X.children,ae=X.defaultPosition,pe=X.defaultClassName,Lt=X.defaultClassNameDragging,Pt=X.defaultClassNameDragged,Vt=X.position,ke=X.positionOffset;X.scale;var Yt=I(X,b),Bn={},rt=null,Gr=!!Vt,$r=!Gr||this.state.dragging,on=Vt||ae,it={x:(0,p.canDragX)(this)&&$r?this.state.x:on.x,y:(0,p.canDragY)(this)&&$r?this.state.y:on.y};this.state.isElementSVG?rt=(0,d.createSVGTransform)(it,ke):Bn=(0,d.createCSSTransform)(it,ke);var Sn=(0,f.default)(J.props.className||"",pe,(B={},He(B,Lt,this.state.dragging),He(B,Pt,this.state.dragged),B));return n.createElement(v.default,R({},Yt,{onStart:this.onDragStart,onDrag:this.onDrag,onStop:this.onDragStop}),n.cloneElement(n.Children.only(J),{className:Sn,style:U(U({},J.props.style),Bn),transform:rt}))}}],[{key:"getDerivedStateFromProps",value:function(B,X){var J=B.position,ae=X.prevPropsPosition;return J&&(!ae||J.x!==ae.x||J.y!==ae.y)?((0,_.default)("Draggable: getDerivedStateFromProps %j",{position:J,prevPropsPosition:ae}),{x:J.x,y:J.y,prevPropsPosition:U({},J)}):null}}]),H}(n.Component);r.default=G,He(G,"displayName","Draggable"),He(G,"propTypes",U(U({},v.default.propTypes),{},{axis:s.default.oneOf(["both","x","y","none"]),bounds:s.default.oneOfType([s.default.shape({left:s.default.number,right:s.default.number,top:s.default.number,bottom:s.default.number}),s.default.string,s.default.oneOf([!1])]),defaultClassName:s.default.string,defaultClassNameDragging:s.default.string,defaultClassNameDragged:s.default.string,defaultPosition:s.default.shape({x:s.default.number,y:s.default.number}),positionOffset:s.default.shape({x:s.default.oneOfType([s.default.number,s.default.string]),y:s.default.oneOfType([s.default.number,s.default.string])}),position:s.default.shape({x:s.default.number,y:s.default.number}),className:m.dontSetMe,style:m.dontSetMe,transform:m.dontSetMe})),He(G,"defaultProps",U(U({},v.default.defaultProps),{},{axis:"both",bounds:!1,defaultClassName:"react-draggable",defaultClassNameDragging:"react-draggable-dragging",defaultClassNameDragged:"react-draggable-dragged",defaultPosition:{x:0,y:0},scale:1}))})(vf);var Ef=vf,Rf=Ef.default,aw=Ef.DraggableCore;fa.exports=Rf;fa.exports.default=Rf;fa.exports.DraggableCore=aw;var sw=fa.exports;const ow=Xc(sw);var lw=globalThis&&globalThis.__extends||function(){var r=function(a,n){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,l){s.__proto__=l}||function(s,l){for(var f in l)Object.prototype.hasOwnProperty.call(l,f)&&(s[f]=l[f])},r(a,n)};return function(a,n){r(a,n);function s(){this.constructor=a}a.prototype=n===null?Object.create(n):(s.prototype=n.prototype,new s)}}(),ta=globalThis&&globalThis.__assign||function(){return ta=Object.assign||function(r){for(var a,n=1,s=arguments.length;n<s;n++){a=arguments[n];for(var l in a)Object.prototype.hasOwnProperty.call(a,l)&&(r[l]=a[l])}return r},ta.apply(this,arguments)},uw={top:{width:"100%",height:"10px",top:"-5px",left:"0px",cursor:"row-resize"},right:{width:"10px",height:"100%",top:"0px",right:"-5px",cursor:"col-resize"},bottom:{width:"100%",height:"10px",bottom:"-5px",left:"0px",cursor:"row-resize"},left:{width:"10px",height:"100%",top:"0px",left:"-5px",cursor:"col-resize"},topRight:{width:"20px",height:"20px",position:"absolute",right:"-10px",top:"-10px",cursor:"ne-resize"},bottomRight:{width:"20px",height:"20px",position:"absolute",right:"-10px",bottom:"-10px",cursor:"se-resize"},bottomLeft:{width:"20px",height:"20px",position:"absolute",left:"-10px",bottom:"-10px",cursor:"sw-resize"},topLeft:{width:"20px",height:"20px",position:"absolute",left:"-10px",top:"-10px",cursor:"nw-resize"}},cw=function(r){lw(a,r);function a(){var n=r!==null&&r.apply(this,arguments)||this;return n.onMouseDown=function(s){n.props.onResizeStart(s,n.props.direction)},n.onTouchStart=function(s){n.props.onResizeStart(s,n.props.direction)},n}return a.prototype.render=function(){return P.createElement("div",{className:this.props.className||"",style:ta(ta({position:"absolute",userSelect:"none"},uw[this.props.direction]),this.props.replaceStyles||{}),onMouseDown:this.onMouseDown,onTouchStart:this.onTouchStart},this.props.children)},a}(P.PureComponent),yo={exports:{}};function fw(r,a){var n=a&&a.cache?a.cache:vw,s=a&&a.serializer?a.serializer:mw,l=a&&a.strategy?a.strategy:hw;return l(r,{cache:n,serializer:s})}function dw(r){return r==null||typeof r=="number"||typeof r=="boolean"}function Pf(r,a,n,s){var l=dw(s)?s:n(s),f=a.get(l);return typeof f>"u"&&(f=r.call(this,s),a.set(l,f)),f}function Df(r,a,n){var s=Array.prototype.slice.call(arguments,3),l=n(s),f=a.get(l);return typeof f>"u"&&(f=r.apply(this,s),a.set(l,f)),f}function bo(r,a,n,s,l){return n.bind(a,r,s,l)}function hw(r,a){var n=r.length===1?Pf:Df;return bo(r,this,n,a.cache.create(),a.serializer)}function pw(r,a){var n=Df;return bo(r,this,n,a.cache.create(),a.serializer)}function gw(r,a){var n=Pf;return bo(r,this,n,a.cache.create(),a.serializer)}function mw(){return JSON.stringify(arguments)}function ga(){this.cache=Object.create(null)}ga.prototype.has=function(r){return r in this.cache};ga.prototype.get=function(r){return this.cache[r]};ga.prototype.set=function(r,a){this.cache[r]=a};var vw={create:function(){return new ga}};yo.exports=fw;yo.exports.strategies={variadic:pw,monadic:gw};var yw=yo.exports;const Un=Xc(yw);var bw=globalThis&&globalThis.__extends||function(){var r=function(a,n){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,l){s.__proto__=l}||function(s,l){for(var f in l)Object.prototype.hasOwnProperty.call(l,f)&&(s[f]=l[f])},r(a,n)};return function(a,n){r(a,n);function s(){this.constructor=a}a.prototype=n===null?Object.create(n):(s.prototype=n.prototype,new s)}}(),Wt=globalThis&&globalThis.__assign||function(){return Wt=Object.assign||function(r){for(var a,n=1,s=arguments.length;n<s;n++){a=arguments[n];for(var l in a)Object.prototype.hasOwnProperty.call(a,l)&&(r[l]=a[l])}return r},Wt.apply(this,arguments)},_w={width:"auto",height:"auto"},ki=Un(function(r,a,n){return Math.max(Math.min(r,n),a)}),bc=Un(function(r,a){return Math.round(r/a)*a}),rr=Un(function(r,a){return new RegExp(r,"i").test(a)}),Fi=function(r){return!!(r.touches&&r.touches.length)},xw=function(r){return!!((r.clientX||r.clientX===0)&&(r.clientY||r.clientY===0))},_c=Un(function(r,a,n){n===void 0&&(n=0);var s=a.reduce(function(f,d,p){return Math.abs(d-r)<Math.abs(a[f]-r)?p:f},0),l=Math.abs(a[s]-r);return n===0||l<n?a[s]:r}),$e=Un(function(r,a){return r.substr(r.length-a.length,a.length)===a}),Hs=Un(function(r){return r=r.toString(),r==="auto"||$e(r,"px")||$e(r,"%")||$e(r,"vh")||$e(r,"vw")||$e(r,"vmax")||$e(r,"vmin")?r:r+"px"}),Ui=function(r,a,n,s){if(r&&typeof r=="string"){if($e(r,"px"))return Number(r.replace("px",""));if($e(r,"%")){var l=Number(r.replace("%",""))/100;return a*l}if($e(r,"vw")){var l=Number(r.replace("vw",""))/100;return n*l}if($e(r,"vh")){var l=Number(r.replace("vh",""))/100;return s*l}}return r},ww=Un(function(r,a,n,s,l,f,d){return s=Ui(s,r.width,a,n),l=Ui(l,r.height,a,n),f=Ui(f,r.width,a,n),d=Ui(d,r.height,a,n),{maxWidth:typeof s>"u"?void 0:Number(s),maxHeight:typeof l>"u"?void 0:Number(l),minWidth:typeof f>"u"?void 0:Number(f),minHeight:typeof d>"u"?void 0:Number(d)}}),Sw=["as","style","className","grid","snap","bounds","boundsByDirection","size","defaultSize","minWidth","minHeight","maxWidth","maxHeight","lockAspectRatio","lockAspectRatioExtraWidth","lockAspectRatioExtraHeight","enable","handleStyles","handleClasses","handleWrapperStyle","handleWrapperClass","children","onResizeStart","onResize","onResizeStop","handleComponent","scale","resizeRatio","snapGap"],xc="__resizable_base__",Nw=function(r){bw(a,r);function a(n){var s=r.call(this,n)||this;return s.ratio=1,s.resizable=null,s.parentLeft=0,s.parentTop=0,s.resizableLeft=0,s.resizableRight=0,s.resizableTop=0,s.resizableBottom=0,s.targetLeft=0,s.targetTop=0,s.appendBase=function(){if(!s.resizable||!s.window)return null;var l=s.parentNode;if(!l)return null;var f=s.window.document.createElement("div");return f.style.width="100%",f.style.height="100%",f.style.position="absolute",f.style.transform="scale(0, 0)",f.style.left="0",f.style.flex="0 0 100%",f.classList?f.classList.add(xc):f.className+=xc,l.appendChild(f),f},s.removeBase=function(l){var f=s.parentNode;f&&f.removeChild(l)},s.ref=function(l){l&&(s.resizable=l)},s.state={isResizing:!1,width:typeof(s.propsSize&&s.propsSize.width)>"u"?"auto":s.propsSize&&s.propsSize.width,height:typeof(s.propsSize&&s.propsSize.height)>"u"?"auto":s.propsSize&&s.propsSize.height,direction:"right",original:{x:0,y:0,width:0,height:0},backgroundStyle:{height:"100%",width:"100%",backgroundColor:"rgba(0,0,0,0)",cursor:"auto",opacity:0,position:"fixed",zIndex:9999,top:"0",left:"0",bottom:"0",right:"0"},flexBasis:void 0},s.onResizeStart=s.onResizeStart.bind(s),s.onMouseMove=s.onMouseMove.bind(s),s.onMouseUp=s.onMouseUp.bind(s),s}return Object.defineProperty(a.prototype,"parentNode",{get:function(){return this.resizable?this.resizable.parentNode:null},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"window",{get:function(){return!this.resizable||!this.resizable.ownerDocument?null:this.resizable.ownerDocument.defaultView},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"propsSize",{get:function(){return this.props.size||this.props.defaultSize||_w},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"size",{get:function(){var n=0,s=0;if(this.resizable&&this.window){var l=this.resizable.offsetWidth,f=this.resizable.offsetHeight,d=this.resizable.style.position;d!=="relative"&&(this.resizable.style.position="relative"),n=this.resizable.style.width!=="auto"?this.resizable.offsetWidth:l,s=this.resizable.style.height!=="auto"?this.resizable.offsetHeight:f,this.resizable.style.position=d}return{width:n,height:s}},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"sizeStyle",{get:function(){var n=this,s=this.props.size,l=function(p){if(typeof n.state[p]>"u"||n.state[p]==="auto")return"auto";if(n.propsSize&&n.propsSize[p]&&$e(n.propsSize[p].toString(),"%")){if($e(n.state[p].toString(),"%"))return n.state[p].toString();var m=n.getParentSize(),v=Number(n.state[p].toString().replace("px","")),_=v/m[p]*100;return _+"%"}return Hs(n.state[p])},f=s&&typeof s.width<"u"&&!this.state.isResizing?Hs(s.width):l("width"),d=s&&typeof s.height<"u"&&!this.state.isResizing?Hs(s.height):l("height");return{width:f,height:d}},enumerable:!1,configurable:!0}),a.prototype.getParentSize=function(){if(!this.parentNode)return this.window?{width:this.window.innerWidth,height:this.window.innerHeight}:{width:0,height:0};var n=this.appendBase();if(!n)return{width:0,height:0};var s=!1,l=this.parentNode.style.flexWrap;l!=="wrap"&&(s=!0,this.parentNode.style.flexWrap="wrap"),n.style.position="relative",n.style.minWidth="100%",n.style.minHeight="100%";var f={width:n.offsetWidth,height:n.offsetHeight};return s&&(this.parentNode.style.flexWrap=l),this.removeBase(n),f},a.prototype.bindEvents=function(){this.window&&(this.window.addEventListener("mouseup",this.onMouseUp),this.window.addEventListener("mousemove",this.onMouseMove),this.window.addEventListener("mouseleave",this.onMouseUp),this.window.addEventListener("touchmove",this.onMouseMove,{capture:!0,passive:!1}),this.window.addEventListener("touchend",this.onMouseUp))},a.prototype.unbindEvents=function(){this.window&&(this.window.removeEventListener("mouseup",this.onMouseUp),this.window.removeEventListener("mousemove",this.onMouseMove),this.window.removeEventListener("mouseleave",this.onMouseUp),this.window.removeEventListener("touchmove",this.onMouseMove,!0),this.window.removeEventListener("touchend",this.onMouseUp))},a.prototype.componentDidMount=function(){if(!(!this.resizable||!this.window)){var n=this.window.getComputedStyle(this.resizable);this.setState({width:this.state.width||this.size.width,height:this.state.height||this.size.height,flexBasis:n.flexBasis!=="auto"?n.flexBasis:void 0})}},a.prototype.componentWillUnmount=function(){this.window&&this.unbindEvents()},a.prototype.createSizeForCssProperty=function(n,s){var l=this.propsSize&&this.propsSize[s];return this.state[s]==="auto"&&this.state.original[s]===n&&(typeof l>"u"||l==="auto")?"auto":n},a.prototype.calculateNewMaxFromBoundary=function(n,s){var l=this.props.boundsByDirection,f=this.state.direction,d=l&&rr("left",f),p=l&&rr("top",f),m,v;if(this.props.bounds==="parent"){var _=this.parentNode;_&&(m=d?this.resizableRight-this.parentLeft:_.offsetWidth+(this.parentLeft-this.resizableLeft),v=p?this.resizableBottom-this.parentTop:_.offsetHeight+(this.parentTop-this.resizableTop))}else this.props.bounds==="window"?this.window&&(m=d?this.resizableRight:this.window.innerWidth-this.resizableLeft,v=p?this.resizableBottom:this.window.innerHeight-this.resizableTop):this.props.bounds&&(m=d?this.resizableRight-this.targetLeft:this.props.bounds.offsetWidth+(this.targetLeft-this.resizableLeft),v=p?this.resizableBottom-this.targetTop:this.props.bounds.offsetHeight+(this.targetTop-this.resizableTop));return m&&Number.isFinite(m)&&(n=n&&n<m?n:m),v&&Number.isFinite(v)&&(s=s&&s<v?s:v),{maxWidth:n,maxHeight:s}},a.prototype.calculateNewSizeFromDirection=function(n,s){var l=this.props.scale||1,f=this.props.resizeRatio||1,d=this.state,p=d.direction,m=d.original,v=this.props,_=v.lockAspectRatio,b=v.lockAspectRatioExtraHeight,w=v.lockAspectRatioExtraWidth,S=m.width,A=m.height,R=b||0,I=w||0;return rr("right",p)&&(S=m.width+(n-m.x)*f/l,_&&(A=(S-I)/this.ratio+R)),rr("left",p)&&(S=m.width-(n-m.x)*f/l,_&&(A=(S-I)/this.ratio+R)),rr("bottom",p)&&(A=m.height+(s-m.y)*f/l,_&&(S=(A-R)*this.ratio+I)),rr("top",p)&&(A=m.height-(s-m.y)*f/l,_&&(S=(A-R)*this.ratio+I)),{newWidth:S,newHeight:A}},a.prototype.calculateNewSizeFromAspectRatio=function(n,s,l,f){var d=this.props,p=d.lockAspectRatio,m=d.lockAspectRatioExtraHeight,v=d.lockAspectRatioExtraWidth,_=typeof f.width>"u"?10:f.width,b=typeof l.width>"u"||l.width<0?n:l.width,w=typeof f.height>"u"?10:f.height,S=typeof l.height>"u"||l.height<0?s:l.height,A=m||0,R=v||0;if(p){var I=(w-A)*this.ratio+R,L=(S-A)*this.ratio+R,$=(_-R)/this.ratio+A,U=(b-R)/this.ratio+A,Y=Math.max(_,I),Z=Math.min(b,L),ne=Math.max(w,$),ue=Math.min(S,U);n=ki(n,Y,Z),s=ki(s,ne,ue)}else n=ki(n,_,b),s=ki(s,w,S);return{newWidth:n,newHeight:s}},a.prototype.setBoundingClientRect=function(){if(this.props.bounds==="parent"){var n=this.parentNode;if(n){var s=n.getBoundingClientRect();this.parentLeft=s.left,this.parentTop=s.top}}if(this.props.bounds&&typeof this.props.bounds!="string"){var l=this.props.bounds.getBoundingClientRect();this.targetLeft=l.left,this.targetTop=l.top}if(this.resizable){var f=this.resizable.getBoundingClientRect(),d=f.left,p=f.top,m=f.right,v=f.bottom;this.resizableLeft=d,this.resizableRight=m,this.resizableTop=p,this.resizableBottom=v}},a.prototype.onResizeStart=function(n,s){if(!(!this.resizable||!this.window)){var l=0,f=0;if(n.nativeEvent&&xw(n.nativeEvent)?(l=n.nativeEvent.clientX,f=n.nativeEvent.clientY):n.nativeEvent&&Fi(n.nativeEvent)&&(l=n.nativeEvent.touches[0].clientX,f=n.nativeEvent.touches[0].clientY),this.props.onResizeStart&&this.resizable){var d=this.props.onResizeStart(n,s,this.resizable);if(d===!1)return}this.props.size&&(typeof this.props.size.height<"u"&&this.props.size.height!==this.state.height&&this.setState({height:this.props.size.height}),typeof this.props.size.width<"u"&&this.props.size.width!==this.state.width&&this.setState({width:this.props.size.width})),this.ratio=typeof this.props.lockAspectRatio=="number"?this.props.lockAspectRatio:this.size.width/this.size.height;var p,m=this.window.getComputedStyle(this.resizable);if(m.flexBasis!=="auto"){var v=this.parentNode;if(v){var _=this.window.getComputedStyle(v).flexDirection;this.flexDir=_.startsWith("row")?"row":"column",p=m.flexBasis}}this.setBoundingClientRect(),this.bindEvents();var b={original:{x:l,y:f,width:this.size.width,height:this.size.height},isResizing:!0,backgroundStyle:Wt(Wt({},this.state.backgroundStyle),{cursor:this.window.getComputedStyle(n.target).cursor||"auto"}),direction:s,flexBasis:p};this.setState(b)}},a.prototype.onMouseMove=function(n){if(!(!this.state.isResizing||!this.resizable||!this.window)){if(this.window.TouchEvent&&Fi(n))try{n.preventDefault(),n.stopPropagation()}catch{}var s=this.props,l=s.maxWidth,f=s.maxHeight,d=s.minWidth,p=s.minHeight,m=Fi(n)?n.touches[0].clientX:n.clientX,v=Fi(n)?n.touches[0].clientY:n.clientY,_=this.state,b=_.direction,w=_.original,S=_.width,A=_.height,R=this.getParentSize(),I=ww(R,this.window.innerWidth,this.window.innerHeight,l,f,d,p);l=I.maxWidth,f=I.maxHeight,d=I.minWidth,p=I.minHeight;var L=this.calculateNewSizeFromDirection(m,v),$=L.newHeight,U=L.newWidth,Y=this.calculateNewMaxFromBoundary(l,f);this.props.snap&&this.props.snap.x&&(U=_c(U,this.props.snap.x,this.props.snapGap)),this.props.snap&&this.props.snap.y&&($=_c($,this.props.snap.y,this.props.snapGap));var Z=this.calculateNewSizeFromAspectRatio(U,$,{width:Y.maxWidth,height:Y.maxHeight},{width:d,height:p});if(U=Z.newWidth,$=Z.newHeight,this.props.grid){var ne=bc(U,this.props.grid[0]),ue=bc($,this.props.grid[1]),he=this.props.snapGap||0;U=he===0||Math.abs(ne-U)<=he?ne:U,$=he===0||Math.abs(ue-$)<=he?ue:$}var Ce={width:U-w.width,height:$-w.height};if(S&&typeof S=="string"){if($e(S,"%")){var Ee=U/R.width*100;U=Ee+"%"}else if($e(S,"vw")){var Le=U/this.window.innerWidth*100;U=Le+"vw"}else if($e(S,"vh")){var me=U/this.window.innerHeight*100;U=me+"vh"}}if(A&&typeof A=="string"){if($e(A,"%")){var Ee=$/R.height*100;$=Ee+"%"}else if($e(A,"vw")){var Le=$/this.window.innerWidth*100;$=Le+"vw"}else if($e(A,"vh")){var me=$/this.window.innerHeight*100;$=me+"vh"}}var Me={width:this.createSizeForCssProperty(U,"width"),height:this.createSizeForCssProperty($,"height")};this.flexDir==="row"?Me.flexBasis=Me.width:this.flexDir==="column"&&(Me.flexBasis=Me.height),this.setState(Me),this.props.onResize&&this.props.onResize(n,b,this.resizable,Ce)}},a.prototype.onMouseUp=function(n){var s=this.state,l=s.isResizing,f=s.direction,d=s.original;if(!(!l||!this.resizable)){var p={width:this.size.width-d.width,height:this.size.height-d.height};this.props.onResizeStop&&this.props.onResizeStop(n,f,this.resizable,p),this.props.size&&this.setState(this.props.size),this.unbindEvents(),this.setState({isResizing:!1,backgroundStyle:Wt(Wt({},this.state.backgroundStyle),{cursor:"auto"})})}},a.prototype.updateSize=function(n){this.setState({width:n.width,height:n.height})},a.prototype.renderResizer=function(){var n=this,s=this.props,l=s.enable,f=s.handleStyles,d=s.handleClasses,p=s.handleWrapperStyle,m=s.handleWrapperClass,v=s.handleComponent;if(!l)return null;var _=Object.keys(l).map(function(b){return l[b]!==!1?P.createElement(cw,{key:b,direction:b,onResizeStart:n.onResizeStart,replaceStyles:f&&f[b],className:d&&d[b]},v&&v[b]?v[b]:null):null});return P.createElement("div",{className:m,style:p},_)},a.prototype.render=function(){var n=this,s=Object.keys(this.props).reduce(function(d,p){return Sw.indexOf(p)!==-1||(d[p]=n.props[p]),d},{}),l=Wt(Wt(Wt({position:"relative",userSelect:this.state.isResizing?"none":"auto"},this.props.style),this.sizeStyle),{maxWidth:this.props.maxWidth,maxHeight:this.props.maxHeight,minWidth:this.props.minWidth,minHeight:this.props.minHeight,boxSizing:"border-box",flexShrink:0});this.state.flexBasis&&(l.flexBasis=this.state.flexBasis);var f=this.props.as||"div";return P.createElement(f,Wt({ref:this.ref,style:l,className:this.props.className},s),this.state.isResizing&&P.createElement("div",{style:this.state.backgroundStyle}),this.props.children,this.renderResizer())},a.defaultProps={as:"div",onResizeStart:function(){},onResize:function(){},onResizeStop:function(){},enable:{top:!0,right:!0,bottom:!0,left:!0,topRight:!0,bottomRight:!0,bottomLeft:!0,topLeft:!0},style:{},grid:[1,1],lockAspectRatio:!1,lockAspectRatioExtraWidth:0,lockAspectRatioExtraHeight:0,scale:1,resizeRatio:1,snapGap:0},a}(P.PureComponent);/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var js=function(r,a){return js=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,s){n.__proto__=s}||function(n,s){for(var l in s)s.hasOwnProperty(l)&&(n[l]=s[l])},js(r,a)};function Cw(r,a){js(r,a);function n(){this.constructor=r}r.prototype=a===null?Object.create(a):(n.prototype=a.prototype,new n)}var We=function(){return We=Object.assign||function(a){for(var n,s=1,l=arguments.length;s<l;s++){n=arguments[s];for(var f in n)Object.prototype.hasOwnProperty.call(n,f)&&(a[f]=n[f])}return a},We.apply(this,arguments)};function Ow(r,a){var n={};for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&a.indexOf(s)<0&&(n[s]=r[s]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var l=0,s=Object.getOwnPropertySymbols(r);l<s.length;l++)a.indexOf(s[l])<0&&Object.prototype.propertyIsEnumerable.call(r,s[l])&&(n[s[l]]=r[s[l]]);return n}var Ew=ow,Rw={width:"auto",height:"auto",display:"inline-block",position:"absolute",top:0,left:0},Pw=function(r){return{bottom:r,bottomLeft:r,bottomRight:r,left:r,right:r,top:r,topLeft:r,topRight:r}},Dw=function(r){Cw(a,r);function a(n){var s=r.call(this,n)||this;return s.resizingPosition={x:0,y:0},s.offsetFromParent={left:0,top:0},s.resizableElement={current:null},s.originalPosition={x:0,y:0},s.refDraggable=function(l){l&&(s.draggable=l)},s.refResizable=function(l){l&&(s.resizable=l,s.resizableElement.current=l.resizable)},s.state={resizing:!1,bounds:{top:0,right:0,bottom:0,left:0},maxWidth:n.maxWidth,maxHeight:n.maxHeight},s.onResizeStart=s.onResizeStart.bind(s),s.onResize=s.onResize.bind(s),s.onResizeStop=s.onResizeStop.bind(s),s.onDragStart=s.onDragStart.bind(s),s.onDrag=s.onDrag.bind(s),s.onDragStop=s.onDragStop.bind(s),s.getMaxSizesFromProps=s.getMaxSizesFromProps.bind(s),s}return a.prototype.componentDidMount=function(){this.updateOffsetFromParent();var n=this.offsetFromParent,s=n.left,l=n.top,f=this.getDraggablePosition(),d=f.x,p=f.y;this.draggable.setState({x:d-s,y:p-l}),this.forceUpdate()},a.prototype.getDraggablePosition=function(){var n=this.draggable.state,s=n.x,l=n.y;return{x:s,y:l}},a.prototype.getParent=function(){return this.resizable&&this.resizable.parentNode},a.prototype.getParentSize=function(){return this.resizable.getParentSize()},a.prototype.getMaxSizesFromProps=function(){var n=typeof this.props.maxWidth>"u"?Number.MAX_SAFE_INTEGER:this.props.maxWidth,s=typeof this.props.maxHeight>"u"?Number.MAX_SAFE_INTEGER:this.props.maxHeight;return{maxWidth:n,maxHeight:s}},a.prototype.getSelfElement=function(){return this.resizable&&this.resizable.resizable},a.prototype.getOffsetHeight=function(n){var s=this.props.scale;switch(this.props.bounds){case"window":return window.innerHeight/s;case"body":return document.body.offsetHeight/s;default:return n.offsetHeight}},a.prototype.getOffsetWidth=function(n){var s=this.props.scale;switch(this.props.bounds){case"window":return window.innerWidth/s;case"body":return document.body.offsetWidth/s;default:return n.offsetWidth}},a.prototype.onDragStart=function(n,s){this.props.onDragStart&&this.props.onDragStart(n,s);var l=this.getDraggablePosition();if(this.originalPosition=l,!!this.props.bounds){var f=this.getParent(),d=this.props.scale,p;if(this.props.bounds==="parent")p=f;else if(this.props.bounds==="body"){var m=f.getBoundingClientRect(),v=m.left,_=m.top,b=document.body.getBoundingClientRect(),w=-(v-f.offsetLeft*d-b.left)/d,S=-(_-f.offsetTop*d-b.top)/d,A=(document.body.offsetWidth-this.resizable.size.width*d)/d+w,R=(document.body.offsetHeight-this.resizable.size.height*d)/d+S;return this.setState({bounds:{top:S,right:A,bottom:R,left:w}})}else if(this.props.bounds==="window"){if(!this.resizable)return;var I=f.getBoundingClientRect(),L=I.left,$=I.top,U=-(L-f.offsetLeft*d)/d,Y=-($-f.offsetTop*d)/d,A=(window.innerWidth-this.resizable.size.width*d)/d+U,R=(window.innerHeight-this.resizable.size.height*d)/d+Y;return this.setState({bounds:{top:Y,right:A,bottom:R,left:U}})}else typeof this.props.bounds=="string"?p=document.querySelector(this.props.bounds):this.props.bounds instanceof HTMLElement&&(p=this.props.bounds);if(!(!(p instanceof HTMLElement)||!(f instanceof HTMLElement))){var Z=p.getBoundingClientRect(),ne=Z.left,ue=Z.top,he=f.getBoundingClientRect(),Ce=he.left,Ee=he.top,Le=(ne-Ce)/d,me=ue-Ee;if(this.resizable){this.updateOffsetFromParent();var Me=this.offsetFromParent;this.setState({bounds:{top:me-Me.top,right:Le+(p.offsetWidth-this.resizable.size.width)-Me.left/d,bottom:me+(p.offsetHeight-this.resizable.size.height)-Me.top,left:Le-Me.left/d}})}}}},a.prototype.onDrag=function(n,s){if(this.props.onDrag){var l=this.offsetFromParent,f=l.left,d=l.top;if(!this.props.dragAxis||this.props.dragAxis==="both")return this.props.onDrag(n,We(We({},s),{x:s.x-f,y:s.y-d}));if(this.props.dragAxis==="x")return this.props.onDrag(n,We(We({},s),{x:s.x+f,y:this.originalPosition.y+d,deltaY:0}));if(this.props.dragAxis==="y")return this.props.onDrag(n,We(We({},s),{x:this.originalPosition.x+f,y:s.y+d,deltaX:0}))}},a.prototype.onDragStop=function(n,s){if(this.props.onDragStop){var l=this.offsetFromParent,f=l.left,d=l.top;if(!this.props.dragAxis||this.props.dragAxis==="both")return this.props.onDragStop(n,We(We({},s),{x:s.x+f,y:s.y+d}));if(this.props.dragAxis==="x")return this.props.onDragStop(n,We(We({},s),{x:s.x+f,y:this.originalPosition.y+d,deltaY:0}));if(this.props.dragAxis==="y")return this.props.onDragStop(n,We(We({},s),{x:this.originalPosition.x+f,y:s.y+d,deltaX:0}))}},a.prototype.onResizeStart=function(n,s,l){n.stopPropagation(),this.setState({resizing:!0});var f=this.props.scale,d=this.offsetFromParent,p=this.getDraggablePosition();if(this.resizingPosition={x:p.x+d.left,y:p.y+d.top},this.originalPosition=p,this.props.bounds){var m=this.getParent(),v=void 0;this.props.bounds==="parent"?v=m:this.props.bounds==="body"?v=document.body:this.props.bounds==="window"?v=window:typeof this.props.bounds=="string"?v=document.querySelector(this.props.bounds):this.props.bounds instanceof HTMLElement&&(v=this.props.bounds);var _=this.getSelfElement();if(_ instanceof Element&&(v instanceof HTMLElement||v===window)&&m instanceof HTMLElement){var b=this.getMaxSizesFromProps(),w=b.maxWidth,S=b.maxHeight,A=this.getParentSize();if(w&&typeof w=="string")if(w.endsWith("%")){var R=Number(w.replace("%",""))/100;w=A.width*R}else w.endsWith("px")&&(w=Number(w.replace("px","")));if(S&&typeof S=="string")if(S.endsWith("%")){var R=Number(S.replace("%",""))/100;S=A.width*R}else S.endsWith("px")&&(S=Number(S.replace("px","")));var I=_.getBoundingClientRect(),L=I.left,$=I.top,U=this.props.bounds==="window"?{left:0,top:0}:v.getBoundingClientRect(),Y=U.left,Z=U.top,ne=this.getOffsetWidth(v),ue=this.getOffsetHeight(v),he=s.toLowerCase().endsWith("left"),Ce=s.toLowerCase().endsWith("right"),Ee=s.startsWith("top"),Le=s.startsWith("bottom");if((he||Ee)&&this.resizable){var me=(L-Y)/f+this.resizable.size.width;this.setState({maxWidth:me>Number(w)?w:me})}if(Ce||this.props.lockAspectRatio&&!he&&!Ee){var me=ne+(Y-L)/f;this.setState({maxWidth:me>Number(w)?w:me})}if((Ee||he)&&this.resizable){var me=($-Z)/f+this.resizable.size.height;this.setState({maxHeight:me>Number(S)?S:me})}if(Le||this.props.lockAspectRatio&&!Ee&&!he){var me=ue+(Z-$)/f;this.setState({maxHeight:me>Number(S)?S:me})}}}else this.setState({maxWidth:this.props.maxWidth,maxHeight:this.props.maxHeight});this.props.onResizeStart&&this.props.onResizeStart(n,s,l)},a.prototype.onResize=function(n,s,l,f){var d={x:this.originalPosition.x,y:this.originalPosition.y},p=-f.width,m=-f.height,v=["top","left","topLeft","bottomLeft","topRight"];v.indexOf(s)!==-1&&(s==="bottomLeft"?d.x+=p:(s==="topRight"||(d.x+=p),d.y+=m)),(d.x!==this.draggable.state.x||d.y!==this.draggable.state.y)&&this.draggable.setState(d),this.updateOffsetFromParent();var _=this.offsetFromParent,b=this.getDraggablePosition().x+_.left,w=this.getDraggablePosition().y+_.top;this.resizingPosition={x:b,y:w},this.props.onResize&&this.props.onResize(n,s,l,f,{x:b,y:w})},a.prototype.onResizeStop=function(n,s,l,f){this.setState({resizing:!1});var d=this.getMaxSizesFromProps(),p=d.maxWidth,m=d.maxHeight;this.setState({maxWidth:p,maxHeight:m}),this.props.onResizeStop&&this.props.onResizeStop(n,s,l,f,this.resizingPosition)},a.prototype.updateSize=function(n){this.resizable&&this.resizable.updateSize({width:n.width,height:n.height})},a.prototype.updatePosition=function(n){this.draggable.setState(n)},a.prototype.updateOffsetFromParent=function(){var n=this.props.scale,s=this.getParent(),l=this.getSelfElement();if(!s||l===null)return{top:0,left:0};var f=s.getBoundingClientRect(),d=f.left,p=f.top,m=l.getBoundingClientRect(),v=this.getDraggablePosition(),_=s.scrollLeft,b=s.scrollTop;this.offsetFromParent={left:m.left-d+_-v.x*n,top:m.top-p+b-v.y*n}},a.prototype.render=function(){var n=this.props,s=n.disableDragging,l=n.style,f=n.dragHandleClassName,d=n.position,p=n.onMouseDown,m=n.onMouseUp,v=n.dragAxis,_=n.dragGrid,b=n.bounds,w=n.enableUserSelectHack,S=n.cancel,A=n.children;n.onResizeStart,n.onResize,n.onResizeStop,n.onDragStart,n.onDrag,n.onDragStop;var R=n.resizeHandleStyles,I=n.resizeHandleClasses,L=n.resizeHandleComponent,$=n.enableResizing,U=n.resizeGrid,Y=n.resizeHandleWrapperClass,Z=n.resizeHandleWrapperStyle,ne=n.scale,ue=n.allowAnyClick,he=Ow(n,["disableDragging","style","dragHandleClassName","position","onMouseDown","onMouseUp","dragAxis","dragGrid","bounds","enableUserSelectHack","cancel","children","onResizeStart","onResize","onResizeStop","onDragStart","onDrag","onDragStop","resizeHandleStyles","resizeHandleClasses","resizeHandleComponent","enableResizing","resizeGrid","resizeHandleWrapperClass","resizeHandleWrapperStyle","scale","allowAnyClick"]),Ce=this.props.default?We({},this.props.default):void 0;delete he.default;var Ee=s||f?{cursor:"auto"}:{cursor:"move"},Le=We(We(We({},Rw),Ee),l),me=this.offsetFromParent,Me=me.left,tt=me.top,nt;d&&(nt={x:d.x-Me,y:d.y-tt});var wn=this.state.resizing?void 0:nt,ze=this.state.resizing?"both":v;return P.createElement(Ew,{ref:this.refDraggable,handle:f?".".concat(f):void 0,defaultPosition:Ce,onMouseDown:p,onMouseUp:m,onStart:this.onDragStart,onDrag:this.onDrag,onStop:this.onDragStop,axis:ze,disabled:s,grid:_,bounds:b?this.state.bounds:void 0,position:wn,enableUserSelectHack:w,cancel:S,scale:ne,allowAnyClick:ue,nodeRef:this.resizableElement},P.createElement(Nw,We({},he,{ref:this.refResizable,defaultSize:Ce,size:this.props.size,enable:typeof $=="boolean"?Pw($):$,onResizeStart:this.onResizeStart,onResize:this.onResize,onResizeStop:this.onResizeStop,style:Le,minWidth:this.props.minWidth,minHeight:this.props.minHeight,maxWidth:this.state.resizing?this.state.maxWidth:this.props.maxWidth,maxHeight:this.state.resizing?this.state.maxHeight:this.props.maxHeight,grid:U,handleWrapperClass:Y,handleWrapperStyle:Z,lockAspectRatio:this.props.lockAspectRatio,lockAspectRatioExtraWidth:this.props.lockAspectRatioExtraWidth,lockAspectRatioExtraHeight:this.props.lockAspectRatioExtraHeight,handleStyles:R,handleClasses:I,handleComponent:L,scale:this.props.scale}),A))},a.defaultProps={maxWidth:Number.MAX_SAFE_INTEGER,maxHeight:Number.MAX_SAFE_INTEGER,scale:1,onResizeStart:function(){},onResize:function(){},onResizeStop:function(){},onDragStart:function(){},onDrag:function(){},onDragStop:function(){}},a}(P.PureComponent);const Tf="floating-map",Tw=`copilot-${Tf}`,If="floating-map-header",Br=36,_o=16/9,Iw=150+Br,Aw=150*_o,wc=300+Br,Mw=300*_o;function zw(){const[r,a]=db(Tw,{show:!0,x:0,y:window.innerHeight-wc,width:Mw,height:wc,level:void 0},(I,L)=>({...L,...I})),{width:n,height:s}=hb();P.useEffect(()=>{a(I=>({...I,x:ic(I.x,0,n-I.width),y:ic(I.y,0,s-I.height)}))},[a,n,s]);const[l,f]=P.useState(),[d,p]=P.useState(0),{level:m,activeTiles:v}=co();P.useEffect(()=>{p(0),a(I=>({...I,level:m}))},[a,m]);const _=P.useCallback(()=>{l&&Js(l,Ir,{type:"setMapState",data:{activeTiles:v}})},[l,v]);P.useEffect(_,[_]),qs(Ir,"mapReady",()=>{p(1),_()}),qs(Ir,"error",({message:I})=>{p(2),console.warn(`Map error: ${I}`)}),P.useEffect(()=>{l&&Js(l,Ir,{type:"checkMap"})},[l]);const b=P.useCallback((I=!1)=>{Array.from(document.getElementsByTagName("iframe")).forEach(L=>{L.style.pointerEvents=I?"none":"auto"})},[]),w=P.useCallback(()=>{b(!0)},[b]),S=P.useCallback((I,{x:L,y:$})=>{b(!1),a(U=>({...U,x:L,y:$}))},[a,b]),A=P.useCallback(()=>{b(!0)},[b]),R=P.useCallback((I,L,$,U,Y)=>{b(!1),a(Z=>({...Z,...Y,width:parseFloat($.style.width),height:parseFloat($.style.height)}))},[a,b]);return io.createPortal(u("div",{className:"fixed z-30 inset-0 pointer-events-none",children:r.show?u(Dw,{className:"pointer-events-auto",dragHandleClassName:If,bounds:"window",minWidth:Aw,minHeight:Iw,lockAspectRatio:_o,lockAspectRatioExtraHeight:Br,default:r,position:r,onDragStart:w,onDragStop:S,onResizeStart:A,onResizeStop:R,children:D(zt,{className:"h-full !p-0 flex flex-col overflow-hidden",elevation:3,children:[u(Sc,{config:r,setConfig:a}),m?D("div",{className:"relative flex-grow",children:[u("iframe",{title:Tf,className:"w-full h-full",src:rx(m),onLoad:I=>{f(I.target.contentWindow)}}),d===0&&u(xn,{className:"absolute inset-0 bg-gray-900/50 [&_*]:!text-white",icon:u(pb,{className:"[&_.bp4-spinner-head]:stroke-current"}),description:l?void 0:"等待地图连接..."})]}):u(xn,{icon:"area-of-interest",title:"未选择关卡"})]})}):u(zt,{className:"absolute !p-0 overflow-hidden pointer-events-auto left-4 bottom-4",elevation:2,children:u(Sc,{config:r,setConfig:a})})}),document.body)}function Sc({className:r,config:a,setConfig:n}){var l;let s=(l=a.level)==null?void 0:l.name;return ff(s)?s="未选择关卡":s.trim()||(s="未命名关卡"),u("div",{className:Ne(r,If,"flex items-center text-xs bg-gray-200 dark:bg-slate-500",a.show?"cursor-move":"cursor-default"),style:{height:Br},children:D(te,{minimal:!0,style:{height:Br},className:"px-4",title:a.show?"隐藏地图":"显示地图",icon:a.show?"caret-down":"caret-up",onClick:()=>n({...a,show:!a.show}),children:["地图",a.show&&` - ${s}`]})})}const eo=({operator:r,editing:a,onEdit:n,onRemove:s,isDragging:l,attributes:f,listeners:d})=>{var _;const p=(_=an.find(({name:b})=>b===r.name))==null?void 0:_.id,m=gb(r.skillUsage,r.skillTimes),v=`${[null,"一","二","三"][r.skill??1]??"未知"}技能：${m}`;return D(zt,{elevation:qc.TWO,className:Ne("flex items-start",a&&"bg-gray-100",l&&"opacity-30","h-[72px] w-[calc(4.5*72px)]"),children:[u(Be,{className:"cursor-grab active:cursor-grabbing p-1 -mt-1 -ml-2 mr-3 rounded-[1px]",icon:"drag-handle-vertical",...f,...d}),u(oa,{id:p,size:"large"}),D("div",{className:"ml-4 flex-grow",children:[u("h3",{className:"font-bold leading-none mb-1",children:r.name}),u("div",{className:"text-gray-400 text-xs",children:v})]}),u(po,{active:a,onClick:n}),u(ca,{className:"-mr-3",onClick:s})]})},Nc=({group:r,editing:a,getOperatorId:n,isOperatorEditing:s,onEdit:l,onRemove:f,onOperatorEdit:d,onOperatorRemove:p,isDragging:m,attributes:v,listeners:_})=>{var b,w,S;return u(zt,{elevation:qc.TWO,className:Ne(a&&"bg-gray-100",m&&"invisible"),style:{width:"fit-content"},children:D(Vi,{items:((b=r.opers)==null?void 0:b.map(n))||[],strategy:Yi,children:[D("div",{className:"flex items-start mb-2",children:[u(Be,{className:"cursor-grab active:cursor-grabbing p-1 -mt-1 -ml-2 rounded-[1px]",icon:"drag-handle-vertical",...v,..._}),u("h3",{className:"font-bold leading-none flex-grow",children:r.name}),u(po,{active:a,onClick:l}),u(ca,{className:"-mr-3",onClick:f})]}),u("ul",{children:(w=r.opers)==null?void 0:w.map((A,R)=>u("li",{className:"mb-2",children:u(Ki,{id:n(A),data:{type:"operator"},children:I=>u(eo,{operator:A,editing:s==null?void 0:s(A),onEdit:()=>d==null?void 0:d(A),onRemove:()=>p==null?void 0:p(R),...I})})},n(A)))}),!((S=r.opers)!=null&&S.length)&&u(xn,{children:"将干员拖拽到此处"})]})})},Lw=({group:r,submit:a,onCancel:n,categorySelector:s})=>{const l=!r,{control:f,reset:d,handleSubmit:p,setError:m,formState:{errors:v}}=kn({defaultValues:{name:""}});return P.useEffect(()=>{d(r,{keepDefaultValues:!0})},[d,r]),D("form",{onSubmit:p(b=>{b.name=b.name.trim(),a(b,m)&&d()}),children:[D("div",{className:"flex items-center mb-4",children:[u(sa,{className:"mb-0",icon:"add",children:s}),u("div",{className:"flex-1"}),u(oo,{reset:d,entityName:"正在编辑的干员组"})]}),D(rn,{className:"mb-4",children:[u(Gi,{dense:!0,icon:"info-sign",title:"什么是干员组？",className:"font-bold"}),u("div",{children:"编队时将选择组内练度最高的一位干员；组内前后顺序并不影响判断"})]}),u($i,{label:"干员组名",field:"name",control:f,error:v.name,description:"任意名称，用于在动作中引用。例如：速狙、群奶",ControllerProps:{rules:{validate:b=>!!b.trim()||"请输入干员组名"},render:({field:b})=>u(Mn,{large:!0,placeholder:"干员组名",...b})}}),D("div",{className:"flex",children:[u(Ji,{control:f,icon:l?"add":"edit",children:l?"添加":"保存"}),!l&&u(te,{icon:"cross",className:"ml-2",onClick:n,children:"取消编辑"})]}),u(lo,{errors:v})]})},Cc=r=>({name:r}),kw=({className:r,groups:a,...n})=>{const{field:{onChange:s,onBlur:l,value:f},fieldState:d}=bt(n),p=f?Cc(f):null;return u(Jc,{items:a,itemListPredicate:m=>m?a.filter(v=>v.name.includes(m)):a,fieldState:d,onReset:()=>s(void 0),itemRenderer:(m,{handleClick:v,handleFocus:_,modifiers:b})=>u(Ke,{text:m.name,onClick:v,onFocus:_,selected:b.active,disabled:b.disabled},m.name),onItemSelect:m=>s(m.name),selectedItem:p,inputValueRenderer:m=>m.name,createNewItemFromQuery:m=>Cc(m),createNewItemRenderer:(m,v,_)=>u(Ke,{text:`创建新的干员组 "${m}"`,icon:"text-highlight",onClick:_,selected:v},"create-new-item"),noResults:u(Ke,{disabled:!0,text:"没有匹配的干员组"}),inputProps:{placeholder:"干员组名",large:!0,onBlur:l}})},Af=({name:r,control:a})=>{const{field:{onChange:n,onBlur:s,value:l,ref:f}}=bt({name:r,control:a}),d=P.useMemo(()=>[{icon:"cog",title:"一技能",value:1},{icon:"cog",title:"二技能",value:2},{icon:"cog",title:"三技能",value:3}],[]),p=d.find(m=>m.value===(l??1));return u(ra,{filterable:!1,resetOnSelect:!0,items:d,itemRenderer:(m,{handleClick:v,handleFocus:_,modifiers:b})=>u(Ke,{selected:b.active,onClick:v,onFocus:_,icon:m.icon,text:m.title},m.value),onItemSelect:m=>{n(m.value)},children:u(te,{icon:p==null?void 0:p.icon,text:p==null?void 0:p.title,rightIcon:"double-caret-vertical",onBlur:s,ref:f})})},Fw=({operator:r,groups:a,submit:n,onCancel:s,categorySelector:l})=>{const f=!r,{control:d,reset:p,getValues:m,setValue:v,handleSubmit:_,setError:b,formState:{errors:w},watch:S}=kn(),A=P.useCallback(L=>L&&a.find($=>{var U;return(U=$.opers)==null?void 0:U.find(Y=>Y._id===L._id)}),[a]);P.useEffect(()=>{var L;p({...r,groupName:(L=A(r))==null?void 0:L.name},{keepDefaultValues:!0})},[p,r,A]),P.useEffect(()=>{var L;v("groupName",(L=A(m()))==null?void 0:L.name)},[p,m,a,A,v]);const R=S("skillUsage");return P.useEffect(()=>{v("skillTimes",R===sn.SkillUsageType.ReadyToUseTimes?(r==null?void 0:r.skillTimes)??1:void 0)},[R,v,r]),D("form",{onSubmit:_(L=>{var $;L.name=L.name.trim(),L.groupName=($=L.groupName)==null?void 0:$.trim(),L.skill=L.skill?L.skill:1,L.skillUsage=L.skillUsage?L.skillUsage:0,n(L,b)&&p()}),children:[D("div",{className:"flex items-center mb-4",children:[u(sa,{className:"mb-0",icon:"add",children:l}),u("div",{className:"flex-1"}),u(oo,{reset:p,entityName:"正在编辑的干员"})]}),u(Se,{label:"干员名",description:"选择干员或直接使用搜索内容创建干员",field:"name",error:w.name,asterisk:!0,FormGroupProps:{helperText:"键入干员名、拼音或拼音首字母以从干员列表中搜索"},children:u(Wc,{control:d,name:"name"})}),u(Se,{label:"所属干员组",description:"该干员的所属干员组，如果不存在则会自动创建",field:"groupName",error:w.groupName,children:u(kw,{groups:a,control:d,name:"groupName"})}),D("div",{className:"flex flex-col lg:flex-row gap-2 flex-wrap",children:[u(Se,{label:"技能",field:"skill",error:w.skill,children:u(Af,{control:d,name:"skill"})}),u(Se,{label:"技能用法",field:"skillUsage",error:w.skillUsage,children:u(ho,{control:d,name:"skillUsage"})}),R===sn.SkillUsageType.ReadyToUseTimes&&u(Se,{label:"技能使用次数",field:"skillTimes",error:w.skillTimes,children:u(fo,{control:d,name:"skillTimes"})})]}),D("div",{className:"flex",children:[u(Ji,{control:d,icon:f?"add":"edit",children:f?"添加":"保存"}),!f&&u(te,{icon:"cross",className:"ml-2",onClick:s,children:"取消编辑"})]}),u(lo,{errors:w})]})},Gs=[{label:"干员",value:"operator"},{label:"干员组",value:"group"}],Uw=({mode:r,operator:a,group:n,groups:s,onModeChange:l,onCancel:f,submitOperator:d,submitGroup:p})=>{const m=Gs.find(b=>b.value===r)||Gs[0],v=P.useMemo(()=>D(ge,{children:["添加",u(ra,{filterable:!1,items:Gs,className:"ml-1",onItemSelect:b=>l(b.value),itemRenderer:(b,{handleClick:w,handleFocus:S})=>u(Ke,{selected:b.value===r,onClick:w,onFocus:S,text:b.label},b.value),children:u(te,{large:!0,text:m.label,rightIcon:"double-caret-vertical"})})]}),[r,l,m]),_=P.useMemo(()=>r==="operator"?u(Fw,{operator:a,submit:d,onCancel:f,categorySelector:v,groups:s}):u(Lw,{group:n,submit:p,onCancel:f,categorySelector:v}),[r,d,p,n,s,f,a,v]);return u(zt,{className:"mb-8 pt-4",children:_})},na=["_id","id"],Oc=Zc("maa-copilot-fav-groups",[]),Mf=Qc(r=>r(Oc),(r,a,n)=>{a(Oc,n.map(s=>Xi(s,...na)))}),cr=({title:r,icon:a,children:n,mini:s,rightOptions:l,className:f})=>D("section",{className:f,children:[D("header",{className:Ne("flex items-center pl-3",s?"my-1":"my-5"),children:[u(Be,{icon:a,size:s?16:20}),u(mb,{className:Ne("p-0 m-0 ml-3 truncate",s&&"!text-lg"),children:r}),l]}),!s&&u(la,{}),n]}),xo=u(xn,{title:"暂无干员"}),Ww=u(xn,{title:"暂无干员组"}),zf=P.createContext({}),Bw=({children:r,submitGroup:a,submitOperator:n,...s})=>u(zf.Provider,{value:{submitOperatorInSheet:l=>n(l,void 0,!0),submitGroupInSheet:l=>a(l,void 0,!0),...s},children:r}),Wn=()=>P.useContext(zf),Lf=({isCollapse:r,onClick:a,disabled:n})=>u(te,{icon:r?"collapse-all":"expand-all",title:`${r?"折叠":"展开"}所包含干员`,minimal:!0,className:"cursor-pointer ml-1",disabled:n,onClick:a}),Hw=sn.SkillUsageType.ReadyToUseTimes,Gw=Ks,kf=({operator:r,onSkillChange:a})=>{var _;const{control:n,handleSubmit:s,watch:l,formState:{errors:f}}=kn({defaultValues:r}),p=l("skillUsage")===Hw,m=D("form",{onSubmit:s(({skill:b,skillTimes:w,skillUsage:S})=>a==null?void 0:a({...r,skill:b||1,skillUsage:S||0,skillTimes:p?w||1:void 0})),children:[D("div",{onClick:b=>b.stopPropagation(),role:"presentation",children:[D("div",{className:"flex flex-wrap",children:[u(Se,{label:"技能",field:"skill",error:f.skill,className:"mr-1",children:u(Af,{control:n,name:"skill"})}),u(Se,{label:"技能用法",field:"skillUsage",error:f.skillUsage,children:u(ho,{control:n,name:"skillUsage"})})]}),p&&u(Se,{label:"技能使用次数",field:"skillTimes",error:f.skillTimes,children:u(fo,{control:n,name:"skillTimes"})})]}),D("div",{className:"flex items-center",children:[u(te,{text:"确定",type:"submit",className:Wi}),u(ua,{content:"若不进行任何设置, 将使用默认值 (一技能 · 不自动使用 · 技能使用次数: 1次)",className:"ml-1",children:u(Be,{icon:"help"})})]})]}),v=D("div",{className:Ne("flex mt-3 text-gray-500 items-center text-xs",r&&"hover:text-black"),children:[!(r!=null&&r.skill)&&u(Be,{icon:"info-sign",size:12,className:"flex items-center"}),D("p",{children:[(r==null?void 0:r.skill)||"未设置","技能"," ",(r==null?void 0:r.skillUsage)!==void 0?"·":""]}),(r==null?void 0:r.skillUsage)!==void 0&&u("div",{className:"relative",children:u(Be,{icon:(_=Gw.find(b=>b.value===(r==null?void 0:r.skillUsage)))==null?void 0:_.icon,className:"flex items-center ml-1",size:12})}),!!(r!=null&&r.skillTimes)&&D("p",{children:[" x",r.skillTimes]})]});return u("div",{onClick:b=>{r&&b.stopPropagation()},role:"presentation",className:"cursor-pointer",children:u(Bt,{content:m,disabled:!r,children:v})})},$w=({onOperatorSkillChange:r,operatorInfo:{name:a,...n}})=>u(zt,{className:"flex items-center mb-1 w-full h-full justify-between",children:D(ge,{children:[D("div",{className:"flex items-center",children:[u(oa,{name:a,size:"large"}),u("p",{className:"font-bold leading-none text-center truncate ml-2 mr-auto",children:a})]}),!!r&&u(kf,{operator:{name:a,...n},onSkillChange:r})]})}),Vw=({...r})=>u(Bt,{className:"w-full",content:u(Yw,{...r}),position:Ar.TOP,children:u(zt,{className:"flex items-center justify-center",interactive:!0,title:"编辑干员组中干员信息",children:u(Be,{icon:"plus",size:30})})}),Yw=({name:r,opers:a=[]})=>{const{existedOperators:n,existedGroups:s,removeOperator:l,submitGroupInSheet:f}=Wn(),[d,p]=P.useState(a.map(({name:b})=>({groupName:r,operName:b}))),m=P.useMemo(()=>s.filter(({name:b,opers:w})=>b!==r&&!!(w!=null&&w.length)),[s,r]),v=b=>{b.preventDefault();const w=d.reduce((A,{groupName:R,operName:I})=>{const L=R||"noneGrouped";return A[L]?A[L].push(I):A[L]=[I],A},{});let S=[];Object.entries(w).forEach(([A,R])=>{if(A==="noneGrouped")l(R.map(I=>{const L=n.findIndex(({name:$})=>$===I);return S==null||S.push(n[L]),L}));else{const{opers:I,...L}=s.find(({name:$})=>$===A);S=S==null?void 0:S.concat(R.map($=>I==null?void 0:I.find(({name:U})=>U===$))),A!==r&&f({...L,opers:I==null?void 0:I.filter(({name:$})=>!R.includes($))})}}),f({...s.find(({name:A})=>A===r),opers:S})},_=()=>{p(a.map(({name:b})=>({groupName:r,operName:b})))};return u(cr,{title:"选择干员",icon:"select",children:D("form",{className:"mt-3",onSubmit:v,children:[D("div",{className:"max-h-96 overflow-y-auto overflow-x-hidden",children:[u(Vs,{icon:"person",title:"已选择干员",collapseDisabled:!a.length,children:u($s,{selectedOperators:d,setSelectedOperators:p,opers:a})}),u(Vs,{icon:"person",title:"未选择干员",collapseDisabled:!n.length,children:u($s,{selectedOperators:d,setSelectedOperators:p,opers:n})}),u(Vs,{icon:"people",title:"其他分组干员",collapseDisabled:!(m!=null&&m.length),children:m.map(({name:b,opers:w})=>D("div",{children:[D("div",{className:"flex flex-row-reverse items-center",children:[u(Mr,{className:"p-0 m-0",children:b}),u(te,{minimal:!0,icon:"arrow-top-left",title:"全选",onClick:()=>w==null?void 0:w.forEach(({name:S})=>{d.find(({operName:A})=>A===S)||p(A=>[...A,{operName:S,groupName:b}])})})]}),u($s,{selectedOperators:d,setSelectedOperators:p,opers:w,groupName:b})]},b))})]}),D("div",{className:"flex p-0.5",children:[u(te,{text:"确认",className:Wi,type:"submit"}),u(Bt,{captureDismiss:!0,content:D("div",{className:"flex items-center",children:[u("p",{children:"所有未保存的数据均会丢失，确认继续？"}),u(te,{type:"reset",text:"继续",onClick:_,className:Ne(Wi,"mx-1")}),u(te,{text:"取消",className:Wi})]}),position:Ar.TOP,children:u(te,{intent:Hr.DANGER,className:"ml-1",text:"重置"})})]})]})})},$s=({selectedOperators:r,setSelectedOperators:a,groupName:n,opers:s})=>u("div",{className:"flex flex-wrap",children:s==null?void 0:s.map(({name:l})=>{const f=!!r.find(({operName:d})=>d===l);return D(zt,{interactive:!f,className:Ne(f&&"scale-90 bg-gray-200","w-1/4 p-0.5 flex flex-col items-center cursor-pointer"),onClick:()=>{a(d=>f?d.filter(({operName:p})=>p!==l):[...d,{groupName:n,operName:l}])},children:[u(oa,{name:l,size:"large"}),u("p",{className:"font-bold leading-none text-center mt-3 truncate",children:l})]},l)})}),Vs=({children:r,collapseDisabled:a,...n})=>{const[s,l]=P.useState(!0);return u(cr,{...n,mini:!0,className:"w-96",rightOptions:u(Lf,{isCollapse:s,onClick:()=>l(f=>!f),disabled:a}),children:a?xo:u(jc,{isOpen:s,className:"m-0.5",children:r})})},Kw=({groupTitle:r,renameSubmit:a})=>{const n=!!a,[s,l]=P.useState(""),[f,d]=P.useState(!1),[p,m]=P.useState(!1),{register:v,handleSubmit:_,reset:b}=kn(),w=P.useRef(!1),S=()=>{w.current?w.current=!1:(r!==s&&s&&m(!0),d(!1))},A=()=>{d(!1),l(r),b(),m(!1)},R=P.useRef(null),{ref:I,...L}=v("name",{onBlur:S,value:s,onChange:U=>l(U.target.value)});return D(ge,{children:[u(ro,{onConfirm:()=>{var U;d(!0),m(!1),(U=R.current)==null||U.focus()},intent:Hr.DANGER,onCancel:A,confirmButtonText:"取消",cancelButtonText:"确认",isOpen:p,children:u("p",{children:"当前干员组名修改未保存，是否放弃修改？"})}),u("form",{className:"flex items-center",onSubmit:_(()=>{var U;w.current=!0,a==null||a(s||r),d(!1),(U=R.current)==null||U.blur()}),children:D("div",{className:"flex items-center w-full",children:[u(Be,{icon:"people"}),u("input",{title:"修改干员组名称",className:Ne("ml-1 w-full bg-transparent text-xs",!n&&"placeholder:text-current"),autoComplete:"off",disabled:!n,onFocus:()=>d(!0),placeholder:r,type:"text",ref:U=>{I(U),R.current=U},onKeyDown:U=>{U.key.toLowerCase()==="enter"&&U.preventDefault()},...L}),f&&u(te,{minimal:!0,icon:"tick",type:"submit",onMouseDown:U=>U.preventDefault()})]})})]})},Xw=({groupInfo:r,itemType:a})=>{var v,_;const{selected:n,onGroupNameChange:s,defaultOperatorCollapseOpen:l,ActionList:f,onOperatorSkillChange:d}=qw({groupInfo:r,itemType:a}),[p,m]=P.useState(l);return D(zt,{interactive:!n,className:"mt-1 mx-0.5",children:[D("div",{className:"flex items-center justify-between",children:[u(Kw,{groupTitle:r.name,editable:!0,renameSubmit:s}),D("div",{className:"flex items-center",children:[u(Lf,{isCollapse:p,onClick:()=>m(b=>!b)}),f]})]}),u(jc,{isOpen:p,children:D("div",{className:"w-full pt-1",children:[(v=r.opers)!=null&&v.length?(_=r.opers)==null?void 0:_.map(b=>u($w,{operatorInfo:b,onOperatorSkillChange:d},b.name)):!n&&xo,n&&u(Vw,{...r})]})})]})},qw=({groupInfo:{name:r,opers:a=[],...n},itemType:s})=>{const{submitGroupInSheet:l,removeGroup:f,existedGroups:d}=Wn(),[p,m]=ef(Mf);switch(s){case"selected":{const v=p.find(({name:w})=>w===r),_=Wr({name:r,opers:a},v);return{selected:!0,onGroupNameChange:w=>l({opers:a,...n,name:w}),defaultOperatorCollapseOpen:!0,onOperatorSkillChange:w=>{a.splice(a.findIndex(({name:S})=>S===w.name),1,w),l({opers:a,name:r,...n})},ActionList:D(ge,{children:[u(ca,{onClick:()=>f(d.findIndex(({name:w})=>w===r))}),u(Ec,{pinned:_,onPinChange:()=>{const w=[...p.filter(({name:S})=>S!==r)];m(_?w:[...w,vb({name:r,opers:a,...n})])},isDuplicate:!!v})]})}}case"recommend":return{selected:!1,onGroupNameChange:void 0,defaultOperatorCollapseOpen:!1,onOperatorSkillChange:void 0,ActionList:u(ge,{children:u(te,{minimal:!0,icon:"arrow-left",title:"添加干员组",onClick:()=>l({name:r,opers:a})})})};case"fav":{const v=d.find(({name:w})=>w===r),_=v?Wr(Xi(v,...na),{name:r,opers:a}):!1;return{selected:!1,onGroupNameChange:w=>m([...p.filter(({name:S})=>S!==w),{opers:a,name:w,...n}]),defaultOperatorCollapseOpen:!1,onOperatorSkillChange:w=>{a.splice(a.findIndex(({name:S})=>S===w.name),1,w),p.splice(p.findIndex(({name:S})=>S===w.name),1,{name:r,opers:a,...n}),m(p)},ActionList:D(ge,{children:[u(te,{minimal:!0,disabled:!!v,icon:v&&_?"tick":"arrow-left",title:v?_?"已添加":"检测到同名干员组":"使用该推荐分组",onClick:()=>l({name:r,opers:a})}),u(Ec,{pinned:!0,onPinChange:()=>{m(p.filter(({name:w})=>w!==r))}})]})}}default:return{selected:!1,onGroupNameChange:void 0,defaultOperatorCollapseOpen:!1,onOperatorSkillChange:void 0,ActionList:u(ge,{})}}},Ec=({pinned:r,onPinChange:a,isDuplicate:n=!1})=>{const s=r?"从收藏分组中移除":n?"此操作会替换同名干员组":"添加至收藏分组";return u(Bt,{disabled:!r&&!n,content:u(Ur,{className:"p-0",children:u(Ke,{text:s,icon:r?"star":n?"warning-sign":"star-empty",onClick:a})}),children:u(te,{minimal:!0,icon:r?"star":"star-empty",title:s,onClick:r||n?void 0:a})})},Jw=()=>{const[r,a]=P.useState(""),{submitGroupInSheet:n}=Wn();return D("div",{className:"flex px-3 items-center",children:[u(Mn,{type:"text",value:r,placeholder:"输入干员组名",onChange:l=>a(l.target.value),fill:!0}),D("div",{className:"flex items-center",children:[u(te,{minimal:!0,icon:"tick",title:"添加",onClick:()=>{const l=r.trim();l?(n({name:l}),a("")):lr.show({message:"干员组名不能为空",intent:Hr.DANGER})}}),u(te,{minimal:!0,icon:"reset",title:"重置",onClick:()=>a("")})]})]})},Zw=()=>{const{existedGroups:r,existedOperators:a}=Wn(),n=P.useMemo(()=>Object.entries(a.reduce((l,{name:f,...d})=>{var w,S;const{prof:p="",subProf:m=""}=an.find(({name:A})=>A===f)||{},v=nf.find(({id:A})=>A===p),_=(S=(w=v==null?void 0:v.sub)==null?void 0:w.find(({id:A})=>A===m))==null?void 0:S.name,b=((v==null?void 0:v.name)||"其它")+(v!=null&&v.name?"-":"")+(_||"");return l[b]||(l[b]=[]),l[b].push({name:f,...d}),l},{})).map(([l,f])=>({name:l,opers:f})),[a]),s=tf(Mf);return u(ge,{children:D("div",{className:"flex px-1",children:[u("div",{className:"flex-1 sticky top-0 h-screen flex flex-col",children:D("div",{className:"grow overflow-y-auto",children:[u(cr,{title:"添加干员组",icon:"add",mini:!0,className:"sticky top-0 z-10 backdrop-blur-lg py-1",children:u(Jw,{})}),u(Ys,{title:"已设置的干员组",icon:"cog",mini:!0,groups:r,itemType:"selected"}),!!r.length&&D(Mr,{className:"my-2 text-center",children:["已显示全部 ",r.length," 个干员组"]})]})}),u(la,{}),D("div",{className:"flex-1",children:[u(Ys,{title:"推荐分组",icon:"thumbs-up",mini:!0,groups:n,itemType:"recommend"}),u(Ys,{title:"收藏分组",icon:"star",mini:!0,groups:s,itemType:"fav"})]})]})})},Qw=()=>u(cr,{title:"设置干员组",icon:"people",children:u(Zw,{})}),Ys=({groups:r,itemType:a,...n})=>u(cr,{...n,children:u("div",{children:r.length?r.map(s=>u(Xw,{groupInfo:s,itemType:a},s.name)):Ww})}),jw=["id","_id"],Rc=Zc("maa-copilot-fav-operator",[]),Ff=Qc(r=>r(Rc),(r,a,n)=>{a(Rc,n.map(s=>V_.omit(s,[...jw])))});var Lr=(r=>(r.ALL="allProf",r.FAV="favProf",r.OTHERS="othersProf",r))(Lr||{}),Hi=(r=>(r.ALL="allSubProf",r.SELECTED="selectedProf",r))(Hi||{});const eS={selectedProf:["allProf","allSubProf"]},to={selectedRarity:Array.from(new Array(Math.max(...an.map(({rarity:r})=>r))+1).keys()).slice(Math.min(...an.map(({rarity:r})=>r))),reverse:!1},ma={current:1,size:60},Uf=P.createContext({}),tS=({children:r})=>{const[a,n]=P.useState(ma),[s,l]=P.useState(eS),[f,d]=P.useState(to);return u(Uf.Provider,{value:{usePaginationFilterState:[a,n],useProfFilterState:[s,l],useRarityFilterState:[f,d],operatorFiltered:nS(s,a,f)},children:r})},fr=()=>P.useContext(Uf),Pc=r=>({id:"customized-"+r,name:r,prof:"TOKEN",subProf:"customized",alias:"customized-operator",rarity:0,alt_name:"custormized operator named"+r}),nS=(r,a,n)=>{const s=rS(r),l=aS(n,s);return{data:iS(a,l),meta:{dataTotal:s.length}}},rS=(r={selectedProf:["allProf","allSubProf"]})=>{const{selectedProf:[a,n]}=r,{existedOperators:s}=Wn(),l=tf(Ff),f=P.useMemo(()=>s.map(({name:v})=>an.find(({name:_})=>_===v)?void 0:Pc(v)).filter(v=>!!v),[s]),d=P.useMemo(()=>l.map(({name:v})=>an.find(({name:_})=>_===v)||Pc(v)),[l]);let p=[];const m=[...an,...f];switch(a){case"allProf":{p=m;break}case"favProf":{p=d;break}case"othersProf":{p=m.filter(({prof:v})=>v==="TOKEN");break}default:{p=m.filter(({prof:v})=>v===a);break}}switch(n){case"allSubProf":return p;case"selectedProf":return p.filter(({name:v})=>!!s.find(({name:_})=>_===v));default:return p.filter(({subProf:v})=>v===n)}},iS=({current:r,size:a},n=an)=>n.slice(0,r*a),aS=({selectedRarity:r,reverse:a},n=an)=>n.filter(({rarity:s})=>r.includes(s)).sort(({rarity:s},{rarity:l})=>a?s-l:l-s),sS=({toTop:r})=>{const{usePaginationFilterState:[{current:a},n]}=fr();return u(te,{minimal:!0,icon:"symbol-triangle-up",disabled:a<3,title:"回到顶部",onClick:()=>n(ma)})},oS=()=>{const{operatorFiltered:{data:r}}=fr(),{existedOperators:a,submitOperatorInSheet:n,removeOperator:s}=Wn(),{cancelAllDisabled:l,selectAllDisabled:f}=P.useMemo(()=>{const m=a.map(({name:v})=>v);return{cancelAllDisabled:!r.some(({name:v})=>m.includes(v)),selectAllDisabled:r.every(({name:v})=>m.includes(v))}},[a,r]),d=()=>r.forEach(m=>{n(m)}),p=()=>{const m=[];r.forEach(({name:v})=>{const _=a.findIndex(b=>b.name===v);_!==-1&&m.push(_)}),s(m)};return D(ge,{children:[u(te,{minimal:!0,icon:"circle",disabled:l,title:`取消选择全部${a.length}位干员`,onClick:p}),u(te,{minimal:!0,icon:"selection",title:`全选${r.length}位干员`,disabled:f,onClick:d})]})},lS=()=>{const{useRarityFilterState:[{selectedRarity:r,reverse:a},n]}=fr(),s="scale-90";return D(ge,{children:[D("div",{className:"flex items-center",children:[u(rf,{className:"m-0 mr-1",children:"按干员星级展示"}),u(te,{icon:"reset",minimal:!0,title:"重置选择",onClick:()=>n(to)})]}),u("div",{className:"flex my-1",children:to.selectedRarity.map(l=>{const f=r.includes(l);return u(te,{active:f,text:l,minimal:!0,className:Ne(f&&s),rightIcon:"star",onClick:yb(()=>n(({selectedRarity:d,...p})=>({...p,selectedRarity:f?d.filter(m=>m!==l):[...d,l]})),150)},l)})}),D("div",{className:"flex",children:[u(te,{minimal:!0,icon:"arrow-up",className:Ne(!a&&s),active:!a,onClick:()=>n(l=>({...l,reverse:!1})),title:"按从下至上升序排列"}),u(te,{minimal:!0,icon:"arrow-down",className:Ne(a&&s),active:a,onClick:()=>n(l=>({...l,reverse:!0})),title:"按从下至上降序排列"})]}),u(la,{})]})},Dc=[{id:Lr.ALL,name:"全部",sub:[]},{id:Lr.FAV,name:"收藏",sub:[]},...nf,{id:Lr.OTHERS,name:"其它",sub:[]}],uS=({toTop:r})=>{const{useProfFilterState:[{selectedProf:a},n],usePaginationFilterState:[s,l]}=fr(),f=P.useMemo(()=>{var p;return[{id:Hi.ALL,name:"全部"},{id:Hi.SELECTED,name:"已选择"},...((p=Dc.find(({id:m})=>m===a[0]))==null?void 0:p.sub)||[]]},[a]);P.useEffect(()=>{r(),l(ma)},[a,l,r]);const d=D("div",{className:"flex flex-col absolute bottom-0",children:[u(Bt,{content:u(ge,{children:u(lS,{})}),children:u(te,{minimal:!0,icon:"filter-list"})}),u(oS,{}),u(sS,{toTop:r})]});return D("div",{className:"flex flex-row-reverse relative h-full",children:[u("ul",{className:"h-full flex flex-col w-6 sm:w-12",children:Dc.map(({id:p,name:m})=>u(cS,{profId:p,name:m,selected:a.includes(p),onProfClick:()=>n(v=>({...v,selectedProf:[p,Hi.ALL]}))},p))}),u(la,{className:"mr-0"}),D("div",{className:"h-full flex flex-col justify-center items-end absolute right-full sm:relative sm:left-0",children:[u("ul",{children:f.map(({id:p,name:m})=>u("li",{children:u(or,{className:Ne("truncate cursor-pointer my-3 opacity-50 hover:underline hover:opacity-90",a.includes(p)&&"!opacity-100 underline",m.length>3&&"!text-base"),onClick:()=>n(({selectedProf:v,..._})=>({selectedProf:[v[0],p],..._})),children:m})},p))}),d]})]})},cS=({name:r,profId:a,selected:n,onProfClick:s,...l})=>D("li",{className:"grow cursor-pointer relative flex justify-center items-center",title:r,role:"presentation",onClick:s,children:[Object.values(Lr).includes(a)?u(rf,{className:"!text-xs sm:!text-base truncate",children:r}):u("img",{...l,className:"invert dark:invert-0",src:"/assets/prof-icons/"+a+".png",alt:"",title:r}),n&&u("div",{className:"h-full w-1 bg-black dark:bg-white absolute top-0 right-full rounded"})]}),fS=({name:r})=>{const{existedOperators:a,existedGroups:n,submitOperatorInSheet:s,removeOperator:l}=Wn(),[f,d]=ef(Ff),p=a.findIndex(({name:L})=>L===r),m=n.map(({opers:L})=>L).flat().filter(L=>!!L).find(({name:L})=>L===r),v=p!==-1,_=!!m,b=(a==null?void 0:a[p])||m||f.find(({name:L})=>L===r)||{name:r},w=v||_,S=Wr(Xi(b,[...na]),Xi(f.find(({name:L})=>L===r),[...na])),A=()=>{_?lr.show({message:`干员 ${r} 已被编组`,intent:Hr.DANGER}):v?l(p):s(b)},R=()=>{const{skill:L,skillUsage:$,skillTimes:U,...Y}=b,Z={...Y,skill:L||1,skillUsage:$||0,skillTimes:$===sn.SkillUsageType.ReadyToUseTimes?U||1:void 0};d([...[...f].filter(({name:ne})=>ne!==Z.name),{...Z}]),s(Z)},I=()=>{S?d([...f].filter(({name:L})=>L!==r)):R()};return D(zt,{className:Ne("flex items-center w-full h-full relative cursor-pointer flex-col justify-center",w&&"scale-90 bg-gray-200"),elevation:_?0:2,interactive:!w,onClick:A,children:[D(ge,{children:[D(ge,{children:[u(oa,{name:r,size:"large"}),u("p",{className:Ne("font-bold leading-none text-center mt-3 truncate"),children:r})]}),v&&u("div",{className:"absolute top-2 right-2",onClick:L=>L.stopPropagation(),role:"presentation",children:(()=>{const L=f.find(({name:$})=>$===r);return u(Bt,{content:D(te,{minimal:!0,onClick:I,children:[u(Be,{icon:S?"pin":"warning-sign",className:Ne(S&&"-rotate-45")}),u("span",{children:S?"移出收藏":"此操作会覆盖已有干员"})]}),disabled:!S&&!L,children:u(Be,{icon:S?"pin":"unpin",className:Ne(S&&"-rotate-45"),onClick:!S&&!L?I:void 0})})})()})]}),v&&u(kf,{operator:b,onSkillChange:L=>s(L),disabled:_}),_&&D("span",{className:"text-xs font-bold mt-3",children:[u(Be,{icon:"warning-sign",size:15}),"已被编组"]})]})},dS=({toTop:r})=>{const{operatorFiltered:{meta:{dataTotal:a}},usePaginationFilterState:[{current:n,size:s},l]}=fr(),f=n*s;return P.useEffect(()=>{n===1&&r()},[n,r]),u("div",{className:"flex items-center justify-center pt-3 cursor-default",children:f>=a?D(ge,{children:[D(Mr,{children:["已经展示全部干员了(",a,")"]}),a>s&&u(Mr,{className:"ml-1 cursor-pointer text-sm text-gray-500 hover:text-inherit hover:underline",onClick:()=>l(ma),children:"收起"})]}):D(Mr,{className:"cursor-pointer mx-auto text-sm text-gray-500 hover:text-inherit hover:underline",onClick:()=>l(({current:d,...p})=>({...p,current:d+1})),children:["显示更多干员(剩余",a-f,")"]})})},hS=()=>{const r=P.useRef(null),a=P.useCallback(()=>{var s;return(s=r==null?void 0:r.current)==null?void 0:s.scrollIntoView()},[r]),{operatorFiltered:{data:n}}=fr();return D("div",{className:"flex h-full",children:[u("div",{className:"flex-auto px-1",ref:r,children:n.length?D(ge,{children:[u("div",{className:"flex flex-wrap items-start content-start overscroll-contain relative",children:n.map(({name:s},l)=>u("div",{className:"flex items-center flex-0 w-32 h-32",children:u(fS,{name:s})},l))},"operatorContainer"),u(dS,{toTop:a})]}):xo}),u("div",{className:"h-screen sticky top-0 sticky flex flex-col",children:u(uS,{toTop:a})})]})},pS=r=>u(cr,{title:"选择干员",icon:"person",children:u(tS,{children:u(hS,{...r})})}),gS=r=>u(Bw,{...r,children:D("article",{className:"overflow-y-auto",children:[u(pS,{}),u(Qw,{})]})}),mS=r=>{const[a,n]=P.useState(!1);return D(ge,{children:[u(af,{isOpen:a,onClose:()=>n(!1),size:bb.LARGE,className:"max-w-[900px]",children:u(gS,{...r})}),u(te,{onClick:()=>n(!0),text:"快捷编辑",fill:!0})]})},vS="nonGrouped",Ae=r=>r._id??(r._id=zn()),yS=({control:r})=>{const[a,n]=P.useState("operator"),s=Hc(Gc($c)),l=_n({control:r,name:"actions"}),{fields:f,append:d,move:p,update:m,remove:v}=Xs({name:"opers",control:r}),{fields:_,append:b,move:w,update:S,remove:A}=Xs({name:"groups",control:r}),R=f,I=_,L=P.useMemo(()=>{if(!l)return[];const G=l.map(O=>{if("name"in O&&!R.some(({name:k})=>k===O.name)&&!I.some(({opers:k})=>k==null?void 0:k.some(({name:H})=>H===O.name)))return O.name});return _b(ao(G))},[l,R,I]),[$,U]=P.useState(),[Y,Z]=P.useState(),[ne,ue]=P.useState(),[he,Ce]=P.useState(),Ee=G=>!!ne&&Ae(ne)===Ae(G),Le=G=>!!he&&Ae(he)===Ae(G);P.useEffect(()=>{ne&&(n("operator"),Ce(void 0))},[ne]),P.useEffect(()=>{he&&(n("group"),ue(void 0))},[he]),P.useEffect(()=>{a==="operator"?Ce(void 0):ue(void 0)},[a]);const me=G=>R.find(O=>Ae(O)===G)||I.map(({opers:O})=>O).flat().find(O=>O&&Ae(O)===G),Me=G=>I.find(O=>Ae(O)===G),tt=G=>G&&I.find(O=>{var k;return(k=O.opers)==null?void 0:k.includes(G)}),nt=G=>{var O;return(O=G.data.current)==null?void 0:O.type},wn=({active:G})=>{nt(G)==="operator"?U(me(G.id)):Z(Me(G.id))},ze=({active:G,over:O})=>{var k;if(!(!O||G.id===O.id)){if(nt(G)==="operator"){const H=me(G.id);if(H){const W=tt(H),B=nt(O)==="group"?Me(O.id):tt(me(O.id));if(W!==B){W?S(I.indexOf(W),{...W,opers:(k=W.opers)==null?void 0:k.filter(X=>X!==H)}):v(R.indexOf(H)),B?S(I.indexOf(B),{...B,opers:[H,...B.opers||[]]}):d(H);return}}}if(nt(G)===nt(O)){const H=(W,B)=>{const X=W.findIndex(ae=>Ae(ae)===G.id),J=W.findIndex(ae=>Ae(ae)===O.id);X!==-1&&J!==-1&&B(X,J)};if(nt(G)==="operator"){const W=me(G.id);if(W){const B=tt(W);B?H(B.opers,(X,J)=>{S(I.indexOf(B),{...B,opers:wb(B.opers,X,J)})}):H(R,p)}}else nt(G)==="group"&&H(I,w)}}},ut=()=>{U(void 0),Z(void 0)},$t=({groupName:G,...O},k,H)=>{if(R.find(({name:J,_id:ae})=>J===O.name&&ae!==O._id))return k==null||k("name",{message:"干员已存在"}),!1;let W,B=-1;G&&(B=I.findIndex(J=>J.name===G),W=I[B],W||(W={name:G},B=I.length,He(W,k)));const X=()=>{W?S(B,{...W,opers:[...W.opers||[],O]}):d(O)};if(H&&O._id||ne){const J=H?O:me(Ae(ne));if(J){O._id=Ae(J);const ae=tt(J);ae?ae===W?S(I.indexOf(ae),{...ae,opers:ae.opers.map(pe=>pe===J?O:pe)}):(S(I.indexOf(ae),{...ae,opers:ae.opers.filter(pe=>pe!==J)}),X()):W?(v(R.indexOf(J)),X()):m(R.findIndex(({_id:pe})=>pe===O._id),O),ue(void 0)}else return k==null||k("global",{message:"未能找到要更新的干员"}),!1}else O._id=zn(),X();return!0},He=(G,O,k)=>{var H,W;if(I.find(({name:B,_id:X})=>B===G.name&&X!==G._id))return O==null||O("name",{message:"干员组已存在"}),!1;if(he||k&&G._id){const B=k?G:Me(Ae(he));if(B)G._id=Ae(B),S(I.findIndex(({_id:X})=>X===B._id),G),Ce(void 0);else return O==null||O("global",{message:"未能找到要更新的干员组"}),!1}else G._id=zn(),b(G),(H=G.opers)!=null&&H.length&&v((W=G.opers)==null?void 0:W.map(B=>R.findIndex(({name:X})=>X===B.name)).filter(B=>B!==-1));return!0};return u(ge,{children:D("div",{className:"flex flex-wrap md:flex-nowrap",children:[D("div",{className:"w-full md:w-1/3 md:mr-8 flex flex-col pb-8",children:[u("div",{className:"mb-2",children:u(mS,{submitOperator:$t,submitGroup:He,existedOperators:R,existedGroups:I,removeOperator:v,removeGroup:A})}),u(Uw,{mode:a,operator:ne,group:he,groups:I,onModeChange:n,onCancel:()=>{ue(void 0),Ce(void 0)},submitOperator:$t,submitGroup:He})]}),D("div",{className:"w-full md:w-2/3 pb-8",children:[L.length>0&&D(rn,{className:"flex items-center py-2 mb-2",icon:null,intent:"primary",children:[u(Be,{icon:"info-sign",className:"mr-1"}),"未加入干员：",L.join(", ")]}),u("div",{className:"mt-2 relative",children:D(Vc,{sensors:s,onDragStart:wn,onDragOver:ze,onDragEnd:ut,onDragCancel:ut,children:[D(xb,{id:vS,children:[u(Gi,{title:"干员",icon:"person",className:"font-bold"}),R.length===0&&u(xn,{title:"暂无干员"}),u(Vi,{items:R.map(Ae),strategy:Yi,children:u("ul",{className:"flex flex-wrap",children:R.map(G=>u("li",{className:"mt-2 mr-2",children:u(Ki,{id:Ae(G),data:{type:"operator"},children:O=>u(eo,{operator:G,editing:Ee(G),onEdit:()=>ue(Ee(G)?void 0:G),onRemove:()=>v(R.indexOf(G)),...O})})},Ae(G)))})})]}),u(Gi,{title:"干员组",icon:"people",className:"font-bold mt-8"}),I.length===0&&u("div",{className:"relative",children:u(xn,{title:"暂无干员组"})}),u(Vi,{items:I.map(Ae),strategy:Yi,children:u("ul",{className:"flex flex-wrap",children:I.map(G=>u("li",{className:"mt-4 mr-4",children:u(Ki,{id:Ae(G),data:{type:"group"},children:O=>u(Nc,{group:G,editing:Le(G),onEdit:()=>Ce(Le(G)?void 0:G),onRemove:()=>A(I.indexOf(G)),getOperatorId:Ae,isOperatorEditing:Ee,onOperatorEdit:k=>ue(Ee(k)?void 0:k),onOperatorRemove:k=>{var W;const H=I.indexOf(G);k>-1&&((W=G.opers)==null||W.splice(k,1)),S(H,G)},...O})})},Ae(G)))})}),D(Yc,{children:[$&&u(eo,{editing:Ee($),operator:$}),Y&&u(Nc,{group:Y,editing:Le(Y),isOperatorEditing:Ee,getOperatorId:Ae})]})]})})]})]})})},bS=({control:r})=>{const{field:{value:a,onChange:n,onBlur:s},fieldState:l}=bt({name:"stageName",control:r,rules:{required:"请输入关卡"}}),{data:f,error:d,isLoading:p}=ia(),m=P.useMemo(()=>f.filter(R=>!Sb(R.stageId)).sort((R,I)=>R.levelId.localeCompare(I.levelId))||[],[f]),v=P.useMemo(()=>new Nb(m,{keys:["name","catOne","catTwo","catThree"],threshold:.3}),[m]),_=P.useMemo(()=>a?aa(m,a)||ac(a):null,[m,a]),b=_n({control:r,name:"difficulty"}),w=_?Cb(Ob(_.stageId,b??Bi.UNKNOWN)):void 0,S=R=>n(Db(R.stageId)),{setLevel:A}=co();return P.useEffect(()=>{A(_||void 0)},[_,A]),u(Se,{label:"关卡",field:"stageName",error:d?so(d):l.error,asterisk:!0,FormGroupProps:{helperText:D(ge,{children:[u("p",{children:"键入以搜索"}),u("p",{children:"对于主线、活动关卡：键入关卡代号、关卡中文名或活动名称"}),u("p",{children:"对于悖论模拟关卡：键入关卡名或干员名"})]})},children:D("div",{className:"flex",children:[u(Jc,{items:m,itemListPredicate:R=>R?v.search(R).map(I=>I.item):m,fieldState:l,onReset:()=>n(""),className:Ne("flex-grow mr-2",p&&"bp4-skeleton"),disabled:p,itemRenderer:(R,{handleClick:I,handleFocus:L,modifiers:$})=>u(Ke,{text:`${R.catThree} ${R.name}`,onClick:I,onFocus:L,selected:$.active,disabled:$.disabled},R.stageId),selectedItem:_,onItemSelect:S,inputValueRenderer:R=>Eb(R)?`${R.name} (自定义)`:`${R.catThree} ${R.name}`,noResults:u(Ke,{disabled:!0,text:"没有匹配的关卡"}),createNewItemFromQuery:R=>ac(R),createNewItemRenderer:(R,I,L)=>u(Ke,{text:`使用自定义关卡名 "${R}"`,icon:"text-highlight",onClick:L,selected:I},"create-new-item"),inputProps:{placeholder:"关卡",large:!0,onBlur:s}}),u(ua,{placement:"top",content:"在 PRTS.Map 中查看关卡",children:u(Rb,{large:!0,icon:"share",target:"_blank",href:w,disabled:!w})})]})})},_S=({control:r})=>{const{field:{value:a=Bi.UNKNOWN,onChange:n},fieldState:{error:s}}=bt({name:"difficulty",control:r}),l=_n({control:r,name:"stageName"}),{data:f}=ia(),d=P.useMemo(()=>!(!aa(f,l)||Pb(f,l)),[f,l]);P.useEffect(()=>{d&&a!==Bi.UNKNOWN&&n(Bi.UNKNOWN)},[d,a,n]);const p=m=>{n(a^m)};return u(Se,{label:"关卡难度",description:"在作业上显示的难度标识，如果不选择则不显示",FormGroupProps:{helperText:d?"该关卡没有突袭难度，无需选择":""},field:"difficulty",error:s,children:D(Lc,{children:[u(te,{disabled:d,active:!!(a&Mi.REGULAR),onClick:()=>p(Mi.REGULAR),children:"普通"}),u(te,{disabled:d,active:!!(a&Mi.HARD),onClick:()=>p(Mi.HARD),children:"突袭"})]})})},xS=({form:{control:r,watch:a,getValues:n,setValue:s,formState:{errors:l}},toolbar:f})=>{var _,b,w;const{data:d}=ia(),p=a("stageName"),m=$_();P.useEffect(()=>{if(!n("doc.title")){const S=aa(d,p);S&&s("doc.title",[S.catTwo,S.catThree,S.name].filter(Boolean).join(" - "))}},[p,d,n,s]);const v=(_=l.global)==null?void 0:_.message;return u(nx,{children:D("section",{className:"flex flex-col relative h-full pt-4",children:[D("div",{className:"px-8 text-lg font-medium flex items-center flex-wrap w-full",children:[u(Be,{icon:"document"}),u("span",{className:"ml-2 mr-4",children:"作业编辑器"}),u("div",{className:"flex-1"}),f]}),v&&u(rn,{className:"mt-4",intent:"danger",icon:"error",title:"错误",children:v.split(`
`).map(S=>u("p",{children:S},S))}),D("div",{className:"px-8 mr-0.5",children:[u(or,{children:"作业元信息"}),D("div",{className:"flex flex-col md:flex-row",children:[u("div",{className:"w-full md:w-1/4 md:mr-8",children:u(bS,{control:r})}),u("div",{className:"w-full md:w-3/4",children:u($i,{label:"作业标题",field:"doc.title",control:r,error:(b=l.doc)==null?void 0:b.title,ControllerProps:{rules:{required:"必须填写标题"},render:({field:S})=>u(Mn,{large:!0,id:"doc.title",placeholder:"起一个引人注目的标题吧",...S,value:S.value||""})}})})]}),D("div",{className:"flex flex-col md:flex-row",children:[u("div",{className:"w-full md:w-1/4 md:mr-8",children:u(_S,{control:r})}),u("div",{className:"w-full md:w-3/4",children:u($i,{label:"作业描述",field:"doc.details",control:r,error:(w=l.doc)==null?void 0:w.details,ControllerProps:{render:({field:S})=>u(Bc,{fill:!0,rows:4,growVertically:!0,large:!0,id:"doc.details",placeholder:"如：作者名、参考的视频攻略链接（如有）等",...S,value:S.value||""})}})})]}),u("div",{className:"h-[1px] w-full bg-gray-200 mt-4 mb-6"}),D("div",{className:"flex flex-col min-h-[calc(100vh-6rem)]",children:[u("div",{className:"w-full flex flex-col pb-8",children:u(wS,{control:r})}),D("div",{className:"w-full pb-8",children:[u(or,{children:"动作序列"}),u(hf,{className:"mb-4",children:u("span",{children:"拖拽以重新排序"})}),u(hx,{control:r})]})]})]}),m!=="tablet"&&u(zw,{})]})})},wS=r=>{const[a,n]=P.useState(!1);return a?(setTimeout(()=>n(!1),100),null):D(ge,{children:[u(or,{children:"干员与干员组"}),D(hf,{className:"mb-4",children:[u("span",{children:"拖拽以重新排序或分配干员"}),D("span",{children:["如果拖拽速度过快可能会使动画出现问题，此时请点击",u(te,{minimal:!0,className:"!inline !p-0 !min-h-0 ![font-size:inherit] !leading-none !align-baseline underline",onClick:()=>n(!0),children:"刷新界面"}),"以修复 （不会丢失数据）"]})]}),u(yS,{...r})]})};function SS(r){var a,n;return r=JSON.parse(JSON.stringify(r)),ao([r.actions,r.opers,r.groups,(a=r.groups)==null?void 0:a.map(s=>s==null?void 0:s.opers)].flat(2)).forEach(s=>{s._id=zn()}),(n=r.actions)==null||n.forEach(s=>{const l=Fr(s==null?void 0:s.type);if(l.value!=="Unknown"&&(s.type=l.value),l.value==="Deploy"){const f=s,d=Ib(f.direction).value;d!==null&&(f.direction=d)}}),r}function no(r){var a;return r=JSON.parse(JSON.stringify(r)),r.minimumRequired||(r.minimumRequired=sf.V4_0_0),ao([r.actions,r.opers,r.groups,(a=r.groups)==null?void 0:a.map(n=>n==null?void 0:n.opers)].flat(2)).forEach(n=>{delete n._id,delete n.id}),Tb(r,{deep:!0})}function NS(r){var a;r.doc&&((a=r.doc).details||(a.details=r.doc.title))}function CS(){const r=P.useRef([]),a=n=>new Promise(s=>{r.current.push(()=>{n&&n(),s()})});return P.useEffect(()=>{r.current.length>0&&(r.current.forEach(n=>n()),r.current=[])}),{afterRender:a}}const OS=({onImport:r})=>{const a=P.useRef(null);return u(ge,{children:u(Ke,{icon:"document-open",shouldDismissPopover:!1,onClick:()=>{var s;return(s=a.current)==null?void 0:s.click()},text:D(ge,{children:["导入本地文件...",u("input",{className:"hidden",type:"file",accept:"application/json",ref:a,onChange:async s=>{var f;const l=(f=s.target.files)==null?void 0:f[0];if(l)try{r(await l.text())}catch(d){console.warn("Failed to read file:",d),lr.show({message:"无法读取文件",intent:"danger"})}}})]})})})},ES=({onImport:r})=>{const[a,n]=P.useState(!1),[s,l]=P.useState(!1),{handleSubmit:f,control:d,setError:p,formState:{errors:m,isDirty:v,isValid:_}}=kn(),{field:{value:b,onChange:w}}=bt({control:d,name:"code",rules:{required:"请输入神秘代码"}}),S=f(async({code:A})=>{try{l(!0);const R=Ab(A);if(!R)throw new Error("无效的神秘代码");const{id:I}=R,L=(await Mb({id:I})).parsedContent;if(L===zb)throw new Error("无法解析作业内容");if(!a)return;const $=JSON.stringify(L,null,2);r($),n(!1)}catch(R){console.warn(R),p("code",{message:"加载失败："+so(R)})}finally{l(!1)}});return D(ge,{children:[u(Ke,{icon:"backlink",text:"导入神秘代码...",shouldDismissPopover:!1,onClick:()=>n(!0)}),u(Lb,{className:"w-full max-w-xl",isOpen:a,title:"导入神秘代码",icon:"backlink",onClose:()=>{l(!1),n(!1)},children:D("form",{className:"flex flex-col px-4 pt-4",onSubmit:S,children:[u(Se,{field:"code",label:"神秘代码",description:"神秘代码可在本站的作业详情中获取",error:m.code,children:u(Mn,{large:!0,placeholder:"maa://...",value:b||"",onChange:w})}),u(te,{disabled:!_&&!v,intent:"primary",loading:s,type:"submit",icon:"import",large:!0,children:"导入"})]})})]})},RS=({text:r,onChange:a})=>{const[n,s]=P.useState(!1),l=p=>{s(!1),a(p)};return D(ge,{children:[u(Be,{icon:"manually-entered-data"}),u("span",{className:"ml-2",children:"编辑 JSON"}),u("div",{className:"flex-1"}),u(Bt,{minimal:!0,position:"bottom-left",isOpen:n,onClose:()=>s(!1),content:D(Ur,{children:[u(OS,{onImport:l}),u(ES,{onImport:l})]}),children:u(te,{className:"mr-4",icon:"import",text:"导入",rightIcon:"caret-down",onClick:()=>s(!n)})}),u(Bt,{minimal:!0,position:"bottom-left",content:D(Ur,{children:[u(Ke,{icon:"clipboard",text:"复制",onClick:()=>{navigator.clipboard.writeText(r),lr.show({message:"已复制 JSON 到剪贴板",intent:"success"})}}),u(Ke,{icon:"download",text:"下载",onClick:()=>{let p;try{p=JSON.parse(r).doc.title}catch(b){console.warn(b)}const m=new Blob([r],{type:"application/json"}),v=URL.createObjectURL(m),_=document.createElement("a");_.href=v,_.download=`MAACopilot_${p||"未命名"}.json`,_.click(),URL.revokeObjectURL(v),lr.show({message:"已下载作业 JSON 文件",intent:"success"})}})]}),children:u(te,{className:"mr-4",icon:"export",text:"导出",rightIcon:"caret-down"})})]})},PS=({form:{getValues:r,watch:a,reset:n,formState:{errors:s}},triggerValidation:l})=>{const f=!!Object.keys(s).length,d=P.useMemo(()=>{try{const S=r();return JSON.stringify(no(S),null,2)}catch(S){return console.warn(S),"(解析时出现错误)"}},[r]),{afterRender:p}=CS(),[m,v]=P.useState(d),[_,b]=P.useState(),w=S=>{try{b(void 0);const A=JSON.parse(S);n(SS(Fb(A,{deep:!0})),{keepDefaultValues:!0}),p(l)}catch(A){A instanceof SyntaxError?b("存在语法错误"):(console.warn(A),b("存在结构错误"))}};return u(kb,{title:u(RS,{text:m,onChange:S=>{v(S),w(S)}}),children:D("div",{className:"px-8 py-4 flex-grow flex flex-col bg-zinc-50 dark:bg-slate-900 dark:text-white",children:[u(rn,{className:" [&_h4]:text-sm",intent:"primary",title:"在此处编辑 JSON 将会实时更新表单"}),D("div",{className:"mt-2 flex flex-wrap gap-2 [&_h4]:text-sm",children:[u("div",{className:"flex-1",children:u(rn,{title:"JSON 验证："+(_?"语法错误":"通过"),intent:_?"warning":"success"})}),u(ua,{className:"flex-1",content:"请在表单中查看错误信息",position:"bottom",disabled:!f,children:u(rn,{title:"表单验证："+(f?"未通过":"通过"),intent:f?"warning":"success"})})]}),u("textarea",{className:"mt-4 p-1 flex-grow bg-white text-xm font-mono resize-none focus:outline focus:outline-2 focus:outline-blue-300 dark:bg-slate-900 dark:text-white",value:m,onChange:S=>v(S.target.value),onBlur:S=>w(S.target.value)})]})})},DS=({className:r,triggerValidation:a,...n})=>{const[s,l]=P.useState(!1);return D(ge,{children:[u(te,{className:r,icon:"manually-entered-data",text:"编辑 JSON",onClick:()=>{a(),l(!0)}}),u(af,{isOpen:s,onClose:()=>l(!1),children:s&&u(PS,{triggerValidation:a,...n})})]})},Wf=(r,a)=>{var n;return!Wr(r,(n=cf(a))==null?void 0:n.v)};function TS(r,{key:a,interval:n,limit:s,shouldSave:l=Wf,onSave:f}){const[d,p]=P.useState(()=>{const w=localStorage.getItem(a);if(w)try{return JSON.parse(w)}catch(S){console.warn(S)}return[]}),m=P.useRef(d);m.current=d;const v=P.useRef(),_=P.useCallback((w=r())=>{if(w=JSON.parse(JSON.stringify(w)),!l(w,m.current))return;const A=[{v:w,t:Date.now()},...m.current||[]].slice(0,s);for(;A.length>0;)try{localStorage.setItem(a,JSON.stringify(A)),p(A),f==null||f(w,A);break}catch(R){A.pop(),A.length===0&&console.warn("Failed to save：",R)}},[s,r,a,f,l]);P.useEffect(()=>(clearInterval(v.current),v.current=setInterval(_,n),()=>clearInterval(v.current)),[n,s,_]);const b=P.useCallback(w=>{_(w),clearInterval(v.current),v.current=setInterval(_,n)},[_,n]);return P.useEffect(()=>()=>b(),[b]),window.addEventListener("beforeunload",()=>b()),{archive:d,save:b}}const IS=({archive:r,itemTitle:a,options:{interval:n,limit:s},onRestore:l,...f})=>{var _;const[d,p]=P.useState(!1),m=P.useRef(),v=()=>{m.current&&(l(m.current.v),m.current=void 0),p(!1)};return D(ge,{children:[u(Bt,{content:D(ge,{children:[D(rn,{intent:"primary",children:["每隔 ",~~(n/1e3/60)," ","分钟自动保存编辑过的内容，记录上限为 ",s," 条"]}),u(Ur,{className:"mt-2 p-0",children:r.map(b=>u(Ke,{multiline:!0,icon:"time",text:D(ge,{children:[a(b),u("div",{className:"text-xs opacity-75",children:sc(b.t)})]}),onClick:()=>{m.current=b,p(!0)}},b.t))})]}),children:u(te,{icon:"history",text:r.length?`已自动保存：${sc((_=cf(r))==null?void 0:_.t)}`:"未保存",...f})}),D(ro,{isOpen:d,cancelButtonText:"取消",confirmButtonText:"确定",icon:"rotate-document",intent:"danger",canOutsideClickCancel:!0,onCancel:()=>p(!1),onConfirm:v,children:[u(or,{children:"恢复内容"}),u("p",{children:"当前的编辑内容将会被覆盖，确定要恢复内容吗？"})]})]})};function Tc(r,a){var m,v;const n={},s=[],{actions:l,groups:f}=r,d=f==null?void 0:f.find(_=>{var b;return(((b=_==null?void 0:_.opers)==null?void 0:b.length)||0)===0});if(d&&s.push(`干员组“${d.name}”不能为空`),l)for(let _=0;_<l.length;_++){const b=l[_];if((b==null?void 0:b.type)===sn.Type.BulletTime){const w=(m=l[_+1])==null?void 0:m.type;(!w||!oc.includes(w))&&s.push(`第${_+1}个动作是“${Fr(b.type).alternativeValue}”，但它的下一个动作不是“${oc.map(S=>Fr(S).alternativeValue).join("”、“")}”其中之一`)}}r={...r,doc:{...r.doc,details:((v=r.doc)==null?void 0:v.details)||"dummy"}};const p=Dr.validate("copilot",r);return console.log("jsonSchemaValidationResult",p,"errors",Dr.errors),!p&&Dr.errors&&(Ub(Dr.errors),s.push(Dr.errorsText(void 0,{separator:`
`}))),s.length>0&&(n.global={message:s.join(`
`)}),Object.keys(n).length>0?(Object.entries(n).forEach(([_,b])=>b&&a(_,b)),!1):!0}const Bf={minimumRequired:sf.V4_0_0,stageName:"",actions:[],doc:{title:""},groups:[],opers:[]},AS=r=>!Wr(r,Bf),zS=Wb(Bb(()=>{const r=Hb(),a=r.id?+r.id:void 0,n=!a,s=n?"发布":"更新",l=Gb({id:a,suspense:!0}).data,f=kn({defaultValues:l?$b(l):Bf}),{handleSubmit:d,getValues:p,trigger:m,reset:v,setError:_,clearErrors:b}=f,w=P.useMemo(()=>({key:"maa-copilot-editor",interval:1e3*60,limit:20,shouldSave:(Y,Z)=>Wf(Y,Z)&&AS(Y)}),[]),{archive:S}=TS(p,w),[A,R]=P.useState(l?l.status:zi.Public),[I,L]=P.useState(!1),$=async()=>{if(b(),!await m())return!1;const Y=no(p());return Tc(Y,_)},U=d(async Y=>{var Z;try{L(!0);const ne=no(Y);if(NS(ne),!Tc(ne,_))return;try{n?await Vb({content:JSON.stringify(ne),status:A}):await Yb({id:a,content:JSON.stringify(ne),status:A})}catch(ue){if(ue instanceof Error&&ue.message.includes("is less than or equal to 0")){const he=((Z=ne.actions)==null?void 0:Z.findIndex(Ce=>(Ce==null?void 0:Ce.cost_changes)<0))??-1;if(he!==-1)throw new Error(`目前暂不支持上传费用变化量为负数的动作（第${he+1}个动作）`)}throw ue}lr.show({intent:"success",message:`作业${s}成功`})}catch(ne){_("global",{message:ne instanceof Kb?`作业${s}失败：${ne.message}`:so(ne)})}finally{L(!1)}});return u(xS,{form:f,toolbar:D(ge,{children:[u(IS,{minimal:!0,className:"!text-xs opacity-75",archive:S,options:w,itemTitle:Y=>{var Z;return((Z=Y.v.doc)==null?void 0:Z.title)||"无标题"},onRestore:Y=>v(Y,{keepDefaultValues:!0})}),u(DS,{className:"ml-4",form:f,triggerValidation:$}),u(te,{intent:"primary",className:"ml-4",icon:"upload",text:s,loading:I,onClick:()=>{b(),U()}}),u("div",{className:"flex-[100%_0_0]"}),u("div",{className:"ml-auto mt-2",children:u(ua,{placement:"bottom",content:D(ge,{children:["公开作业：会在所有列表中显示",u("br",{}),"私有作业：其他人无法在列表中看见，但可以通过神秘代码访问"]}),children:u(Xb,{className:"text-sm",checked:A===zi.Public,onChange:Y=>R(Y.currentTarget.checked?zi.Public:zi.Private),children:u("span",{className:"-ml-1 opacity-75",children:"公开"})})})})]})})}));export{zS as CreatePage};
